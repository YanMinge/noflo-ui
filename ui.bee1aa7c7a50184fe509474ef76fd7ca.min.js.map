{"version":3,"sources":["webpack:///./elements/noflo-card-styles.js","webpack:///./css/noflo-ui.css","webpack:///./src/runtime.js","webpack:///./elements/codemirror-styles.js","webpack:///./runtimeinfo/index.js","webpack:///./elements/the-card-styles.js","webpack:///./src/JournalStore.js","webpack:///./css/SourceCodePro-Regular.otf.woff","webpack:///./css/SourceCodePro-Bold.otf.woff","webpack:///./elements/noflo-modal-styles.js","webpack:///./src/projects.js","webpack:///./src/urls.js","webpack:///./runtimeinfo/msgflo.yaml","webpack:///./runtimeinfo/sndflo.yaml","webpack:///./runtimeinfo/imgflo.yaml","webpack:///./runtimeinfo/noflo.yaml","webpack:///./runtimeinfo/javafbp.yaml","webpack:///./runtimeinfo/microflo.yaml","webpack:///./elements/the-graph-styles.js","webpack:///./elements/noflo-polymer.js","webpack:///./elements/noflo-account-settings.js","webpack:///./elements/noflo-account.js","webpack:///./elements/noflo-icon.js","webpack:///./elements/noflo-type-selector.js","webpack:///./elements/noflo-new-project.js","webpack:///./elements/noflo-new-repository.js","webpack:///./elements/noflo-add-runtime.js","webpack:///./elements/noflo-new-runtime.js","webpack:///./elements/the-graph-thumb.js","webpack:///./elements/noflo-project-card.js","webpack:///./elements/noflo-repo-card.js","webpack:///./elements/noflo-runtime-card.js","webpack:///./elements/noflo-main.js","webpack:///./elements/the-graph.js","webpack:///./elements/the-graph-editor.js","webpack:///./elements/noflo-library.js","webpack:///./elements/noflo-exported-inspector.js","webpack:///./elements/noflo-icon-selector.js","webpack:///./elements/noflo-new-graph.js","webpack:///./elements/noflo-group-inspector.js","webpack:///./elements/the-card-stack.js","webpack:///./elements/the-card.js","webpack:///./elements/the-panel.js","webpack:///./elements/noflo-context.js","webpack:///./src/components/TestStatus.jsx","webpack:///./src/components/TestStatusDetailed.jsx","webpack:///./elements/noflo-runtime-browserdebug.js","webpack:///./elements/noflo-runtime-customiframe.js","webpack:///./elements/noflo-runtime-selector.js","webpack:///./elements/noflo-runtime-testdetails.js","webpack:///./elements/noflo-runtime.js","webpack:///./elements/the-graph-nav.js","webpack:///./elements/noflo-journal.js","webpack:///./elements/noflo-component-editor.js","webpack:///./elements/noflo-menu.js","webpack:///./elements/noflo-search-graph-results.js","webpack:///./elements/noflo-search-library-results.js","webpack:///./elements/noflo-graph-inspector.js","webpack:///./elements/noflo-component-inspector.js","webpack:///./elements/noflo-search.js","webpack:///./elements/noflo-new-component.js","webpack:///./elements/noflo-project-inspector.js","webpack:///./elements/noflo-project-sync.js","webpack:///./elements/noflo-project.js","webpack:///./src/components/EdgeId.jsx","webpack:///./src/components/RuntimeEvents.jsx","webpack:///./elements/number-scrubber.js","webpack:///./elements/noflo-node-inspector.js","webpack:///./elements/noflo-edge-menu.js","webpack:///./elements/noflo-packets.js","webpack:///./elements/noflo-alert.js","webpack:///./css/noflo-ui.css?e366","webpack:///./elements/noflo-ui.js","webpack:///./src/collections.js","webpack:///./src/icons.js"],"names":["$_documentContainer","document","createElement","innerHTML","head","appendChild","content","___CSS_LOADER_EXPORT___","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","hash","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","push","module","i","fbpGraph","findByComponent","getName","namespace","exports","graphRuntimeIdentifier","graph","projectNamespace","properties","runtimeName","graphName","portForLibrary","port","name","id","type","description","addressable","schema","componentForLibrary","component","icon","subgraph","inports","inPorts","map","outports","outPorts","getGraphType","g","environment","undefined","runtime","getComponentType","runtimeType","code","match","getSource","client","protocol","getsource","catch","e","indexOf","Promise","reject","definition","getRemoteNodes","r","route","remote","reduce","promise","node","then","nodes","length","Error","matchedNode","filter","n","componentType","componentImplementation","project","graphs","resolve","source","includes","language","loadGraph","instance","method","isDefaultRuntime","address","ensureIframe","c","querySelector","iframe","body","setAttribute","className","transport","disconnect","info","msgflo","sndflo","imgflo","noflo","javafbp","microflo","journal","IDBJournalStore","JournalStore","db","super","this","transactions","revId","entries","putTransaction","transaction","objectStore","add","genKey","cb","index","openCursor","onsuccess","event","cursor","target","result","value","lastRevision","findMainGraph","main","find","mainCapable","findGraph","findComponent","components","componentName","library","split","findProject","projects","getProjectHash","callback","setTimeout","isReadOnly","context","capabilities","guessLanguage","defaultLanguage","getComponentHash","getGraphHash","graphId","hashToString","part","encodeURIComponent","join","element","String","customElements","define","_template","is","theme","debug","user","Object","notify","observer","env","NOFLO_APP_TITLE","getElementById","classList","remove","preventDefault","stopPropagation","fire","close","parentNode","removeChild","listeners","click","_isSelectedTheme","current","_isSelectedDebug","askForScope","Array","help","NOFLO_THEME","NOFLO_APP_NAME","NOFLO_APP_VERSION","scope","currentTarget","getAttribute","github","scopes","set","querySelectorAll","dialog","addEventListener","detail","_ifPublicScope","_ifPrivateScope","fallback","icons","getIcon","available","runtimes","label","forEach","rt","getByType","prepareAvailable","runtimeTypeInfo","keys","runtimetypes","availType","shortname","availtype","tokenList","selected","_computeIf","_computeIf2","obj","pieces","key","canSend","Boolean","projectId","produceNamespace","toLowerCase","replace","ga","specs","disabled","repo","token","matched","availableTypes","canCreate","secret","createUUID","seen","Date","toString","_computeRepeat","t","rtInfo","def","url","helpurl","runtimeAdd","ev","edgeColors","fillStyle","height","Number","lineWidth","listener","nodeSize","strokeStyle","thumbrectangle","thumbscale","width","viewrectangle","themeChanged","style","thumb","styleFromTheme","fill","stroke","redrawGraph","$","canvas","getContext","bind","render","rectangle","scale","newGraph","oldGraph","removeListener","on","toDataURL","menuopen","menuicon","gist","window","location","dispatchEvent","CustomEvent","composed","bubbles","mains","open","projectList","remoteProjects","openChanged","_canGithub","fetchGithub","repoParts","org","branch","openLocal","filterRemoteProjects","remoteProject","filterLocalProjects","filterAvailableRuntimes","opener","now","seenHoursAgo","Math","floor","runtimeTypes","examples","typeExamples","ssl","example","_canFlowhub","p","setProperties","_isLocalProjects","_isSelectedView","view","list","animatedEdges","appView","autolayout","autolayouter","debounceLibraryRefeshTimer","displaySelectionGroup","editable","graphChanges","errorNodes","forceSelection","graphView","grid","maxZoom","menus","minZoom","offsetX","offsetY","pan","readonly","selectedEdges","selectedNodes","selectedNodesHash","snap","klayNoflo","init","onSuccess","applyAutolayout","workerScript","newTheme","previousTheme","svgcontainer","graphEvents","graphRenameEvents","graphPortEvents","trackGraphChange","payload","triggerAutolayout","from","to","pub","priv","public","process","metadata","endTransaction","concat","unsubscribeGraph","unmountComponentAtNode","subscribeGraph","App","onEdgeSelection","onNodeSelection","onPanScale","getMenuDef","refs","x","y","itemKey","item","toggle","isSelected","shallowClone","slice","splice","setSelectedNodes","setErrorNodes","setSelectedEdges","setAnimatedEdges","nodeId","updateIcon","portInfo","layout","direction","options","intCoordinates","algorithm","layoutHierarchy","spacing","borderSpacing","edgeSpacingFactor","inLayerSpacingFactor","nodePlace","nodeLayering","edgeRouting","crossMin","keilerGraph","startTransaction","applyToGraph","triggerFit","setState","markDirty","addNode","state","focusNode","setProps","clearTimeout","rerender","libraryDirty","generated","debounceLibraryRefesh","unnamespaced","registerComponent","toJSON","hostAttributes","copyNodes","notifyView","onContextMenu","plugins","editor","getDefaultMenus","unregister","plugin","register","defaultMenu","notifyViewChanged","buildInitialLibrary","componentsFromGraph","edge","updateErrorNodes","errorNodesChanged","getComponent","search","num","random","getPan","getScale","nameParts","default","addInitial","getLibrary","matching","privateport","publicport","renameInport","renameOutport","getIcons","mainGraph","duplicates","_isSelectedMainGraph","group","groupdescription","renameGroup","setGroupMetadata","addGroup","observeChanges","MutationObserver","updateVisibility","observe","subtree","childList","attributes","characterData","childElementCount","parent","prepend","stacks","getElementsByTagName","stack","insertBefore","firstChild","automatic","handle","size","cleanUpLocation","automaticChanged","unobserve","handleMutations","getMain","sizeDimensions","getSizeDimensions","outside","getPositionDimension","edges","errors","contextBar","contextsection","keyCode","clearSelection","pop","emptyOnReadOnly","addMenuCallback","localMenu","canGetSource","n4","iconLabel","action","href","currentGraphId","e4","w4","sort","groups","grp","grpNodes","JSON","parse","stringify","currentGraph","show","once","componentParts","libraryMatch","shift","status","online","TestStatus","props","passed","failed","skipped","total","suites","suite","cases","testCase","skip","stateToClass","baseApp","qrCodeUrl","runtimeUrl","generateRuntimeInfo","params","appDebugUrl","launchNewBrowserRuntime","customIframeRuntime","launchImgfloHerokuRuntime","checkRuntimeSeen","getTime","debugOnDevice","addIframeRuntime","deployHeroku","debugOnDeviceModal","addIframeModal","template","TestStatusDetailed","topic","assertion","error","container","shadowRoot","panel","graphChanged","runtimeSelector","runtimeIframe","getRuntimeIframe","hideCard","getRuntimeIcon","execution","running","showCard","details","setIframeVisibility","visibility","display","_produceAddress","backgroundColor","hide","outsideFill","scaledviewrectangle","_","nav","calculateStyleFromTheme","viewBoxBorder","viewBoxBorder2","viewrectangleChanged","outcanvas","viewrect","w","h","canRedo","canUndo","hidenav","klay","returnTo","newEditor","checkState","connectJournal","positionedNodes","store","undo","redo","codeEditor","spec","testsEditor","componentChanged","self","debouncedComponentChange","debounce","debouncedSpecChange","changed","tests","code_editor","getExampleCode","codeOptions","getMirrorOptions","getValue","setSize","tests_editor","testOptions","lineNumbers","mode","getMirrorMode","getMirrorTheme","readOnly","componenttemplates","templateFunc","setOption","refresh","buttons","sender","button","results","downloadUrl","inGraph","isMain","preview","updateName","unnamespace","prepareHtmlEditor","prepareTestsEditor","prepareDownload","Blob","URL","sha","blob","createObjectURL","htmlEditor","focus","html_editor","specCode","hidden","_computeDownload","entity","errorText","dom","graphInspector","menuCard","parentPath","resultsCard","searchGraphResults","searchLibrary","searchLibraryResults","blur","closeInspectors","graphsChanged","componentInspector","findNode","comp","idx","previous","searchinput","clearResults","contains","keyIdentifier","searchChanged","clearSearch","addTo","path","getParentPath","unshift","_canSearch","_canGoBack","_isGraph","_isComponent","_canInspectGraph","_canInspectComponent","_isReadOnly","languages","runtimeI","allLanguages","lang","preferredlanguage","getExampleSpec","_languageSelected","fbpSpec","originalRepo","updateProject","_mainSelected","_getMainGraphs","files","hasOp","hasPush","message","operation","pull","conflict","noop","statusText","entry","operations","filesChanged","pushes","ops","file","originalConflicts","originalPushes","originalPulls","checkOps","f","_getOperationLabel","op","_isSelectedOp","canComponent","gotoGraph","gotoComponent","account","toggleOpen","property","_computeClass","nodeLabel","EdgeId","src","connection","tgt","row","s","routeClass","class","PacketData","multiLine","title","data","PacketDetails","isExpanded","clearSizeCache","RuntimeEvents","packets","idWidth","min","columns","header","expander","subComponent","tableHeight","distance","max","Infinity","mod","precision","scrubend","scrubstart","startValue","step","webkitUserSelect","MozUserSelect","msUserSelect","userSelect","parseFloat","delta","dx","round","newValue","isFinite","trackstart","track","trackend","errorLog","lastErrorLog","scrubbing","showErrorLogs","updatePorts","updateLabel","getNode","renameNode","setNodeMetadata","initializers","iip","connected","inport","getPortValue","getPortConnection","portDef","inputType","values","input","checked","parseInt","reader","FileReader","onload","readAsDataURL","portToInput","updateValue","inputToPort","removeValue","setPortValue","removeInitial","val","isNaN","validatePortValue","_computeIf3","_computeIf4","_computeIf5","_computeIf6","_computeIf7","_computeIf8","_computeSelected","routes","secure","setEdgeMetadata","toggleSecure","meta","currentgraph","events","nodeInspectors","showPackets","frameRequest","newEdges","oldEdges","showEdgeCards","hideEdgeCards","updatePacketInspector","clearErrorNodes","inspector","addErrorNode","fromStr","toUpperCase","genId","edgeMenu","menu","newPackets","oldPackets","requestAnimationFrame","edgeIds","genEdgeId","selectedEdgeIds","packetId","packetEdge","rowId","offsetWidth","showNodeCards","hideNodeCards","found","isError","offerHTTPS","locals","ctx","compatibleRuntimes","dontAutoHideAlert","innerHeight","innerWidth","clearContextFirst","emitEvent","openProject","clear","all","grapheditor","changes","triggerTests","componenteditor","searchLibraryResult","fixed","showError","hideAlertSoon","showProgress","libraryResults","searchGraphResult","graphResults","syncOperation","componentLibrary","libKey","showTests","confirm","alert","hideAlert","err","oldTheme","basename","sortByName","a","b","aName","bName","localeCompare","allowUnknown","sortBySeen","ain","bin","addToList","existing","exists","removeFromList","TheGraph","iconName","iconMap","FONT_AWESOME"],"mappings":"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","file":"ui.b4e5e6d953737422cdee.min.js","sourcesContent":["const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-card-styles\">\n  <template>\n    <style>\n    :host {\n      display: block;\n      width: 216px;\n      height: 105px;\n      overflow: hidden;\n      display: inline-block;\n      text-align: center;\n      background-color: var(--noflo-ui-background);\n      color: var(--noflo-ui-text);\n      border-radius: 3px;\n      margin-right: 18px;\n      margin-left: 18px;\n      margin-bottom: 36px;\n      position: relative;\n      cursor: pointer;\n    }\n    h2 {\n      position: absolute;\n      top: 36px;\n      line-height: 36px;\n      width: 150px;\n      text-transform: none;\n      font-size: 12px;\n      text-align: left;\n      white-space: nowrap;\n      left: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-overflow: ellipsis;\n      overflow: hidden;\n    }\n    p {\n      position: absolute;\n      top: 53px;\n      left: 18px;\n      width: 150px;\n      text-transform: uppercase;\n      font-size: 10px;\n      text-align: left;\n      max-height: 36px;\n      overflow: hidden;\n      color: hsl(189, 11%, 50%);\n    }\n    p span {\n      text-overflow: ellipsis;\n      max-width: 100px;\n      white-space: nowrap;\n      overflow: hidden;\n    }\n    #menubutton {\n      position: absolute;\n      right: 36px;\n      top: 18px;\n      background-color: transparent;\n      color: var(--noflo-ui-text);\n      border: 0px;\n      outline: 0px;\n      cursor: pointer;\n    }\n    #menu {\n      position: absolute;\n      right: 36px;\n      top: 36px;\n      padding: 0px;\n      margin: 0px;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      box-shadow: 3px 3px var(--noflo-ui-background);\n      z-index: 1;\n    }\n    #menu li {\n      list-style: none;\n      text-align: left;\n      margin-bottom: 2px;\n      margin-top: 2px;\n    }\n    #menu li button {\n      background-color: transparent;\n      border: 0px;\n      outline: 0px;\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n      text-align: left;\n    }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./SourceCodePro-Regular.otf.woff\";\nimport ___CSS_LOADER_URL_IMPORT_1___ from \"./SourceCodePro-Bold.otf.woff\";\nimport ___CSS_LOADER_URL_IMPORT_2___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.svg?v=4.0.3\";\nimport ___CSS_LOADER_URL_IMPORT_3___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.eot\";\nimport ___CSS_LOADER_URL_IMPORT_4___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.woff?v=4.0.3\";\nimport ___CSS_LOADER_URL_IMPORT_5___ from \"../node_modules/font-awesome/fonts/fontawesome-webfont.ttf?v=4.0.3\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___, { hash: \"#fontawesomeregular\" });\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___, { hash: \"?#iefix&v=4.0.3\" });\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"input::-webkit-input-speech-button {\\n  margin-right: 18px;\\n  cursor: pointer;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nbody {\\n  --noflo-ui-background: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-background-shadow: hsla(0, 0%, 0%, 0.5);\\n  --noflo-ui-text: hsl(192, 25%, 92%);\\n  --noflo-ui-text-highlight: hsl(185,100%,75%);\\n  --noflo-ui-border: hsla(190, 90%, 80%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 80%);\\n  --noflo-ui-base-unit: 72px;\\n}\\nbody.light {\\n  --noflo-ui-background: hsl(192, 25%, 92%);\\n  --noflo-ui-background-shadow: hsla(192, 25%, 100%, 0.3);\\n  --noflo-ui-text: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-text-highlight: hsl(185,100%,15%);\\n  --noflo-ui-border: hsla(190, 90%, 8%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 8%);\\n}\\n\\nbody {\\n  /* iOS don't clash with our hold behavior */\\n  -webkit-user-select: none;                /* disable cut copy paste */\\n  -webkit-touch-callout: none;              /* disable callout, image save panel */\\n  -webkit-tap-highlight-color: transparent; /* \\\"turn off\\\" link highlight */\\n}\\n\\nbody #loading {\\n  opacity: 0;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  z-index: -1;\\n  width: 400px;\\n  color: var(--noflo-ui-text-highlight);\\n  text-align: center;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  position: fixed;\\n}\\n\\nbody.loading #loading {\\n  display: block;\\n  opacity: 1;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  animation: pulsate 2s ease-in-out;\\n  animation-iteration-count: infinite;\\n  -webkit-animation: pulsate 2s ease-in-out;\\n  -webkit-animation-iteration-count: infinite;\\n  text-align: center;\\n  z-index: 10;\\n}\\nbody noflo-ui {\\n  opacity: 1;\\n  transition: opacity 0.3s ease-in;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  display: block;\\n  width: 100vw;\\n  height: 100vh;\\n}\\nbody.loading noflo-ui {\\n  opacity: 0;\\n}\\n@keyframes pulsate {\\n  0% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n@-webkit-keyframes pulsate {\\n  0% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    -webkit-transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n\\nbutton {\\n  padding:0;\\n  cursor: pointer;\\n  background-image: none;\\n  border: 0;\\n}\\n\\n#bugreport {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 11px;\\n  top: 0px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n#openhelp {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 14px;\\n  top: 36px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n\\n#container.blur {\\n  -webkit-filter: blur(2px);\\n  -moz-filter: blur(2px);\\n  filter: blur(2px);\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n\\n  overflow: hidden;\\n}\\n\\n#container > pre {\\n  display: none;\\n}\\n\\nh1, h2, h3 {\\n  font-weight: normal;\\n}\\n\\n.gpu {\\n  -webkit-transform: translateZ(0);\\n  -transform: translateZ(0);\\n}\\n\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format('woff');\\n}\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") format('woff');\\n  font-weight: bold;\\n}\\n@font-face {\\n  font-family: 'FontAwesomeSVG';\\n  src: url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \") format('svg'),\\n    url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \") format('embedded-opentype'),\\n    url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \") format('woff'),\\n    url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \") format('truetype');\\n  font-weight: normal;\\n  font-style: normal;\\n}\\n\\nhtml, body, button {\\n  background-color: var(--noflo-ui-background);\\n  color: var(--noflo-ui-text);\\n  font-family: \\\"SourceCodePro\\\",Helvetica,Arial,sans-serif;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.iframe-runtime {\\n  display: none;\\n  border: none;\\n  width: 288px;\\n  height: 288px;\\n  box-sizing: border-box;\\n  position: fixed;\\n  right: 0px;\\n  top: 72px;\\n  z-index: 2;\\n  background-color: var(--noflo-ui-background) !important;\\n  background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\\n  background-size: calc(100% - 1px);\\n  background-position: 0px;\\n  border-bottom: 1px var(--noflo-ui-border) solid;\\n}\\n\\n#container > .preview-container {\\n  display: none;\\n}\\n\\n#zoomrange {\\n  display: none;\\n}\\n\\nthe-graph-nav {\\n  right: 36px !important;\\n  bottom: 36px !important;\\n}\\n\\n\\n\\n\\n::-webkit-scrollbar {\\n  width: 2px;\\n}\\n::-webkit-scrollbar-thumb {\\n  -webkit-border-radius: 5px;\\n  border-radius: 1px;\\n  background: hsla(191, 100%, 92%, 0.3);\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.5);\\n}\\n\\n::-webkit-scrollbar-track {\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.3);\\n  -webkit-border-radius: 5px;\\n  border-radius: 5px;\\n  background-color: hsl(0, 0%, 0%);\\n}\\n\\nh1,\\nh2,\\nh3 {\\n  font-weight: normal;\\n}\\n\\ninput:focus,\\nselect:focus,\\ntextarea:focus,\\nbutton:focus,\\nh1,\\nh2,\\nh3,\\ndiv,\\na,\\np,\\ndiv {\\n  outline:none;\\n}\\n\\nth {\\n  text-align: left;\\n}\\n\\ndiv.error {\\n  color: hsla( 0, 98%, 46%, .8);\\n}\\n\\n.red-button {\\n  background-color: hsla(0, 100%, 20%, 0.2);\\n  color: hsl(0, 100%, 65%);\\n}\\n.blue-button {\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: hsl(190, 100%, 65%);\\n}\\n\\n#flowhub_debug_url {\\n  position: fixed;\\n  bottom: 0px;\\n  right: 0px;\\n  font-size: 18px;\\n  padding: 9px;\\n  z-index: 10;\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: var(--noflo-ui-text);\\n  border-left: 1px solid var(--noflo-ui-background);\\n  border-top: 1px solid var(--noflo-ui-background);\\n  cursor: pointer;\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./css/noflo-ui.css\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\"input::-webkit-input-speech-button {\\n  margin-right: 18px;\\n  cursor: pointer;\\n}\\n\\nhtml, body {\\n  width: 100%;\\n  height: 100%;\\n}\\n\\nbody {\\n  --noflo-ui-background: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-background-shadow: hsla(0, 0%, 0%, 0.5);\\n  --noflo-ui-text: hsl(192, 25%, 92%);\\n  --noflo-ui-text-highlight: hsl(185,100%,75%);\\n  --noflo-ui-border: hsla(190, 90%, 80%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 80%);\\n  --noflo-ui-base-unit: 72px;\\n}\\nbody.light {\\n  --noflo-ui-background: hsl(192, 25%, 92%);\\n  --noflo-ui-background-shadow: hsla(192, 25%, 100%, 0.3);\\n  --noflo-ui-text: hsla(0, 0%, 0%, 0.98);\\n  --noflo-ui-text-highlight: hsl(185,100%,15%);\\n  --noflo-ui-border: hsla(190, 90%, 8%, 0.3);\\n  --noflo-ui-border-highlight: hsl(190, 90%, 8%);\\n}\\n\\nbody {\\n  /* iOS don't clash with our hold behavior */\\n  -webkit-user-select: none;                /* disable cut copy paste */\\n  -webkit-touch-callout: none;              /* disable callout, image save panel */\\n  -webkit-tap-highlight-color: transparent; /* \\\"turn off\\\" link highlight */\\n}\\n\\nbody #loading {\\n  opacity: 0;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  z-index: -1;\\n  width: 400px;\\n  color: var(--noflo-ui-text-highlight);\\n  text-align: center;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  position: fixed;\\n}\\n\\nbody.loading #loading {\\n  display: block;\\n  opacity: 1;\\n  top: calc(50% - 18px);\\n  left: calc(50% - 200px);\\n  font-size: 36px;\\n  animation: pulsate 2s ease-in-out;\\n  animation-iteration-count: infinite;\\n  -webkit-animation: pulsate 2s ease-in-out;\\n  -webkit-animation-iteration-count: infinite;\\n  text-align: center;\\n  z-index: 10;\\n}\\nbody noflo-ui {\\n  opacity: 1;\\n  transition: opacity 0.3s ease-in;\\n  -webkit-transition: opacity 0.3s ease-in;\\n  -moz-transition: opacity 0.3s ease-in;\\n  -ms-transition: opacity 0.3s ease-in;\\n  -o-transition: opacity 0.3s ease-in;\\n  display: block;\\n  width: 100vw;\\n  height: 100vh;\\n}\\nbody.loading noflo-ui {\\n  opacity: 0;\\n}\\n@keyframes pulsate {\\n  0% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n@-webkit-keyframes pulsate {\\n  0% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0.1;\\n  }\\n  50% {\\n    -webkit-transform: scale(1.1, 1.1);\\n    opacity: 1;\\n  }\\n  100% {\\n    -webkit-transform: scale(1.0, 1.0);\\n    opacity: 0;\\n  }\\n}\\n\\nbutton {\\n  padding:0;\\n  cursor: pointer;\\n  background-image: none;\\n  border: 0;\\n}\\n\\n#bugreport {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 11px;\\n  top: 0px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n#openhelp {\\n  color: hsl(189, 50%, 80%);\\n  position: fixed;\\n  right: 14px;\\n  top: 36px;\\n  z-index: 10;\\n  line-height: 36px;\\n  font-size: 14px;\\n}\\n\\n#container.blur {\\n  -webkit-filter: blur(2px);\\n  -moz-filter: blur(2px);\\n  filter: blur(2px);\\n  width: 100%;\\n  height: 100%;\\n  position: absolute;\\n\\n  overflow: hidden;\\n}\\n\\n#container > pre {\\n  display: none;\\n}\\n\\nh1, h2, h3 {\\n  font-weight: normal;\\n}\\n\\n.gpu {\\n  -webkit-transform: translateZ(0);\\n  -transform: translateZ(0);\\n}\\n\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\\\"SourceCodePro-Regular.otf.woff\\\") format('woff');\\n}\\n@font-face {\\n  font-family: \\\"SourceCodePro\\\";\\n  src: url(\\\"SourceCodePro-Bold.otf.woff\\\") format('woff');\\n  font-weight: bold;\\n}\\n@font-face {\\n  font-family: 'FontAwesomeSVG';\\n  src: url('../node_modules/font-awesome/fonts/fontawesome-webfont.svg?v=4.0.3#fontawesomeregular') format('svg'),\\n    url('../node_modules/font-awesome/fonts/fontawesome-webfont.eot?#iefix&v=4.0.3') format('embedded-opentype'),\\n    url('../node_modules/font-awesome/fonts/fontawesome-webfont.woff?v=4.0.3') format('woff'),\\n    url('../node_modules/font-awesome/fonts/fontawesome-webfont.ttf?v=4.0.3') format('truetype');\\n  font-weight: normal;\\n  font-style: normal;\\n}\\n\\nhtml, body, button {\\n  background-color: var(--noflo-ui-background);\\n  color: var(--noflo-ui-text);\\n  font-family: \\\"SourceCodePro\\\",Helvetica,Arial,sans-serif;\\n  margin: 0;\\n  padding: 0;\\n}\\n\\n.iframe-runtime {\\n  display: none;\\n  border: none;\\n  width: 288px;\\n  height: 288px;\\n  box-sizing: border-box;\\n  position: fixed;\\n  right: 0px;\\n  top: 72px;\\n  z-index: 2;\\n  background-color: var(--noflo-ui-background) !important;\\n  background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\\n  background-size: calc(100% - 1px);\\n  background-position: 0px;\\n  border-bottom: 1px var(--noflo-ui-border) solid;\\n}\\n\\n#container > .preview-container {\\n  display: none;\\n}\\n\\n#zoomrange {\\n  display: none;\\n}\\n\\nthe-graph-nav {\\n  right: 36px !important;\\n  bottom: 36px !important;\\n}\\n\\n\\n\\n\\n::-webkit-scrollbar {\\n  width: 2px;\\n}\\n::-webkit-scrollbar-thumb {\\n  -webkit-border-radius: 5px;\\n  border-radius: 1px;\\n  background: hsla(191, 100%, 92%, 0.3);\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.5);\\n}\\n\\n::-webkit-scrollbar-track {\\n  -webkit-box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.3);\\n  -webkit-border-radius: 5px;\\n  border-radius: 5px;\\n  background-color: hsl(0, 0%, 0%);\\n}\\n\\nh1,\\nh2,\\nh3 {\\n  font-weight: normal;\\n}\\n\\ninput:focus,\\nselect:focus,\\ntextarea:focus,\\nbutton:focus,\\nh1,\\nh2,\\nh3,\\ndiv,\\na,\\np,\\ndiv {\\n  outline:none;\\n}\\n\\nth {\\n  text-align: left;\\n}\\n\\ndiv.error {\\n  color: hsla( 0, 98%, 46%, .8);\\n}\\n\\n.red-button {\\n  background-color: hsla(0, 100%, 20%, 0.2);\\n  color: hsl(0, 100%, 65%);\\n}\\n.blue-button {\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: hsl(190, 100%, 65%);\\n}\\n\\n#flowhub_debug_url {\\n  position: fixed;\\n  bottom: 0px;\\n  right: 0px;\\n  font-size: 18px;\\n  padding: 9px;\\n  z-index: 10;\\n  background-color: hsla(190, 100%, 20%, 0.2);\\n  color: var(--noflo-ui-text);\\n  border-left: 1px solid var(--noflo-ui-background);\\n  border-top: 1px solid var(--noflo-ui-background);\\n  cursor: pointer;\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","const fbpGraph = require('fbp-graph');\nconst { findByComponent } = require('./projects');\nconst { getName, namespace } = require('./collections');\n\nexports.graphRuntimeIdentifier = (graph, projectNamespace = null) => {\n  if (graph && graph.properties && graph.properties.runtimeName) {\n    // Runtime-supplied identifier, keep stable\n    return graph.properties.runtimeName;\n  }\n  const graphName = getName(graph);\n  if (projectNamespace) {\n    return namespace(graphName, projectNamespace);\n  }\n  return graphName;\n};\n\nconst portForLibrary = (port) => ({\n  name: port.id,\n  type: port.type,\n  description: port.type,\n  addressable: port.addressable,\n  schema: port.schema,\n});\n\n// Covert FBP Protocol component to the-graph library component\nexports.componentForLibrary = (component) => ({\n  name: component.name,\n  icon: component.icon || 'cog',\n  description: component.description || '',\n  subgraph: component.subgraph,\n  inports: component.inPorts.map(portForLibrary),\n  outports: component.outPorts.map(portForLibrary),\n});\n\nexports.getGraphType = (g) => {\n  const graph = g;\n  if (!(graph.properties.environment != null ? graph.properties.environment.type : undefined) && ((graph.properties.environment != null ? graph.properties.environment.runtime : undefined) === 'html')) {\n    // Legacy noflo-browser\n    graph.properties.environment.type = 'noflo-browser';\n  }\n  if (graph.properties.environment != null ? graph.properties.environment.type : undefined) {\n    return graph.properties.environment.type;\n  }\n  return null;\n};\n\nexports.getComponentType = (component) => {\n  const runtimeType = component.code.match(/@runtime ([a-z-]+)/);\n  if (runtimeType) {\n    return runtimeType[1];\n  }\n  return null;\n};\n\nexports.getSource = (client, name) => client\n  .protocol.component.getsource({\n    name,\n  })\n  .catch((e) => {\n    if (name.indexOf('/') !== -1) {\n      // Already namespaced, pass failure through\n      return Promise.reject(e);\n    }\n    if (!client.definition.namespace) {\n      // No namespace defined, pass failure through\n      return Promise.reject(e);\n    }\n    return client.protocol.component.getsource({\n      name: `${client.definition.namespace}/${name}`,\n    });\n  });\n\nexports.getRemoteNodes = (client, r) => {\n  const route = r;\n  return route.remote.reduce(((promise, node) => promise.then((graph) => {\n    if (!(graph.nodes != null ? graph.nodes.length : undefined)) {\n      return Promise.reject(new Error(`Node ${graph.name} doesn't contain child nodes`));\n    }\n    const [matchedNode] = graph.nodes.filter((n) => n.id === node);\n    if (!matchedNode) {\n      return Promise.reject(new Error(`Node ${node} not found in graph ${graph.name || graph.properties.id}`));\n    }\n\n    // Check if the node implementation is available in the local project\n    const [\n      componentType,\n      componentImplementation,\n    ] = findByComponent(matchedNode.component, route.project);\n    if (componentType === 'graph') {\n      route.graphs.push(componentImplementation);\n      return Promise.resolve(componentImplementation);\n    }\n    if (componentType === 'component') {\n      route.component = componentImplementation;\n      return Promise.resolve(componentImplementation);\n    }\n    // If not, then get from runtime\n    return exports.getSource(client, matchedNode.component)\n      .then((source) => {\n        if (!['json', 'fbp'].includes(source.language)) {\n          route.component = source;\n          return Promise.resolve(source);\n        }\n        return exports.loadGraph(source)\n          .then((instance) => {\n            route.graphs.push(instance);\n            return Promise.resolve(instance);\n          });\n      });\n  })\n  ), Promise.resolve(route.graphs[route.graphs.length - 1]))\n    .then(() => {\n      route.remote = [];\n      return route;\n    });\n};\n\nexports.loadGraph = (source) => {\n  let method;\n  switch (source.language) {\n    case 'json': method = 'loadJSON'; break;\n    case 'fbp': method = 'loadFBP'; break;\n    default:\n      return Promise.reject(new Error(`Unknown format ${source.language} for graph ${source.name}`));\n  }\n  method = source.language === 'json' ? 'loadJSON' : 'loadFBP';\n  return fbpGraph.graph[method](source.code)\n    .then((i) => {\n      const instance = i;\n      instance.name = source.name;\n      return instance;\n    });\n};\n\nexports.isDefaultRuntime = (runtime) => {\n  if ((runtime.protocol === 'iframe')\n    && (runtime.address === 'https://noflojs.org/noflo-browser/everything.html?fbp_noload=true&fbp_protocol=iframe')) {\n    return true;\n  }\n  return false;\n};\n\n// Scope iframe runtimes to project\nexports.ensureIframe = (c, project) => {\n  const client = c;\n  if (client.definition.protocol !== 'iframe') {\n    return Promise.resolve();\n  }\n  client.definition.querySelector = `iframe[data-runtime='${client.definition.id}']`;\n  let iframe = document.body.querySelector(client.definition.querySelector);\n  if (!iframe) {\n    // No iframe for this runtime/project combination yet, create\n    iframe = document.createElement('iframe');\n    iframe.setAttribute('sandbox', 'allow-scripts allow-same-origin allow-forms');\n    iframe.setAttribute('data-runtime', client.definition.id);\n    iframe.setAttribute('data-project', project.id);\n    iframe.className = 'iframe-runtime';\n    document.body.appendChild(iframe);\n  }\n  if (!client.transport.iframe) {\n    // Client has not been connected yet\n    client.transport.iframe = iframe;\n    return Promise.resolve();\n  }\n  if (client.transport.iframe === iframe) {\n    // We were already connected to this one\n    return Promise.resolve();\n  }\n  // We were connected to another iframe\n  // Disconnect and set new\n  return client.disconnect()\n    .then(() => {\n      client.transport.iframe = iframe;\n      return Promise.resolve();\n    });\n};\n","/**\n * Generated from lint.css, codemirror.css, mdn-like.css, codemirror-noflo.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"codemirror-styles\">\n  <template>\n    <style>\n      /* The lint marker gutter */\n.CodeMirror-lint-markers {\n  width: 16px;\n}\n\n.CodeMirror-lint-tooltip {\n  background-color: #ffd;\n  border: 1px solid black;\n  border-radius: 4px 4px 4px 4px;\n  color: black;\n  font-family: monospace;\n  font-size: 10pt;\n  overflow: hidden;\n  padding: 2px 5px;\n  position: fixed;\n  white-space: pre;\n  white-space: pre-wrap;\n  z-index: 100;\n  max-width: 600px;\n  opacity: 0;\n  transition: opacity .4s;\n  -moz-transition: opacity .4s;\n  -webkit-transition: opacity .4s;\n  -o-transition: opacity .4s;\n  -ms-transition: opacity .4s;\n}\n\n.CodeMirror-lint-mark {\n  background-position: left bottom;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-lint-mark-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJFhQXEbhTg7YAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAMklEQVQI12NkgIIvJ3QXMjAwdDN+OaEbysDA4MPAwNDNwMCwiOHLCd1zX07o6kBVGQEAKBANtobskNMAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-mark-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAADCAYAAAC09K7GAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAd0SU1FB9sJDw4cOCW1/KIAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAHElEQVQI12NggIL/DAz/GdA5/xkY/qPKMDAwAADLZwf5rvm+LQAAAABJRU5ErkJggg==\");\n}\n\n.CodeMirror-lint-marker {\n  background-position: center center;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  display: inline-block;\n  height: 16px;\n  width: 16px;\n  vertical-align: middle;\n  position: relative;\n}\n\n.CodeMirror-lint-message {\n  padding-left: 18px;\n  background-position: top left;\n  background-repeat: no-repeat;\n}\n\n.CodeMirror-lint-marker-warning, .CodeMirror-lint-message-warning {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAANlBMVEX/uwDvrwD/uwD/uwD/uwD/uwD/uwD/uwD/uwD6twD/uwAAAADurwD2tQD7uAD+ugAAAAD/uwDhmeTRAAAADHRSTlMJ8mN1EYcbmiixgACm7WbuAAAAVklEQVR42n3PUQqAIBBFUU1LLc3u/jdbOJoW1P08DA9Gba8+YWJ6gNJoNYIBzAA2chBth5kLmG9YUoG0NHAUwFXwO9LuBQL1giCQb8gC9Oro2vp5rncCIY8L8uEx5ZkAAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-error, .CodeMirror-lint-message-error {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAHlBMVEW7AAC7AACxAAC7AAC7AAAAAAC4AAC5AAD///+7AAAUdclpAAAABnRSTlMXnORSiwCK0ZKSAAAATUlEQVR42mWPOQ7AQAgDuQLx/z8csYRmPRIFIwRGnosRrpamvkKi0FTIiMASR3hhKW+hAN6/tIWhu9PDWiTGNEkTtIOucA5Oyr9ckPgAWm0GPBog6v4AAAAASUVORK5CYII=\");\n}\n\n.CodeMirror-lint-marker-multiple {\n  background-image: url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAMAAADzjKfhAAAACVBMVEUAAAAAAAC/v7914kyHAAAAAXRSTlMAQObYZgAAACNJREFUeNo1ioEJAAAIwmz/H90iFFSGJgFMe3gaLZ0od+9/AQZ0ADosbYraAAAAAElFTkSuQmCC\");\n  background-repeat: no-repeat;\n  background-position: right bottom;\n  width: 100%; height: 100%;\n}\n\n/* BASICS */\n\n.CodeMirror {\n  /* Set height, width, borders, and global font properties here */\n  font-family: monospace;\n  height: 300px;\n  color: black;\n  direction: ltr;\n}\n\n/* PADDING */\n\n.CodeMirror-lines {\n  padding: 4px 0; /* Vertical padding around content */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  padding: 0 4px; /* Horizontal padding of content */\n}\n\n.CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  background-color: white; /* The little square between H and V scrollbars */\n}\n\n/* GUTTER */\n\n.CodeMirror-gutters {\n  border-right: 1px solid #ddd;\n  background-color: #f7f7f7;\n  white-space: nowrap;\n}\n.CodeMirror-linenumbers {}\n.CodeMirror-linenumber {\n  padding: 0 3px 0 5px;\n  min-width: 20px;\n  text-align: right;\n  color: #999;\n  white-space: nowrap;\n}\n\n.CodeMirror-guttermarker { color: black; }\n.CodeMirror-guttermarker-subtle { color: #999; }\n\n/* CURSOR */\n\n.CodeMirror-cursor {\n  border-left: 1px solid black;\n  border-right: none;\n  width: 0;\n}\n/* Shown when moving in bi-directional text */\n.CodeMirror div.CodeMirror-secondarycursor {\n  border-left: 1px solid silver;\n}\n.cm-fat-cursor .CodeMirror-cursor {\n  width: auto;\n  border: 0 !important;\n  background: #7e7;\n}\n.cm-fat-cursor div.CodeMirror-cursors {\n  z-index: 1;\n}\n.cm-fat-cursor-mark {\n  background-color: rgba(20, 255, 20, 0.5);\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n}\n.cm-animate-fat-cursor {\n  width: auto;\n  border: 0;\n  -webkit-animation: blink 1.06s steps(1) infinite;\n  -moz-animation: blink 1.06s steps(1) infinite;\n  animation: blink 1.06s steps(1) infinite;\n  background-color: #7e7;\n}\n@-moz-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@-webkit-keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n@keyframes blink {\n  0% {}\n  50% { background-color: transparent; }\n  100% {}\n}\n\n/* Can style cursor different in overwrite (non-insert) mode */\n.CodeMirror-overwrite .CodeMirror-cursor {}\n\n.cm-tab { display: inline-block; text-decoration: inherit; }\n\n.CodeMirror-rulers {\n  position: absolute;\n  left: 0; right: 0; top: -50px; bottom: 0;\n  overflow: hidden;\n}\n.CodeMirror-ruler {\n  border-left: 1px solid #ccc;\n  top: 0; bottom: 0;\n  position: absolute;\n}\n\n/* DEFAULT THEME */\n\n.cm-s-default .cm-header {color: blue;}\n.cm-s-default .cm-quote {color: #090;}\n.cm-negative {color: #d44;}\n.cm-positive {color: #292;}\n.cm-header, .cm-strong {font-weight: bold;}\n.cm-em {font-style: italic;}\n.cm-link {text-decoration: underline;}\n.cm-strikethrough {text-decoration: line-through;}\n\n.cm-s-default .cm-keyword {color: #708;}\n.cm-s-default .cm-atom {color: #219;}\n.cm-s-default .cm-number {color: #164;}\n.cm-s-default .cm-def {color: #00f;}\n.cm-s-default .cm-variable,\n.cm-s-default .cm-punctuation,\n.cm-s-default .cm-property,\n.cm-s-default .cm-operator {}\n.cm-s-default .cm-variable-2 {color: #05a;}\n.cm-s-default .cm-variable-3, .cm-s-default .cm-type {color: #085;}\n.cm-s-default .cm-comment {color: #a50;}\n.cm-s-default .cm-string {color: #a11;}\n.cm-s-default .cm-string-2 {color: #f50;}\n.cm-s-default .cm-meta {color: #555;}\n.cm-s-default .cm-qualifier {color: #555;}\n.cm-s-default .cm-builtin {color: #30a;}\n.cm-s-default .cm-bracket {color: #997;}\n.cm-s-default .cm-tag {color: #170;}\n.cm-s-default .cm-attribute {color: #00c;}\n.cm-s-default .cm-hr {color: #999;}\n.cm-s-default .cm-link {color: #00c;}\n\n.cm-s-default .cm-error {color: #f00;}\n.cm-invalidchar {color: #f00;}\n\n.CodeMirror-composing { border-bottom: 2px solid; }\n\n/* Default styles for common addons */\n\ndiv.CodeMirror span.CodeMirror-matchingbracket {color: #0b0;}\ndiv.CodeMirror span.CodeMirror-nonmatchingbracket {color: #a22;}\n.CodeMirror-matchingtag { background: rgba(255, 150, 0, .3); }\n.CodeMirror-activeline-background {background: #e8f2ff;}\n\n/* STOP */\n\n/* The rest of this file contains styles related to the mechanics of\n   the editor. You probably shouldn't touch them. */\n\n.CodeMirror {\n  position: relative;\n  overflow: hidden;\n  background: white;\n}\n\n.CodeMirror-scroll {\n  overflow: scroll !important; /* Things will break if this is overridden */\n  /* 50px is the magic margin used to hide the element's real scrollbars */\n  /* See overflow: hidden in .CodeMirror */\n  margin-bottom: -50px; margin-right: -50px;\n  padding-bottom: 50px;\n  height: 100%;\n  outline: none; /* Prevent dragging from highlighting the element */\n  position: relative;\n}\n.CodeMirror-sizer {\n  position: relative;\n  border-right: 50px solid transparent;\n}\n\n/* The fake, visible scrollbars. Used to force redraw during scrolling\n   before actual scrolling happens, thus preventing shaking and\n   flickering artifacts. */\n.CodeMirror-vscrollbar, .CodeMirror-hscrollbar, .CodeMirror-scrollbar-filler, .CodeMirror-gutter-filler {\n  position: absolute;\n  z-index: 6;\n  display: none;\n  outline: none;\n}\n.CodeMirror-vscrollbar {\n  right: 0; top: 0;\n  overflow-x: hidden;\n  overflow-y: scroll;\n}\n.CodeMirror-hscrollbar {\n  bottom: 0; left: 0;\n  overflow-y: hidden;\n  overflow-x: scroll;\n}\n.CodeMirror-scrollbar-filler {\n  right: 0; bottom: 0;\n}\n.CodeMirror-gutter-filler {\n  left: 0; bottom: 0;\n}\n\n.CodeMirror-gutters {\n  position: absolute; left: 0; top: 0;\n  min-height: 100%;\n  z-index: 3;\n}\n.CodeMirror-gutter {\n  white-space: normal;\n  height: 100%;\n  display: inline-block;\n  vertical-align: top;\n  margin-bottom: -50px;\n}\n.CodeMirror-gutter-wrapper {\n  position: absolute;\n  z-index: 4;\n  background: none !important;\n  border: none !important;\n}\n.CodeMirror-gutter-background {\n  position: absolute;\n  top: 0; bottom: 0;\n  z-index: 4;\n}\n.CodeMirror-gutter-elt {\n  position: absolute;\n  cursor: default;\n  z-index: 4;\n}\n.CodeMirror-gutter-wrapper ::selection { background-color: transparent }\n.CodeMirror-gutter-wrapper ::-moz-selection { background-color: transparent }\n\n.CodeMirror-lines {\n  cursor: text;\n  min-height: 1px; /* prevents collapsing before first draw */\n}\n.CodeMirror pre.CodeMirror-line,\n.CodeMirror pre.CodeMirror-line-like {\n  /* Reset some styles that the rest of the page might have set */\n  -moz-border-radius: 0; -webkit-border-radius: 0; border-radius: 0;\n  border-width: 0;\n  background: transparent;\n  font-family: inherit;\n  font-size: inherit;\n  margin: 0;\n  white-space: pre;\n  word-wrap: normal;\n  line-height: inherit;\n  color: inherit;\n  z-index: 2;\n  position: relative;\n  overflow: visible;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-font-variant-ligatures: contextual;\n  font-variant-ligatures: contextual;\n}\n.CodeMirror-wrap pre.CodeMirror-line,\n.CodeMirror-wrap pre.CodeMirror-line-like {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  word-break: normal;\n}\n\n.CodeMirror-linebackground {\n  position: absolute;\n  left: 0; right: 0; top: 0; bottom: 0;\n  z-index: 0;\n}\n\n.CodeMirror-linewidget {\n  position: relative;\n  z-index: 2;\n  padding: 0.1px; /* Force widget margins to stay inside of the container */\n}\n\n.CodeMirror-widget {}\n\n.CodeMirror-rtl pre { direction: rtl; }\n\n.CodeMirror-code {\n  outline: none;\n}\n\n/* Force content-box sizing for the elements where we expect it */\n.CodeMirror-scroll,\n.CodeMirror-sizer,\n.CodeMirror-gutter,\n.CodeMirror-gutters,\n.CodeMirror-linenumber {\n  -moz-box-sizing: content-box;\n  box-sizing: content-box;\n}\n\n.CodeMirror-measure {\n  position: absolute;\n  width: 100%;\n  height: 0;\n  overflow: hidden;\n  visibility: hidden;\n}\n\n.CodeMirror-cursor {\n  position: absolute;\n  pointer-events: none;\n}\n.CodeMirror-measure pre { position: static; }\n\ndiv.CodeMirror-cursors {\n  visibility: hidden;\n  position: relative;\n  z-index: 3;\n}\ndiv.CodeMirror-dragcursors {\n  visibility: visible;\n}\n\n.CodeMirror-focused div.CodeMirror-cursors {\n  visibility: visible;\n}\n\n.CodeMirror-selected { background: #d9d9d9; }\n.CodeMirror-focused .CodeMirror-selected { background: #d7d4f0; }\n.CodeMirror-crosshair { cursor: crosshair; }\n.CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #d7d4f0; }\n.CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #d7d4f0; }\n\n.cm-searching {\n  background-color: #ffa;\n  background-color: rgba(255, 255, 0, .4);\n}\n\n/* Used to force a border model for a node */\n.cm-force-border { padding-right: .1px; }\n\n@media print {\n  /* Hide the cursor when printing */\n  .CodeMirror div.CodeMirror-cursors {\n    visibility: hidden;\n  }\n}\n\n/* See issue #2901 */\n.cm-tab-wrap-hack:after { content: ''; }\n\n/* Help users use markselection to safely style text background */\nspan.CodeMirror-selectedtext { background: none; }\n\n/*\n  MDN-LIKE Theme - Mozilla\n  Ported to CodeMirror by Peter Kroon <plakroon@gmail.com>\n  Report bugs/issues here: https://github.com/codemirror/CodeMirror/issues\n  GitHub: @peterkroon\n\n  The mdn-like theme is inspired on the displayed code examples at: https://developer.mozilla.org/en-US/docs/Web/CSS/animation\n\n*/\n.cm-s-mdn-like.CodeMirror { color: #999; background-color: #fff; }\n.cm-s-mdn-like div.CodeMirror-selected { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::selection, .cm-s-mdn-like .CodeMirror-line > span::selection, .cm-s-mdn-like .CodeMirror-line > span > span::selection { background: #cfc; }\n.cm-s-mdn-like .CodeMirror-line::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span::-moz-selection, .cm-s-mdn-like .CodeMirror-line > span > span::-moz-selection { background: #cfc; }\n\n.cm-s-mdn-like .CodeMirror-gutters { background: #f8f8f8; border-left: 6px solid rgba(0,83,159,0.65); color: #333; }\n.cm-s-mdn-like .CodeMirror-linenumber { color: #aaa; padding-left: 8px; }\n.cm-s-mdn-like .CodeMirror-cursor { border-left: 2px solid #222; }\n\n.cm-s-mdn-like .cm-keyword { color: #6262FF; }\n.cm-s-mdn-like .cm-atom { color: #F90; }\n.cm-s-mdn-like .cm-number { color:  #ca7841; }\n.cm-s-mdn-like .cm-def { color: #8DA6CE; }\n.cm-s-mdn-like span.cm-variable-2, .cm-s-mdn-like span.cm-tag { color: #690; }\n.cm-s-mdn-like span.cm-variable-3, .cm-s-mdn-like span.cm-def, .cm-s-mdn-like span.cm-type { color: #07a; }\n\n.cm-s-mdn-like .cm-variable { color: #07a; }\n.cm-s-mdn-like .cm-property { color: #905; }\n.cm-s-mdn-like .cm-qualifier { color: #690; }\n\n.cm-s-mdn-like .cm-operator { color: #cda869; }\n.cm-s-mdn-like .cm-comment { color:#777; font-weight:normal; }\n.cm-s-mdn-like .cm-string { color:#07a; font-style:italic; }\n.cm-s-mdn-like .cm-string-2 { color:#bd6b18; } /*?*/\n.cm-s-mdn-like .cm-meta { color: #000; } /*?*/\n.cm-s-mdn-like .cm-builtin { color: #9B7536; } /*?*/\n.cm-s-mdn-like .cm-tag { color: #997643; }\n.cm-s-mdn-like .cm-attribute { color: #d6bb6d; } /*?*/\n.cm-s-mdn-like .cm-header { color: #FF6400; }\n.cm-s-mdn-like .cm-hr { color: #AEAEAE; }\n.cm-s-mdn-like .cm-link { color:#ad9361; font-style:italic; text-decoration:none; }\n.cm-s-mdn-like .cm-error { border-bottom: 1px solid red; }\n\ndiv.cm-s-mdn-like .CodeMirror-activeline-background { background: #efefff; }\ndiv.cm-s-mdn-like span.CodeMirror-matchingbracket { outline:1px solid grey; color: inherit; }\n\n.cm-s-mdn-like.CodeMirror { background-image: url(data:image/png;base64,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); }\n\n/*\nCopyright (C) 2013-2017 Flowhub UG\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n */\n.cm-s-noflo.CodeMirror {\n  color: hsl(188,6%,50%);\n  background-color: rgb(0, 0, 0);\n  font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif !important;\n  font-size: 14px;\n  line-height: 17px;\n}\n\n.cm-s-noflo .CodeMirror-selected {\n  background: hsl(185,100%,26%) !important;\n}\n\n.cm-s-noflo .CodeMirror-gutters {\n  background-color: black;\n  border-right: 1px solid hsla(190, 90%, 80%, 0.1);\n}\n\n.cm-s-noflo .CodeMirror-linenumber {\n  color: hsl(188, 6%, 26%);\n}\n\n.cm-s-noflo .CodeMirror-cursor {\n  border-left: 1px solid hsl(185,98%,46%) !important;\n}\n\n.cm-s-noflo span.cm-keyword {\n  color: hsl(35,100%,75%);\n}\n\n.cm-s-noflo span.cm-atom {\n  color: hsl(35,98%,46%);\n}\n\n.cm-s-noflo span.cm-number {\n  color: hsl(160,100%,75%);\n}\n\n.cm-s-noflo span.cm-def {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-2 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-variable-3 {\n  color: hsl(210,100%,75%);\n}\n\n.cm-s-noflo span.cm-property {\n  color: #fff;\n}\n\n.cm-s-noflo span.cm-operator {\n}\n\n.cm-s-noflo span.cm-comment {\n  color: gray;\n}\n\n.cm-s-noflo span.cm-string {\n  color: hsl(135,100%,75%);\n}\n\n.cm-s-noflo span.cm-meta {\n  color: yellow;\n}\n\n.cm-s-noflo span.cm-qualifier {\n  color: #FFF700;\n}\n\n.cm-s-noflo span.cm-builtin {\n  color: #30a;\n}\n\n.cm-s-noflo span.cm-bracket {\n    color: #cc7;\n}\n\n.cm-s-noflo span.cm-tag {\n    color: #FFBD40;\n}\n\n.cm-s-noflo span.cm-attribute {\n    color: #FFF700;\n}\n\n.cm-s-noflo span.cm-error {\n    color: #f00;\n}\n\n.cm-s-noflo .CodeMirror-activeline-background {\n    background: #27282E !important;\n}\n\n.cm-s-noflo .CodeMirror-matchingbracket {\n    outline: 1px solid grey;\n    color: white !important;\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","const msgflo = require('./msgflo.yaml');\nconst sndflo = require('./sndflo.yaml');\nconst imgflo = require('./imgflo.yaml');\nconst noflo = require('./noflo.yaml');\nconst javafbp = require('./javafbp.yaml');\nconst microflo = require('./microflo.yaml');\n\nconst info = {\n  msgflo,\n  sndflo,\n  imgflo,\n  noflo,\n  javafbp,\n  microflo,\n};\n\ninfo['noflo-browser'] = info.noflo;\ninfo['noflo-gnome'] = info.noflo;\ninfo['noflo-nodejs'] = info.noflo;\n\nmodule.exports = info;\n","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"the-card-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        margin: 0px;\n        padding: 10px 10px 10px;\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        position: relative;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n      h1 {\n        font-size: 12px;\n        line-height: 36px;\n        margin: 0px;\n        margin-bottom: 0px;\n        text-shadow: 0 1px var(--noflo-ui-background);\n        text-align: left;\n      }\n      header {\n        height: 36px;\n      }\n      header h1 {\n        display: block;\n        position: absolute;\n        top: 10px;\n        left: 10px;\n        width: calc(72px * 3 - 1px);\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      header h1.clear {\n        cursor: pointer;\n      }\n      header h2 {\n        line-height: 36px;\n        width: 72px;\n        height: 36px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        margin: 0px;\n        text-align: right;\n        font-size: 10px;\n        color: var(--noflo-ui-border-highlight);\n        display: block;\n        cursor: default;\n      }\n      ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      ul li {\n        display: block;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.toolbar2right {\n        width: 180px;\n        display: block;\n        position: absolute;\n        right: 36px;\n        top: 10px;\n        text-align: right;\n      }\n      ul.toolbar li {\n        float: left;\n        display: block;\n        width: calc(100%/2);\n        height: 36px;\n        text-align: center;\n        margin: 0px;\n        margin-right: 0px;\n      }\n      ul.toolbar2right li {\n        float: right;\n        width: auto;\n      }\n      ul.toolbar li * {\n        line-height: 36px;\n      }\n      li button {\n        width:100%;\n        height:100%;\n      }\n      textarea {\n        width: 100%;\n        min-height: 100px;\n        max-height: calc(72px * 4);\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","const { journal } = require('fbp-graph');\n\nclass IDBJournalStore extends journal.JournalStore {\n  constructor(graph, db) {\n    super(graph);\n    this.db = db;\n    this.transactions = [];\n  }\n\n  genKey(revId) { return `${this.graph.properties.id}_${revId}`; }\n\n  putTransaction(revId, entries) {\n    super.putTransaction(revId, entries);\n\n    const trans = this.db.transaction(['journals'], 'readwrite');\n    const store = trans.objectStore('journals');\n\n    // We're using add for writing, which will correctly fail if revId alreadyn exists\n    // for the graph\n    store.add({\n      id: this.genKey(revId),\n      graph: this.graph.properties.id,\n      revId,\n      entries,\n    });\n\n    this.transactions[revId] = entries;\n    return super.putTransaction(revId, entries);\n  }\n\n  fetchTransaction(revId) {\n    return this.transactions[revId];\n  }\n\n  init(cb) {\n    const trans = this.db.transaction(['journals']);\n    const store = trans.objectStore('journals');\n    const idx = store.index('graph');\n    idx.openCursor().onsuccess = (event) => {\n      const cursor = event.target.result;\n      if (!cursor) { return cb(); }\n      this.transactions[cursor.value.revId] = cursor.value.entries;\n      if (cursor.value.revId > this.lastRevision) { this.lastRevision = cursor.value.revId; }\n      return (cursor.continue)();\n    };\n  }\n}\n\nexports.IDBJournalStore = IDBJournalStore;\n","export default __webpack_public_path__ + \"fonts/SourceCodePro-Regular.otf.woff\";","export default __webpack_public_path__ + \"fonts/SourceCodePro-Bold.otf.woff\";","const $_documentContainer = document.createElement('template');\n\n$_documentContainer.innerHTML = `<dom-module id=\"noflo-modal-styles\">\n  <template>\n    <style>\n      :host {\n        display: block;\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: var(--noflo-ui-background-shadow);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: auto;\n      }\n\n      .modal-container {\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        display: block;\n        position: absolute;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        top: 36px;\n        width: calc(72px * 9);\n        left: calc(50% - 72px * 4.5);\n        z-index: 5;\n        padding: 36px;\n        box-sizing: border-box;\n        border-radius: 3px;\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n      }\n      .modal-content {\n        max-height: calc(100vh - 252px);\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        overflow-x: hidden;\n        padding-bottom: 18px;\n        box-sizing: border-box;\n      }\n\n      h1 {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n      }\n      label {\n        display: block;\n        font-size: 13px;\n        margin-top: 17px;\n        color: var(--noflo-ui-text);\n        line-height: 17px;\n      }\n      label > span {\n        line-height: 17px;\n      }\n      input,\n      select,\n      textarea {\n        display: block;\n        font-size: 17px;\n        background-color: hsl(190, 100%, 30%);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        color: #fff;\n        border-radius: 3px;\n        padding: 3px;\n        border: none;\n        margin: 0px;\n        width: 100%;\n        box-sizing: border-box;\n      }\n      input::placeholder {\n        color: hsl(0, 0%, 80%);\n      }\n      select {\n        background-image: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pg0KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDE2LjAuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPg0KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjMwNnB4IiBoZWlnaHQ9IjMwNnB4IiB2aWV3Qm94PSIwIDAgMzA2IDMwNiIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgMzA2IDMwNjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPGc+DQoJPGcgaWQ9ImV4cGFuZC1tb3JlIj4NCgkJPHBvbHlnb24gcG9pbnRzPSIyNzAuMyw1OC42NSAxNTMsMTc1Ljk1IDM1LjcsNTguNjUgMCw5NC4zNSAxNTMsMjQ3LjM1IDMwNiw5NC4zNSAJCSIvPg0KCTwvZz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjxnPg0KPC9nPg0KPGc+DQo8L2c+DQo8Zz4NCjwvZz4NCjwvc3ZnPg0K);\n        background-repeat: no-repeat;\n        background-position: 98% 50%;\n        background-size: 8px;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        padding-right: 1em;\n      }\n      div.CodeMirror {\n        border: 1px solid var(--noflo-ui-text);\n        border-radius: 3px;\n      }\n\n      .toolbar {\n        display: block;\n        line-height: 36px;\n        margin-top: 18px;\n      }\n      .toolbar button {\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        cursor: pointer;\n      }\n      .toolbar button.disabled {\n        opacity: 0.1;\n      }\n      .toolbar a {\n        font-size: 13px;\n        color: hsl(190, 100%, 30%);\n        text-decoration: none;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n\n      html polymer-element{\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>`;\n\ndocument.head.appendChild($_documentContainer.content);\n","exports.findMainGraph = (project) => {\n  if (!project.graphs.length) { return null; }\n  if (project.main) {\n    // Ensure currently set main graph exists\n    const mainFound = project.graphs.find((graph) => graph.properties.id === project.main);\n    if (mainFound) {\n      return project.main;\n    }\n  }\n  // No 'main' graph sent, see if we can make a smart choice\n  const mainCapable = project.graphs.find((graph) => {\n    if (graph.name === 'main') { return true; }\n    if (graph.properties.main) { return true; }\n    return false;\n  });\n  if (mainCapable) {\n    return mainCapable.properties.id;\n  }\n  // No suitable graph found, use first\n  return project.graphs[0].properties.id;\n};\n\nexports.findGraph = (id, project) => {\n  if (!project.graphs) { return null; }\n  return project.graphs.find((graph) => {\n    if (graph.name === id) { return true; }\n    if (graph.properties.id === id) { return true; }\n    return false;\n  });\n};\n\nexports.findComponent = (name, project) => {\n  if (!project.components) { return null; }\n  return project.components.find((component) => {\n    if (component.name === name) { return true; }\n    return false;\n  });\n};\n\nexports.findByComponent = (componentName, project) => {\n  let [library, name] = componentName.split('/');\n\n  if (!name) {\n    name = library;\n    library = undefined;\n  }\n\n  const graph = exports.findGraph(name, project);\n  if (graph) { return ['graph', graph]; }\n\n  const component = exports.findComponent(name, project);\n  if (component) { return ['component', component]; }\n\n  // Get from runtime\n  return ['runtime', componentName];\n};\n\nexports.findProject = (id, projects) => {\n  if (!projects) { return null; }\n\n  return projects.find((project) => project.id === id);\n};\n\nexports.getProjectHash = (project, callback) => {\n  if (project.runtime) {\n    if (!project.main) {\n      callback(null, [\n        'runtime',\n        project.runtime,\n      ]);\n      return;\n    }\n    callback(null, [\n      'runtime',\n      project.runtime,\n      project.main,\n    ]);\n    return;\n  }\n  if (!project.graphs.length) {\n    if (project.components.length) {\n      // No graphs in this project, but there are components\n      callback(null, [\n        'project',\n        project.id,\n        'component',\n        project.components[0].name,\n      ]);\n      return;\n    }\n    setTimeout(() => {\n      // Wait for graphs to be populated\n      if (!project.graphs.length && !project.components.length) {\n        return callback(new Error(`Project ${project.id} has no graphs or components`));\n      }\n      return exports.getProjectHash(project, callback);\n    },\n    100);\n    return;\n  }\n  // Open main graph, or the first graph\n  const main = project.main || project.graphs[0].properties.id;\n  if (!main) {\n    callback(new Error(`Unable find a main graph for project ${project.id}`));\n    return;\n  }\n  callback(null, [\n    'project',\n    project.id,\n    main,\n  ]);\n};\n\nexports.isReadOnly = (context) => {\n  if (!context.project) {\n    // If there is no project we must be read-only\n    return true;\n  }\n  if (context.graph && context.project.graphs.indexOf(context.graph) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.component && context.project.components.indexOf(context.component) === -1) {\n    // Graph is outside the project, go read-only\n    return true;\n  }\n  if (context.graph\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('protocol:graph') === -1);\n  }\n  if (context.component\n    && context.runtime\n    && context.runtime.definition\n    && context.runtime.definition.capabilities) {\n    return (context.runtime.definition.capabilities.indexOf('component:setsource') === -1);\n  }\n  return false;\n};\n\nexports.guessLanguage = (code, defaultLanguage = 'javascript') => {\n  if (code.indexOf('topic: ') !== -1 && code.indexOf('cases:') !== -1) {\n    // Reasonable guess is that this is an fbp-spec file.\n    // Should probably try parsing YAML to be sure.\n    return 'yaml';\n  }\n  return defaultLanguage;\n};\n","exports.getComponentHash = (componentName, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      'component',\n      componentName,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    'component',\n    componentName,\n  ];\n};\n\nexports.getGraphHash = (graphId, project) => {\n  if (project.runtime) {\n    // Live mode\n    return [\n      'runtime',\n      project.runtime,\n      graphId,\n    ];\n  }\n  return [\n    'project',\n    project.id,\n    graphId,\n  ];\n};\n\nexports.hashToString = (hash) => `#${hash.map((part) => encodeURIComponent(part)).join('/')}`;\n","module.exports = {\"runtimetypes\":{\"msgflo\":{\"shortname\":\"MsgFlo Message Queuing\",\"icon\":\"cubes\",\"description\":\"Message queue orchestration\",\"helpurl\":\"https://msgflo.org/docs/usage/\"}},\"preferredlanguage\":\"python\",\"componenttemplates\":{\"python\":\"#!/usr/bin/env python\\nimport msgflo\\n\\nclass <%= name %>(msgflo.Participant):\\n  def __init__(self, role):\\n    d = {\\n      'component': '<%= namespace %>/<%= name %>',\\n      'label': '<%= description %>',\\n      'icon': '<%= icon %>',\\n      'inports': [\\n        { 'id': 'in', 'type': 'any' },\\n      ],\\n      'outports': [\\n        { 'id': 'out', 'type': 'any' },\\n      ],\\n    }\\n    msgflo.Participant.__init__(self, d, role)\\n\\n  def process(self, inport, msg):\\n    self.send('out', msg.data)\\n    self.ack(msg)\\n\\nif __name__ == '__main__':\\n  msgflo.main(<%= name %>)\\n\",\"coffeescript\":\"# To work in msgflo-nodejs source tree\\ntry\\n  msgflo = require 'msgflo-nodejs'\\ncatch e\\n  msgflo = require '..'\\n\\n<%= name %> = (client, role) ->\\n\\n  definition =\\n    component: '<%= namespace %>/<%= name %>'\\n    icon: '<%= icon %>'\\n    label: '<%= description %>'\\n    inports: [\\n      id: 'in'\\n      type: 'any'\\n    ]\\n    outports: [\\n      id: 'out'\\n      type: 'any'\\n    ]\\n  process = (inport, indata, callback) ->\\n    return callback 'out', null, indata\\n  return new msgflo.participant.Participant client, definition, process, role\\n\\nmodule.exports = <%= name %>\\n\",\"javascript\":\"try {\\n  var msgflo = require('msgflo-nodejs');\\n} catch (error) {\\n  var e = error;\\n  var msgflo = require('..');\\n}\\n\\nvar <%= name %> = function(client, role) {\\n  var definition = {\\n    component: '<%= namespace %>/<%= name %>',\\n    icon: '<%= icon %>',\\n    label: '<%= description %>',\\n    inports: [\\n      {\\n        id: 'in',\\n        type: 'any'\\n      }\\n    ],\\n    outports: [\\n      {\\n        id: 'out',\\n        type: 'any'\\n      }\\n    ]\\n  };\\n  var process = function(inport, indata, callback) {\\n    return callback('out', null, indata);\\n  };\\n  return new msgflo.participant.Participant(client, definition, process, role);\\n};\\n\\nmodule.exports = <%= name %>;\\n\",\"yaml\":\"# Declare MsgFlo participant on behalf of code which does not send discovery message by itself\\ncomponent: '<%= namespace %>/<%= name %>'\\nlabel: '<%= description %>'\\nicon: '<%= icon %>'\\ninports:\\n  open:\\n    queue: /bitraf/door/#ROLE/open\\n    type: object\\noutports: {}\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"sndflo\":{\"shortname\":\"SndFlo Sound Synthesis\",\"icon\":\"music\",\"description\":\"Create sound using SuperCollider\",\"helpurl\":\"https://github.com/jonnor/sndflo#readme\"}},\"componenttemplates\":{\"supercollider\":\"SynthDef(\\\"MyFilter\\\", {\\n    arg in=SndFloLibrary.silentIn, out=SndFloLibrary.silentOut, freq=4400;\\n    Out.ar(out, BLowPass.ar(In.ar(in), freq))\\n},\\n    metadata: (\\n        description: \\\"my filter\\\",\\n        specs: (\\n            freq: ControlSpec(20, 20000, \\\\exp, 0.1, 2200, \\\"Hz\\\")\\n        )\\n    )\\n)\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"imgflo\":{\"shortname\":\"ImgFlo Image Manipulation\",\"icon\":\"picture-o\",\"description\":\"Process images using GEGL\",\"helpurl\":\"https://github.com/jonnor/imgflo#readme\"}},\"componenttemplates\":{\"c\":\"/* This file is an image processing operation for GEGL */\\n\\n#ifdef GEGL_PROPERTIES\\n    // Dummy prop, for testing\\n    property_double (x, \\\"X\\\", 0.0)\\n        ui_range (0.0, 1024.0)\\n        ui_meta (\\\"unit\\\", \\\"pixel-coordinate\\\")\\n#else\\n\\n#define GEGL_OP_POINT_FILTER\\n#include \\\"gegl-op.h\\\"\\n\\n#ifndef IMGFLO_OP_NAME\\n#define IMGFLO_OP_NAME(orig) orig\\n#endif\\n\\nstatic void prepare(GeglOperation *operation)\\n{\\n    const Babl *format = babl_format(\\\"YA float\\\");\\n    gegl_operation_set_format(operation, \\\"input\\\", format);\\n    gegl_operation_set_format(operation, \\\"output\\\", format);\\n}\\n\\ngboolean\\nprocess(GeglOperation *op, void *in_buf, void *out_buf, glong samples,\\n        const GeglRectangle *roi, gint level)\\n{\\n    float *in = in_buf;\\n    float *out = out_buf;\\n    while (samples--) {\\n        *out++ = *in++;\\n        *out++ = *in++;\\n    }\\n    return TRUE;\\n}\\n\\nstatic void\\ngegl_op_class_init (GeglOpClass *klass)\\n{\\n  GeglOperationClass *operation_class = GEGL_OPERATION_CLASS(klass);\\n  GeglOperationPointFilterClass *point_filter_class = GEGL_OPERATION_POINT_FILTER_CLASS(klass);\\n  point_filter_class->process = process;\\n  operation_class->prepare = prepare;\\n  gegl_operation_class_set_keys (operation_class,\\n      \\\"name\\\",        IMGFLO_OP_NAME(\\\"myop2\\\"),\\n      \\\"title\\\",       \\\"imgflo: Dynamic Flowhub\\\",\\n      \\\"categories\\\" , \\\"dev\\\",\\n      \\\"description\\\", \\\"First GEGL op written in Flowhub 22\\\",\\n  NULL);\\n}\\n\\n#endif\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"noflo-browser\":{\"shortname\":\"NoFlo for Browser\",\"icon\":\"html5\",\"description\":\"Build client-side browser applications\",\"helpurl\":\"https://github.com/noflo/noflo-browser-app#readme\"},\"noflo-nodejs\":{\"shortname\":\"NoFlo for Node.js\",\"icon\":\"cloud\",\"description\":\"Build network applications\",\"helpurl\":\"https://github.com/noflo/noflo-nodejs#readme\"},\"noflo-gnome\":{\"shortname\":\"NoFlo for GNOME\",\"icon\":\"desktop\",\"description\":\"Build GNOME desktop applications\",\"helpurl\":\"https://github.com/noflo/noflo-gnome#readme\"}},\"preferredlanguage\":\"es2015\",\"componenttemplates\":{\"javascript\":\"var noflo = require('noflo');\\n\\nexports.getComponent = function() {\\n  var c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process(function (input, output) {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    var data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"coffeescript\":\"noflo = require 'noflo'\\n\\nexports.getComponent = ->\\n  c = new noflo.Component\\n  c.description = '<%= description %>'\\n  c.icon = '<%= icon %>'\\n  c.inPorts.add 'in',\\n    datatype: 'all'\\n    description: 'Packet to forward'\\n  c.outPorts.add 'out',\\n    datatype: 'all'\\n  c.process (input, output) ->\\n    # Check preconditions on input data\\n    return unless input.hasData 'in'\\n    # Read packets we need to process\\n    data = input.getData 'in'\\n    # Process data and send output\\n    output.send\\n      out: data\\n    # Deactivate\\n    output.done()\\n\",\"es2015\":\"const noflo = require('noflo');\\n\\nexports.getComponent = () => {\\n  const c = new noflo.Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward',\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all',\\n  });\\n  c.process((input, output) => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data,\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\",\"typescript\":\"import { Component } from 'noflo';\\n\\nexports.getComponent = (): Component => {\\n  const c = new Component();\\n  c.description = '<%= description %>';\\n  c.icon = '<%= icon %>';\\n  c.inPorts.add('in', {\\n    datatype: 'all',\\n    description: 'Packet to forward'\\n  });\\n  c.outPorts.add('out', {\\n    datatype: 'all'\\n  });\\n  c.process((input, output): void => {\\n    // Check preconditions on input data\\n    if (!input.hasData('in')) {\\n      return;\\n    }\\n    // Read packets we need to process\\n    const data = input.getData('in');\\n    // Process data and send output\\n    output.send({\\n      out: data\\n    });\\n    // Deactivate\\n    output.done();\\n  });\\n  return c;\\n};\\n\"},\"examples\":{\"clock\":{\"label\":\"Animated clock\",\"id\":\"86a28c01d66cd8bf672f4e0a3e1ba851\"},\"camtopalette\":{\"label\":\"Cam to palette\",\"id\":\"efd306b5846c236998a63c535ceebed1\",\"ssl\":true},\"canvas\":{\"label\":\"Canvas pattern\",\"id\":\"dc0414ecf989b4b130b119e948653350\"},\"counter\":{\"label\":\"Click counter\",\"id\":\"38471e33458d644e907f4637434f5bbf\"},\"draganddrop\":{\"label\":\"Drag-and-drop physics\",\"id\":\"026a7bc8f1b482f56ad336c9d72dd72f\"},\"delaunaymasks\":{\"label\":\"Delaunay masks\",\"id\":\"d6c1fa7b4b9d437564e954f338d970b9\",\"ssl\":true},\"reacttodo\":{\"label\":\"React TODO list\",\"id\":\"c111454c9fd2f74d37d1e8a4e739adfd\"},\"webaudio\":{\"label\":\"Web Audio\",\"id\":\"6724a6eb8a1aaf351866e7a43c3ecd43\"}}}","module.exports = {\"runtimetypes\":{\"javafbp\":{\"shortname\":\"JavaFBP\",\"icon\":\"android\",\"description\":\"Program Java and Android applications\",\"helpurl\":\"https://github.com/jonnor/javafbp-runtime#readme\"}},\"componenttemplates\":{\"java\":\"// TODO\\n\"},\"examples\":{}}","module.exports = {\"runtimetypes\":{\"microflo\":{\"shortname\":\"MicroFlo Microcontroller Programming\",\"icon\":\"lightbulb-o\",\"description\":\"Program microcontrollers like Arduino\",\"helpurl\":\"https://github.com/jonnor/microflo#readme\"}},\"componenttemplates\":{\"c++\":\"// TODO\\n\"},\"examples\":{}}","/**\n * Generated from the-graph-dark.css, the-graph-light.css\n */\nconst $_documentContainer = document.createElement('template');\n$_documentContainer.innerHTML = `\n<dom-module id=\"the-graph-styles\">\n  <template>\n    <style>\n      .the-graph-dark .the-graph-app {\n  background-color: #000;\n  position: relative;\n}\n.the-graph-dark svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-dark .arrow {\n  cursor: default;\n}\n.the-graph-dark .click {\n  cursor: pointer;\n}\n.the-graph-dark .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-dark .node-border {\n  fill: rgba(0,0,0,0.5);\n  stroke: #666;\n  stroke-width: 2px;\n}\n.the-graph-dark .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-dark .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-dark .eventcatcher {\n  fill: #fff;\n  fill-opacity: 0.1;\n}\n.the-graph-dark .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-dark .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .ex-inports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-outports .node-border {\n  fill: #1a1a1a;\n  stroke: none;\n}\n.the-graph-dark .ex-inports .node .node-rect,\n.the-graph-dark .ex-outports .node .node-rect,\n.the-graph-dark .ex-inports .node:hover .node-rect,\n.the-graph-dark .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-dark .selection .ex-inports .node .node-border,\n.the-graph-dark .selection .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .ex-inports .node .node-border,\n.the-graph-dark .small .ex-outports .node .node-border {\n  fill: #1a1a1a;\n}\n.the-graph-dark .node-bg {\n  opacity: 0;\n}\n.the-graph-dark .selection .node .node-rect {\n  fill: rgba(61,66,67,0.94);\n}\n.the-graph-dark .selection .node .node-border {\n  stroke: #232829;\n}\n.the-graph-dark .selection .node .port-arc {\n  fill: #232829;\n}\n.the-graph-dark .selection .node .node-icon {\n  fill: #232829;\n}\n.the-graph-dark .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-dark .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-dark .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-dark .selection .node.selected .node-icon {\n  fill: #5e6a6e;\n}\n.the-graph-dark .selection .ex-inports .node .node-icon {\n  fill: #512f01;\n}\n.the-graph-dark .selection .ex-outports .node .node-icon {\n  fill: #015115;\n}\n.the-graph-dark .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node .node-border {\n  fill: rgba(61,66,67,0.94);\n  stroke: none;\n}\n.the-graph-dark .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-dark .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-dark path {\n  fill: none;\n}\n.the-graph-dark .arrow-bg {\n  stroke: #000;\n  stroke-width: 2px;\n}\n.the-graph-dark .edge-bg {\n  stroke: #000;\n  stroke-width: 5px;\n}\n.the-graph-dark .edge-fg {\n  stroke: #fff;\n  stroke-width: 3px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .edge-touch {\n  stroke-width: 7px;\n  opacity: 0;\n}\n.the-graph-dark .edge:hover .edge-bg,\n.the-graph-dark .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-dark .edge.selected .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 4px;\n}\n.the-graph-dark .edge.selected .edge-bg {\n  stroke-width: 8px;\n  stroke: #e6e6e6;\n}\n.the-graph-dark .small .edge-bg {\n  stroke-width: 8px;\n}\n.the-graph-dark .small .edge-fg {\n  stroke-width: 6px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n.the-graph-dark .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 4px;\n  stroke: #e6e6e6;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n.the-graph-dark .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 6px;\n  stroke: #e6e6e6;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-dark text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #fff;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .text-bg-rect {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .node-label,\n.the-graph-dark .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-dark .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-dark .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-dark .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-dark .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-dark .iip-path {\n  stroke-width: 1px;\n  stroke: #fff;\n}\n.the-graph-dark .iip-info {\n  visibility: hidden;\n}\n.the-graph-dark .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-dark .big .iip-info {\n  visibility: visible;\n}\n.the-graph-dark .context-modal-bg {\n  fill: rgba(0,0,0,0.5);\n}\n.the-graph-dark .context-node-rect {\n  fill: #121417;\n  stroke: #bfbfbf;\n  stroke-width: 0.5px;\n}\n.the-graph-dark .context-node-icon {\n  font-size: 30px;\n  fill: #fff;\n}\n.the-graph-dark .context-icon {\n  font-size: 20px;\n  fill: #fff;\n}\n.the-graph-dark .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-dark .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-slice.click:hover .context-arc {\n  stroke: rgba(90,102,114,0.95);\n}\n.the-graph-dark .context-circle {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-dark .context-circle-x {\n  stroke: #bfbfbf;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-dark .context-port-bg {\n  fill: rgba(43,48,54,0.95);\n}\n.the-graph-dark .context-port-bg.highlight {\n  stroke: #bfbfbf;\n  stroke-width: 1px;\n}\n.the-graph-dark .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(43,48,54,0.95);\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-path {\n  stroke: #bfbfbf;\n}\n.the-graph-dark .context-port-label {\n  fill: #fff;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-dark .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-dark .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-dark .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-dark .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-dark .tooltip-bg {\n  fill: rgba(0,0,0,0.9);\n  opacity: 0.75;\n}\n.the-graph-dark .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-dark .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-dark .node-icon {\n  font-size: 45px;\n  fill: #5e6a6e;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-dark .small .node-icon {\n  fill: #2f3537;\n  font-size: 66px;\n}\n.the-graph-dark .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-dark .ex-inports .node-icon,\n.the-graph-dark .small .ex-inports .node-icon {\n  fill: #e88802;\n}\n.the-graph-dark .ex-outports .node-icon,\n.the-graph-dark .small .ex-outports .node-icon {\n  fill: #02e83c;\n}\n.the-graph-dark .port-circle-bg {\n  fill: #666;\n  opacity: 0;\n}\n.the-graph-dark .port-arc {\n  fill: #666;\n}\n.the-graph-dark .port-circle-small {\n  fill: none;\n}\n.the-graph-dark .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-dark .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-dark .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-dark .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-dark .big .port-label {\n  visibility: visible;\n}\n.the-graph-dark .big .ex-inports .port-label,\n.the-graph-dark .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-dark .group-box {\n  fill: rgba(191,191,191,0.15);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-dark .group-box:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-dark .group-box.color0 {\n  fill: rgba(191,191,191,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color1 {\n  fill: rgba(255,128,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color2 {\n  fill: rgba(255,202,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color3 {\n  fill: rgba(255,255,128,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color4 {\n  fill: rgba(128,255,159,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color5 {\n  fill: rgba(128,255,212,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color6 {\n  fill: rgba(128,244,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color7 {\n  fill: rgba(128,191,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color8 {\n  fill: rgba(223,128,255,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color9 {\n  fill: rgba(255,128,234,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color10 {\n  fill: rgba(255,128,181,0.15);\n  stroke: none;\n}\n.the-graph-dark .group-box.color0:hover {\n  fill: rgba(191,191,191,0.25);\n}\n.the-graph-dark .group-box.color1:hover {\n  fill: rgba(255,128,128,0.25);\n}\n.the-graph-dark .group-box.color2:hover {\n  fill: rgba(255,202,128,0.25);\n}\n.the-graph-dark .group-box.color3:hover {\n  fill: rgba(255,255,128,0.25);\n}\n.the-graph-dark .group-box.color4:hover {\n  fill: rgba(128,255,159,0.25);\n}\n.the-graph-dark .group-box.color5:hover {\n  fill: rgba(128,255,212,0.25);\n}\n.the-graph-dark .group-box.color6:hover {\n  fill: rgba(128,244,255,0.25);\n}\n.the-graph-dark .group-box.color7:hover {\n  fill: rgba(128,191,255,0.25);\n}\n.the-graph-dark .group-box.color8:hover {\n  fill: rgba(223,128,255,0.25);\n}\n.the-graph-dark .group-box.color9:hover {\n  fill: rgba(255,128,234,0.25);\n}\n.the-graph-dark .group-box.color10:hover {\n  fill: rgba(255,128,181,0.25);\n}\n.the-graph-dark .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.1);\n}\n.the-graph-dark .selection .group-box.color1 {\n  fill: rgba(255,128,128,0.1);\n}\n.the-graph-dark .selection .group-box.color2 {\n  fill: rgba(255,202,128,0.1);\n}\n.the-graph-dark .selection .group-box.color3 {\n  fill: rgba(255,255,128,0.1);\n}\n.the-graph-dark .selection .group-box.color4 {\n  fill: rgba(128,255,159,0.1);\n}\n.the-graph-dark .selection .group-box.color5 {\n  fill: rgba(128,255,212,0.1);\n}\n.the-graph-dark .selection .group-box.color6 {\n  fill: rgba(128,244,255,0.1);\n}\n.the-graph-dark .selection .group-box.color7 {\n  fill: rgba(128,191,255,0.1);\n}\n.the-graph-dark .selection .group-box.color8 {\n  fill: rgba(223,128,255,0.1);\n}\n.the-graph-dark .selection .group-box.color9 {\n  fill: rgba(255,128,234,0.1);\n}\n.the-graph-dark .selection .group-box.color10 {\n  fill: rgba(255,128,181,0.1);\n}\n.the-graph-dark .selection .group-box.selection {\n  fill: rgba(255,255,255,0.15);\n  stroke: #e6e6e6;\n  stroke-width: 1px;\n}\n.the-graph-dark .selection .group-box.selection:hover {\n  fill: rgba(255,255,255,0.25);\n}\n.the-graph-dark .group-label {\n  text-anchor: start;\n  fill: #fff;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-dark .group-description {\n  fill: #fff;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-dark .small .group-description {\n  visibility: hidden;\n}\n.the-graph-dark .stroke,\n.the-graph-dark .stroke.route0,\n.the-graph-dark .selection .selected .stroke,\n.the-graph-dark .selection .selected .stroke.route0 {\n  stroke: #fff;\n}\n.the-graph-dark .stroke.route1,\n.the-graph-dark .selection .selected .stroke.route1 {\n  stroke: #e80202;\n}\n.the-graph-dark .stroke.route2,\n.the-graph-dark .selection .selected .stroke.route2 {\n  stroke: #e88802;\n}\n.the-graph-dark .stroke.route3,\n.the-graph-dark .selection .selected .stroke.route3 {\n  stroke: #e8e802;\n}\n.the-graph-dark .stroke.route4,\n.the-graph-dark .selection .selected .stroke.route4 {\n  stroke: #02e83c;\n}\n.the-graph-dark .stroke.route5,\n.the-graph-dark .selection .selected .stroke.route5 {\n  stroke: #02e89c;\n}\n.the-graph-dark .stroke.route6,\n.the-graph-dark .selection .selected .stroke.route6 {\n  stroke: #02d5e8;\n}\n.the-graph-dark .stroke.route7,\n.the-graph-dark .selection .selected .stroke.route7 {\n  stroke: #0275e8;\n}\n.the-graph-dark .stroke.route8,\n.the-graph-dark .selection .selected .stroke.route8 {\n  stroke: #af02e8;\n}\n.the-graph-dark .stroke.route9,\n.the-graph-dark .selection .selected .stroke.route9 {\n  stroke: #e802c2;\n}\n.the-graph-dark .stroke.route10,\n.the-graph-dark .selection .selected .stroke.route10 {\n  stroke: #e80262;\n}\n.the-graph-dark .selection .stroke,\n.the-graph-dark .selection .stroke.route0 {\n  stroke: #757575;\n}\n.the-graph-dark .selection .stroke.route1 {\n  stroke: #510101;\n}\n.the-graph-dark .selection .stroke.route2 {\n  stroke: #512f01;\n}\n.the-graph-dark .selection .stroke.route3 {\n  stroke: #515101;\n}\n.the-graph-dark .selection .stroke.route4 {\n  stroke: #015115;\n}\n.the-graph-dark .selection .stroke.route5 {\n  stroke: #015136;\n}\n.the-graph-dark .selection .stroke.route6 {\n  stroke: #014a51;\n}\n.the-graph-dark .selection .stroke.route7 {\n  stroke: #012951;\n}\n.the-graph-dark .selection .stroke.route8 {\n  stroke: #3d0151;\n}\n.the-graph-dark .selection .stroke.route9 {\n  stroke: #510143;\n}\n.the-graph-dark .selection .stroke.route10 {\n  stroke: #510122;\n}\n.the-graph-dark .fill,\n.the-graph-dark .fill.route0,\n.the-graph-dark .selection .selected .fill,\n.the-graph-dark .selection .selected .fill.route0 {\n  fill: #fff;\n}\n.the-graph-dark .fill.route1,\n.the-graph-dark .selection .selected .fill.route1 {\n  fill: #e80202;\n}\n.the-graph-dark .fill.route2,\n.the-graph-dark .selection .selected .fill.route2 {\n  fill: #e88802;\n}\n.the-graph-dark .fill.route3,\n.the-graph-dark .selection .selected .fill.route3 {\n  fill: #e8e802;\n}\n.the-graph-dark .fill.route4,\n.the-graph-dark .selection .selected .fill.route4 {\n  fill: #02e83c;\n}\n.the-graph-dark .fill.route5,\n.the-graph-dark .selection .selected .fill.route5 {\n  fill: #02e89c;\n}\n.the-graph-dark .fill.route6,\n.the-graph-dark .selection .selected .fill.route6 {\n  fill: #02d5e8;\n}\n.the-graph-dark .fill.route7,\n.the-graph-dark .selection .selected .fill.route7 {\n  fill: #0275e8;\n}\n.the-graph-dark .fill.route8,\n.the-graph-dark .selection .selected .fill.route8 {\n  fill: #af02e8;\n}\n.the-graph-dark .fill.route9,\n.the-graph-dark .selection .selected .fill.route9 {\n  fill: #e802c2;\n}\n.the-graph-dark .fill.route10,\n.the-graph-dark .selection .selected .fill.route10 {\n  fill: #e80262;\n}\n.the-graph-dark .selection .fill,\n.the-graph-dark .selection .fill.route0 {\n  fill: #757575;\n}\n.the-graph-dark .selection .fill.route1 {\n  fill: #510101;\n}\n.the-graph-dark .selection .fill.route2 {\n  fill: #512f01;\n}\n.the-graph-dark .selection .fill.route3 {\n  fill: #515101;\n}\n.the-graph-dark .selection .fill.route4 {\n  fill: #015115;\n}\n.the-graph-dark .selection .fill.route5 {\n  fill: #015136;\n}\n.the-graph-dark .selection .fill.route6 {\n  fill: #014a51;\n}\n.the-graph-dark .selection .fill.route7 {\n  fill: #012951;\n}\n.the-graph-dark .selection .fill.route8 {\n  fill: #3d0151;\n}\n.the-graph-dark .selection .fill.route9 {\n  fill: #510143;\n}\n.the-graph-dark .selection .fill.route10 {\n  fill: #510122;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 4px;\n  }\n  10% {\n    stroke-width: 8px;\n  }\n  30% {\n    stroke-width: 4px;\n  }\n  40% {\n    stroke-width: 8px;\n  }\n  60% {\n    stroke-width: 4px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 6px;\n  }\n  10% {\n    stroke-width: 12px;\n  }\n  30% {\n    stroke-width: 6px;\n  }\n  40% {\n    stroke-width: 12px;\n  }\n  60% {\n    stroke-width: 6px;\n  }\n}\n\n.the-graph-light .the-graph-app {\n  background-color: #fff;\n  position: relative;\n}\n.the-graph-light svg {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n.the-graph-light .arrow {\n  cursor: default;\n}\n.the-graph-light .click {\n  cursor: pointer;\n}\n.the-graph-light .drag {\n  cursor: pointer;\n  cursor: -moz-grab;\n  cursor: -webkit-grab;\n  cursor: grab;\n}\n.the-graph-light .node-border {\n  fill: rgba(255,255,255,0.5);\n  stroke: #3b4245;\n  stroke-width: 2px;\n}\n.the-graph-light .node-rect {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n.the-graph-light .node.error .node-rect {\n  -webkit-animation: error 1s linear infinite alternate;\n  -moz-animation: error 1s linear infinite alternate;\n  -o-animation: error 1s linear infinite alternate;\n  animation: error 1s linear infinite alternate;\n  stroke: none;\n}\n.the-graph-light .eventcatcher {\n  fill: #000;\n  fill-opacity: 0.1;\n}\n.the-graph-light .node:hover .node-rect {\n  fill: rgba(230,238,240,0.97);\n}\n.the-graph-light .node:hover .node-border {\n  stroke: #808080;\n}\n.the-graph-light .node:hover .port-arc {\n  fill: #808080;\n}\n.the-graph-light .ex-inports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-outports .node-border {\n  fill: #e6e6e6;\n  stroke: none;\n}\n.the-graph-light .ex-inports .node .node-rect,\n.the-graph-light .ex-outports .node .node-rect,\n.the-graph-light .ex-inports .node:hover .node-rect,\n.the-graph-light .ex-outports .node:hover .node-rect {\n  fill: none;\n}\n.the-graph-light .selection .ex-inports .node .node-border,\n.the-graph-light .selection .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .small .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light .small .ex-inports .node .node-border,\n.the-graph-light .small .ex-outports .node .node-border {\n  fill: #e6e6e6;\n}\n.the-graph-light .node-bg {\n  opacity: 0;\n}\n.the-graph-light .selection .node .node-rect {\n  fill: rgba(245,248,249,0.94);\n}\n.the-graph-light .selection .node .node-border {\n  stroke: #d6dadc;\n}\n.the-graph-light .selection .node .port-arc {\n  fill: #d6dadc;\n}\n.the-graph-light .selection .node .node-icon {\n  fill: #bac2c4;\n}\n.the-graph-light .selection .node.selected .node-rect {\n  fill: rgba(230,238,240,0.94);\n}\n.the-graph-light .selection .node.selected .node-border {\n  stroke: #808080;\n}\n.the-graph-light .selection .node.selected .port-arc {\n  fill: #808080;\n}\n.the-graph-light .selection .node.selected .node-icon {\n  fill: #2f3537;\n}\n.the-graph-light .selection .ex-inports .node .node-icon {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .ex-outports .node .node-icon {\n  fill: #ccffdb;\n}\n.the-graph-light .small .selection .node .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node .node-border {\n  fill: rgba(245,248,249,0.94);\n  stroke: none;\n}\n.the-graph-light .small .selection .node.selected .node-rect {\n  fill: none;\n}\n.the-graph-light .small .selection .node.selected .node-border {\n  fill: rgba(230,238,240,0.94);\n  stroke: none;\n}\n.the-graph-light path {\n  fill: none;\n}\n.the-graph-light .arrow-bg {\n  stroke: #e6e6e6;\n  stroke-width: 2.5px;\n}\n.the-graph-light .edge-bg {\n  stroke: #e6e6e6;\n  stroke-width: 6px;\n}\n.the-graph-light .edge-fg {\n  stroke: #bfbfbf;\n  stroke-width: 4px;\n  transition-property: stroke-width;\n  transition-duration: 0.5s;\n}\n.the-graph-light .edge-touch {\n  stroke-width: 8px;\n  opacity: 0;\n}\n.the-graph-light .edge:hover .edge-bg,\n.the-graph-light .edge:hover .arrow-bg {\n  stroke: #808080;\n}\n.the-graph-light .edge.selected .arrow-bg {\n  stroke: #808080;\n  stroke-width: 5px;\n}\n.the-graph-light .edge.selected .edge-bg {\n  stroke-width: 10px;\n  stroke: #808080;\n}\n.the-graph-light .small .edge-bg {\n  stroke-width: 10px;\n}\n.the-graph-light .small .edge-fg {\n  stroke-width: 8px;\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n.the-graph-light .edge.animated .arrow-bg {\n  stroke-linecap: round;\n  stroke-width: 5px;\n  stroke: #808080;\n  -webkit-animation: arrow-heartbeats 4s linear infinite;\n  -moz-animation: arrow-heartbeats 4s linear infinite;\n  -o-animation: arrow-heartbeats 4s linear infinite;\n  animation: arrow-heartbeats 4s linear infinite;\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n.the-graph-light .edge.animated .edge-bg {\n  stroke-linecap: round;\n  stroke-width: 8px;\n  stroke: #808080;\n  -webkit-animation: heartbeats 4s linear infinite;\n  -moz-animation: heartbeats 4s linear infinite;\n  -o-animation: heartbeats 4s linear infinite;\n  animation: heartbeats 4s linear infinite;\n}\n.the-graph-light text {\n  font-family: \"SourceCodePro\", \"Source Code Pro\", Helvetica, Arial, sans-serif;\n  text-rendering: geometricPrecision; /* makes text scale smoothly */\n  font-size: 14px;\n  fill: #000;\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .text-bg-rect {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .node-label,\n.the-graph-light .node-sublabel {\n  text-anchor: middle;\n}\n.the-graph-light .small .node-label-bg {\n  visibility: hidden;\n}\n.the-graph-light .node-sublabel {\n  font-size: 9px;\n}\n.the-graph-light .node-sublabel-bg {\n  visibility: hidden;\n}\n.the-graph-light .big .node-sublabel-bg {\n  visibility: visible;\n}\n.the-graph-light .iip-path {\n  stroke-width: 1px;\n  stroke: #bfbfbf;\n}\n.the-graph-light .iip-info {\n  visibility: hidden;\n}\n.the-graph-light .iip-info .text-bg-text {\n  font-size: 5px;\n  text-anchor: end;\n}\n.the-graph-light .big .iip-info {\n  visibility: visible;\n}\n.the-graph-light .context-modal-bg {\n  fill: rgba(255,255,255,0.5);\n}\n.the-graph-light .context-node-rect {\n  fill: #e0e3e6;\n  stroke: #404040;\n  stroke-width: 0.5px;\n}\n.the-graph-light .context-node-icon {\n  font-size: 30px;\n  fill: #000;\n}\n.the-graph-light .context-icon {\n  font-size: 20px;\n  fill: #000;\n}\n.the-graph-light .context-node-label {\n  text-anchor: middle;\n}\n.the-graph-light .context-arc {\n  stroke-width: 72px;\n  stroke: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-slice.click:hover .context-arc {\n  stroke: rgba(195,201,208,0.95);\n}\n.the-graph-light .context-circle {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1.5px;\n}\n.the-graph-light .context-circle-x {\n  stroke: #404040;\n  fill: none;\n  stroke-width: 1px;\n}\n.the-graph-light .context-arc-icon-label {\n  font-size: 12px;\n}\n.the-graph-light .context-port-bg {\n  fill: rgba(224,227,230,0.95);\n}\n.the-graph-light .context-port-bg.highlight {\n  stroke: #404040;\n  stroke-width: 1px;\n}\n.the-graph-light .context-port-hole {\n  stroke-width: 2px;\n  fill: rgba(224,227,230,0.95);\n  stroke: #404040;\n}\n.the-graph-light .context-port-path {\n  stroke: #404040;\n}\n.the-graph-light .context-port-label {\n  fill: #000;\n  dominant-baseline: central;\n}\n.the-graph-light .context-port-in .context-port-label {\n  text-anchor: end;\n}\n.the-graph-light .context-port-out .context-port-label {\n  text-anchor: start;\n}\n.the-graph-light .context-edge-label-out {\n  text-anchor: end;\n  dominant-baseline: central;\n}\n.the-graph-light .context-edge-label-in {\n  text-anchor: start;\n  dominant-baseline: central;\n}\n.the-graph-light .tooltip {\n  opacity: 1;\n  transition-property: opacity;\n  transition-duration: 0.3s;\n}\n.the-graph-light .tooltip.hidden {\n  opacity: 0;\n}\n.the-graph-light .tooltip-bg {\n  fill: rgba(255,255,255,0.9);\n  opacity: 0.75;\n}\n.the-graph-light .tooltip-label {\n  text-anchor: start;\n  font-size: 10px;\n}\n.the-graph-light .icon {\n  font-family: 'FontAwesomeSVG';\n  text-anchor: middle;\n  dominant-baseline: central;\n}\n.the-graph-light .node-icon {\n  font-size: 45px;\n  fill: #3b4245;\n  transition-property: font-size, fill;\n  transition-duration: 0.5s, 0.3s;\n}\n.the-graph-light .small .node-icon {\n  fill: #171b1c;\n  font-size: 66px;\n}\n.the-graph-light .big .node-icon {\n  fill: #c8ced0;\n}\n.the-graph-light .ex-inports .node-icon,\n.the-graph-light .small .ex-inports .node-icon {\n  fill: #cc6300;\n}\n.the-graph-light .ex-outports .node-icon,\n.the-graph-light .small .ex-outports .node-icon {\n  fill: #00cc3d;\n}\n.the-graph-light .port-circle-bg {\n  fill: #3b4245;\n  opacity: 0;\n}\n.the-graph-light .port-arc {\n  fill: #3b4245;\n}\n.the-graph-light .port-circle-small {\n  fill: none;\n}\n.the-graph-light .small .port-circle {\n  visibility: hidden;\n}\n.the-graph-light .port-label {\n  fill: #0c0d0e;\n  visibility: hidden;\n  font-size: 6px;\n  dominant-baseline: central;\n}\n.the-graph-light .inports .port-label {\n  text-anchor: start;\n}\n.the-graph-light .outports .port-label {\n  text-anchor: end;\n}\n.the-graph-light .big .port-label {\n  visibility: visible;\n}\n.the-graph-light .big .ex-inports .port-label,\n.the-graph-light .big .ex-outports .port-label {\n  visibility: hidden;\n}\n.the-graph-light .group-box {\n  fill: rgba(191,191,191,0.05);\n  transition-property: fill;\n  transition-duration: 0.3s;\n}\n.the-graph-light .group-box:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .small .group-box {\n  stroke-width: 8px;\n}\n.the-graph-light .group-box.color0 {\n  fill: rgba(191,191,191,0.05);\n  stroke: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1 {\n  fill: rgba(204,0,0,0.05);\n  stroke: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2 {\n  fill: rgba(204,99,0,0.05);\n  stroke: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3 {\n  fill: rgba(255,200,0,0.05);\n  stroke: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4 {\n  fill: rgba(0,204,61,0.05);\n  stroke: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5 {\n  fill: rgba(171,242,218,0.05);\n  stroke: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6 {\n  fill: rgba(0,201,204,0.05);\n  stroke: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7 {\n  fill: rgba(0,82,204,0.05);\n  stroke: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8 {\n  fill: rgba(68,0,204,0.05);\n  stroke: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9 {\n  fill: rgba(255,168,186,0.05);\n  stroke: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10 {\n  fill: rgba(204,0,109,0.05);\n  stroke: rgba(204,0,109,0.15);\n}\n.the-graph-light .group-box.color0:hover {\n  fill: rgba(191,191,191,0.15);\n}\n.the-graph-light .group-box.color1:hover {\n  fill: rgba(204,0,0,0.15);\n}\n.the-graph-light .group-box.color2:hover {\n  fill: rgba(204,99,0,0.15);\n}\n.the-graph-light .group-box.color3:hover {\n  fill: rgba(255,200,0,0.15);\n}\n.the-graph-light .group-box.color4:hover {\n  fill: rgba(0,204,61,0.15);\n}\n.the-graph-light .group-box.color5:hover {\n  fill: rgba(171,242,218,0.15);\n}\n.the-graph-light .group-box.color6:hover {\n  fill: rgba(0,201,204,0.15);\n}\n.the-graph-light .group-box.color7:hover {\n  fill: rgba(0,82,204,0.15);\n}\n.the-graph-light .group-box.color8:hover {\n  fill: rgba(68,0,204,0.15);\n}\n.the-graph-light .group-box.color9:hover {\n  fill: rgba(255,168,186,0.15);\n}\n.the-graph-light .group-box.color10:hover {\n  fill: rgba(204,0,109,0.15);\n}\n.the-graph-light .selection .group-box.color0 {\n  fill: rgba(191,191,191,0.01);\n}\n.the-graph-light .selection .group-box.color1 {\n  fill: rgba(204,0,0,0.01);\n}\n.the-graph-light .selection .group-box.color2 {\n  fill: rgba(204,99,0,0.01);\n}\n.the-graph-light .selection .group-box.color3 {\n  fill: rgba(255,200,0,0.01);\n}\n.the-graph-light .selection .group-box.color4 {\n  fill: rgba(0,204,61,0.01);\n}\n.the-graph-light .selection .group-box.color5 {\n  fill: rgba(171,242,218,0.01);\n}\n.the-graph-light .selection .group-box.color6 {\n  fill: rgba(0,201,204,0.01);\n}\n.the-graph-light .selection .group-box.color7 {\n  fill: rgba(0,82,204,0.01);\n}\n.the-graph-light .selection .group-box.color8 {\n  fill: rgba(68,0,204,0.01);\n}\n.the-graph-light .selection .group-box.color9 {\n  fill: rgba(255,168,186,0.01);\n}\n.the-graph-light .selection .group-box.color10 {\n  fill: rgba(204,0,109,0.01);\n}\n.the-graph-light .selection .group-box.selection {\n  fill: rgba(128,128,128,0.15);\n  stroke: #808080;\n  stroke-width: 1px;\n}\n.the-graph-light .selection .group-box.selection:hover {\n  fill: rgba(102,102,102,0.25);\n}\n.the-graph-light .group-label {\n  text-anchor: start;\n  fill: #000;\n  font-size: 20px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .small .group-label {\n  font-size: 30px;\n  transition-property: font-size;\n  transition-duration: 0.5s;\n}\n.the-graph-light .group-description {\n  fill: #000;\n  font-size: 12px;\n  text-anchor: start;\n}\n.the-graph-light .small .group-description {\n  visibility: hidden;\n}\n.the-graph-light .stroke,\n.the-graph-light .stroke.route0,\n.the-graph-light .selection .selected .stroke,\n.the-graph-light .selection .selected .stroke.route0 {\n  stroke: #bfbfbf;\n}\n.the-graph-light .stroke.route1,\n.the-graph-light .selection .selected .stroke.route1 {\n  stroke: #c00;\n}\n.the-graph-light .stroke.route2,\n.the-graph-light .selection .selected .stroke.route2 {\n  stroke: #cc6300;\n}\n.the-graph-light .stroke.route3,\n.the-graph-light .selection .selected .stroke.route3 {\n  stroke: #ffc800;\n}\n.the-graph-light .stroke.route4,\n.the-graph-light .selection .selected .stroke.route4 {\n  stroke: #00cc3d;\n}\n.the-graph-light .stroke.route5,\n.the-graph-light .selection .selected .stroke.route5 {\n  stroke: #abf2da;\n}\n.the-graph-light .stroke.route6,\n.the-graph-light .selection .selected .stroke.route6 {\n  stroke: #00c9cc;\n}\n.the-graph-light .stroke.route7,\n.the-graph-light .selection .selected .stroke.route7 {\n  stroke: #0052cc;\n}\n.the-graph-light .stroke.route8,\n.the-graph-light .selection .selected .stroke.route8 {\n  stroke: #40c;\n}\n.the-graph-light .stroke.route9,\n.the-graph-light .selection .selected .stroke.route9 {\n  stroke: #ffa8ba;\n}\n.the-graph-light .stroke.route10,\n.the-graph-light .selection .selected .stroke.route10 {\n  stroke: #cc006d;\n}\n.the-graph-light .selection .stroke,\n.the-graph-light .selection .stroke.route0 {\n  stroke: #e6e6e6;\n}\n.the-graph-light .selection .stroke.route1 {\n  stroke: #fcc;\n}\n.the-graph-light .selection .stroke.route2 {\n  stroke: #ffe5cc;\n}\n.the-graph-light .selection .stroke.route3 {\n  stroke: #fff4cc;\n}\n.the-graph-light .selection .stroke.route4 {\n  stroke: #ccffdb;\n}\n.the-graph-light .selection .stroke.route5 {\n  stroke: #d3f8ec;\n}\n.the-graph-light .selection .stroke.route6 {\n  stroke: #ccfeff;\n}\n.the-graph-light .selection .stroke.route7 {\n  stroke: #cce0ff;\n}\n.the-graph-light .selection .stroke.route8 {\n  stroke: #dcf;\n}\n.the-graph-light .selection .stroke.route9 {\n  stroke: #ffccd6;\n}\n.the-graph-light .selection .stroke.route10 {\n  stroke: #ffcce7;\n}\n.the-graph-light .fill,\n.the-graph-light .fill.route0,\n.the-graph-light .selection .selected .fill,\n.the-graph-light .selection .selected .fill.route0 {\n  fill: #bfbfbf;\n}\n.the-graph-light .fill.route1,\n.the-graph-light .selection .selected .fill.route1 {\n  fill: #c00;\n}\n.the-graph-light .fill.route2,\n.the-graph-light .selection .selected .fill.route2 {\n  fill: #cc6300;\n}\n.the-graph-light .fill.route3,\n.the-graph-light .selection .selected .fill.route3 {\n  fill: #ffc800;\n}\n.the-graph-light .fill.route4,\n.the-graph-light .selection .selected .fill.route4 {\n  fill: #00cc3d;\n}\n.the-graph-light .fill.route5,\n.the-graph-light .selection .selected .fill.route5 {\n  fill: #abf2da;\n}\n.the-graph-light .fill.route6,\n.the-graph-light .selection .selected .fill.route6 {\n  fill: #00c9cc;\n}\n.the-graph-light .fill.route7,\n.the-graph-light .selection .selected .fill.route7 {\n  fill: #0052cc;\n}\n.the-graph-light .fill.route8,\n.the-graph-light .selection .selected .fill.route8 {\n  fill: #40c;\n}\n.the-graph-light .fill.route9,\n.the-graph-light .selection .selected .fill.route9 {\n  fill: #ffa8ba;\n}\n.the-graph-light .fill.route10,\n.the-graph-light .selection .selected .fill.route10 {\n  fill: #cc006d;\n}\n.the-graph-light .selection .fill,\n.the-graph-light .selection .fill.route0 {\n  fill: #e6e6e6;\n}\n.the-graph-light .selection .fill.route1 {\n  fill: #fcc;\n}\n.the-graph-light .selection .fill.route2 {\n  fill: #ffe5cc;\n}\n.the-graph-light .selection .fill.route3 {\n  fill: #fff4cc;\n}\n.the-graph-light .selection .fill.route4 {\n  fill: #ccffdb;\n}\n.the-graph-light .selection .fill.route5 {\n  fill: #d3f8ec;\n}\n.the-graph-light .selection .fill.route6 {\n  fill: #ccfeff;\n}\n.the-graph-light .selection .fill.route7 {\n  fill: #cce0ff;\n}\n.the-graph-light .selection .fill.route8 {\n  fill: #dcf;\n}\n.the-graph-light .selection .fill.route9 {\n  fill: #ffccd6;\n}\n.the-graph-light .selection .fill.route10 {\n  fill: #ffcce7;\n}\n@-moz-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-webkit-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-o-keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@keyframes error {\n  0% {\n    fill: rgba(230,238,240,0.94);\n  }\n  100% {\n    fill: rgba(255,0,0,0.94);\n  }\n}\n@-moz-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-webkit-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-o-keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@keyframes arrow-heartbeats {\n  0% {\n    stroke-width: 5px;\n  }\n  10% {\n    stroke-width: 10px;\n  }\n  30% {\n    stroke-width: 5px;\n  }\n  40% {\n    stroke-width: 10px;\n  }\n  60% {\n    stroke-width: 5px;\n  }\n}\n@-moz-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-webkit-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@-o-keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n@keyframes heartbeats {\n  0% {\n    stroke-width: 8px;\n  }\n  10% {\n    stroke-width: 16px;\n  }\n  30% {\n    stroke-width: 8px;\n  }\n  40% {\n    stroke-width: 16px;\n  }\n  60% {\n    stroke-width: 8px;\n  }\n}\n\n    </style>\n  </template>\n</dom-module>`;\ndocument.head.appendChild($_documentContainer.content);\n","import { PolymerElement } from '@polymer/polymer';\n\nclass NofloPolymer extends PolymerElement {\n  static get properties() {\n    return {\n      element: {\n        type: String,\n      },\n      inports: {\n        type: String,\n      },\n      outports: {\n        type: String,\n      },\n    };\n  }\n}\n\ncustomElements.define('noflo-polymer', NofloPolymer);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #cta {\n        display: inline;\n        width: auto;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Account settings for <span>{{user.flowhub-user.name}}</span></h1>\n      <form>\n        <label>\n          Theme\n          <select name=\"type\" value=\"{{theme::input}}\">\n            <option value=\"dark\" selected\\$=\"[[_isSelectedTheme('dark', theme)]]\">Lazer</option>\n            <option value=\"light\" selected\\$=\"[[_isSelectedTheme('light', theme)]]\">Tube</option>\n          </select>\n        </label>\n        <label>\n          Debug [[env.NOFLO_APP_TITLE]] in Flowhub (requires reload)\n          <select name=\"type\" value=\"{{debug::input}}\">\n            <option value=\"false\" selected\\$=\"[[_isSelectedDebug('false', debug)]]\">Disabled</option>\n            <option value=\"true\" selected\\$=\"[[_isSelectedDebug('true', debug)]]\">Enabled</option>\n          </select>\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">Save</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-account-settings',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    debug: {\n      type: String,\n      value: 'false',\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    this.fire('updated', {\n      'flowhub-theme': this.theme,\n      'flowhub-debug': this.debug,\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  userChanged() {\n    this.theme = this.user['flowhub-theme'] || 'dark';\n    this.debug = this.user['flowhub-debug'] || 'false';\n  },\n\n  _isSelectedTheme(theme, current) {\n    return theme === current;\n  },\n\n  _isSelectedDebug(value, current) {\n    return value === current;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-account-settings';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        display: block;\n        padding-top: 18px;\n        width: 100%;\n      }\n      nav {\n        display: flex;\n        flex-direction: row;\n        align-items: center;\n        justify-content: space-between;\n        padding-left: 72px;\n        padding-right: 72px;\n        padding-bottom: 18px;\n      }\n      section.app {\n        display: flex;\n        flex-direction: row;\n      }\n      section.app .logo {\n        margin-right: 18px;\n        width: 72px;\n        height: 72px;\n      }\n      section.app .logo img {\n        width: 72px;\n        height: 72px;\n        display: inline-block;\n      }\n      section.app h1 {\n        font-size: 18px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.app h2 {\n        font-size: 9px;\n        line-height: 36px;\n        margin: 0;\n        padding: 0;\n      }\n      section.user {\n        text-align: right;\n      }\n      section.user .avatar {\n        display: inline;\n        line-height: 18px;\n      }\n      section.user .avatar img {\n        width: 18px;\n        height: 18px;\n        display: inline-block;\n      }\n      section.user h1 {\n        display: inline;\n        line-height: 36px;\n      }\n      section.user .toolbar {\n        line-height: 36px;\n        font-size: 9px;\n      }\n      section.user .toolbar a,\n      section.user .toolbar button {\n        padding: 3px;\n        text-shadow: none;\n        text-decoration: none;\n        box-shadow: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 9px;\n        margin-left: 9px;\n        cursor: pointer;\n        border: none;\n        background-color: transparent;\n        color: var(--noflo-ui-text);\n      }\n      section.user .toolbar a.login::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsla(190, 98%, 46%, .8);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n        transition: all 0.3s ease;\n      }\n      section.user .toolbar a.login {\n        position: relative;\n        padding: 9px;\n        font-size: 18px;\n        border: 1px solid hsl(190, 98%, 46%);\n        background: hsla(190, 98%, 46%, .8);\n        line-height: 18px;\n        border-radius: 3px;\n        color: var(--noflo-ui-text);\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        box-sizing: border-box;\n        transition: background-color 0.2s ease-in;\n      }\n      section.user .toolbar a.login:hover,\n      section.user .toolbar a.login:focus,\n      section.user .toolbar a.login:active {\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text) !important;\n        outline: 0;\n      }\n      div.banner {\n        background-color: hsla(190, 98%, 46%, .8);\n        padding: 18px;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      div.banner a {\n        color: var(--noflo-ui-text);\n        cursor: pointer;\n      }\n      div.banner div {\n        margin-top: 18px;\n      }\n      div.banner button,\n      div.banner a.cta,\n      div.banner input[type=\"submit\"] {\n        display: inline-block;\n        color: var(--noflo-ui-background);\n        background-color: var(--noflo-ui-text);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        padding-top: 1px;\n        padding-bottom: 1px;\n        line-height: 36px;\n        margin: 0px;\n        cursor: pointer;\n        font-size: 13px;\n        text-decoration: none;\n      }\n      </style>\n    <nav>\n    <section class=\"app\">\n      <div class=\"logo\">\n        <img src=\"app/[[env.NOFLO_THEME]]-72.png\">\n      </div>\n      <div class=\"name\">\n        <h1>\n          [[env.NOFLO_APP_NAME]]\n        </h1>\n        <h2>\n          v[[env.NOFLO_APP_VERSION]]\n        </h2>\n      </div>\n    </section>\n    <section class=\"user\">\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <div>\n        <template is=\"dom-if\" if=\"{{user.flowhub-avatar}}\">\n          <div class=\"avatar\"><img src=\"{{user.flowhub-avatar}}\"></div>\n        </template>\n        <h1>\n          <span>{{user.github-username}}</span>\n        </h1>\n        <div class=\"toolbar\">\n          <a href=\"https://docs.flowhub.io\" target=\"_blank\">Docs</a>\n          <a on-click=\"openSettings\">Settings</a>\n          <button on-click=\"logout\">Logout</button>\n        </div>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!user.flowhub-user}}\">\n      <div class=\"toolbar\">\n        <a id=\"loginbutton\" class=\"login\" on-click=\"login\">Login</a>\n      </div>\n    </template>\n    </section>\n    </nav>\n    <template is=\"dom-if\" if=\"{{user.flowhub-user}}\">\n      <template is=\"dom-if\" if=\"{{askForScope.length}}\">\n        <div class=\"banner\">\n          To be able to synchronize your GitHub projects, [[env.NOFLO_APP_TITLE]] needs repository access permissions. <a href=\"https://docs.flowhub.io/github-integration/\" target=\"_blank\">Read more</a>\n          <div>\n            Grant access to:\n            <template is=\"dom-repeat\" items=\"{{askForScope}}\" as=\"scope\">\n              <template is=\"dom-if\" if=\"{{_ifPublicScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public repositories only</button>\n              </template>\n              <template is=\"dom-if\" if=\"{{_ifPrivateScope(scope)}}\">\n                <button on-click=\"relogin\" data-scope\\$=\"{{scope}}\">Public and private repositories</button>\n              </template>\n            </template>\n          </div>\n        </div>\n      </template>\n    </template>\n    </template>\n`,\n\n  is: 'noflo-account',\n\n  properties: {\n    theme: {\n      type: String,\n    },\n    askForScope: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    help: { value: null },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'userChanged',\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_THEME: process.env.NOFLO_THEME,\n          NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n          NOFLO_APP_VERSION: process.env.NOFLO_APP_VERSION,\n        };\n      },\n    },\n  },\n\n  login() {\n    this.fire('login', true);\n  },\n\n  logout() {\n    this.fire('logout', true);\n  },\n\n  relogin(event) {\n    event.preventDefault();\n    const scope = event.currentTarget.getAttribute('data-scope');\n    this.fire('relogin', scope);\n  },\n\n  userChanged() {\n    if (!this.user || !this.user['flowhub-user']) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github) {\n      return;\n    }\n    if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('repo') === -1) {\n      // User hasn't granted repo access\n      this.set('askForScope', ['repo']);\n      if (!this.user['flowhub-user'].github.scopes || this.user['flowhub-user'].github.scopes.indexOf('public_repo') === -1) {\n        // Allow paid users to limit repo access to only public if they want\n        this.push('askForScope', 'public_repo');\n      }\n    }\n  },\n\n  openSettings() {\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this.user['flowhub-user']) {\n      return;\n    }\n    const dialog = document.createElement('noflo-account-settings');\n    dialog.user = this.user;\n    dialog.theme = this.theme;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (event) => {\n      this.fire('userUpdated', event.detail);\n    });\n  },\n\n  _ifPublicScope(scope) {\n    return scope === 'public_repo';\n  },\n\n  _ifPrivateScope(scope) {\n    return scope === 'repo';\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\n\nclass NoFloIcon extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: inline-block;\n      font: normal normal normal 14px/1 FontAwesomeSVG;\n      font-size: inherit;\n      text-rendering: auto;\n      -webkit-font-smoothing: antialiased;\n      -moz-osx-font-smoothing: grayscale;\n    }\n    </style>\n    [[_getIcon(icon, fallback)]]\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon';\n  }\n\n  static get properties() {\n    return {\n      icon: {\n        type: String,\n      },\n      fallback: {\n        type: String,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = icons;\n  }\n\n  _getIcon(icon, fallback) {\n    const result = this.icons.getIcon(icon, fallback);\n    return result;\n  }\n}\ncustomElements.define(NoFloIcon.is, NoFloIcon);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        top: calc(50% - 220px) !important;\n      }\n      ul.types {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n      }\n      ul.types li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 75%);\n        color: hsl(189, 50%, 80%);\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        transition: background-color 0.3s ease-in-out;\n      }\n      ul.types li.selected,\n      ul.types li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.types li.selected p {\n        color: hsl(0, 0%, 80%);\n      }\n      ul.types li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.types li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n      ul.types li noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n      }\n    </style>\n    <ul class=\"types\">\n      <template is=\"dom-repeat\" items=\"{{available}}\" as=\"availtype\">\n      <li on-click=\"selectType\" data-id\\$=\"{{availtype.id}}\" class\\$=\"{{_computeClass(availtype, type)}}\">\n        <h2>{{availtype.label}}</h2>\n        <noflo-icon icon=\"{{availtype.icon}}\"></noflo-icon>\n        <template is=\"dom-if\" if=\"{{_computeIf(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtime</p>\n        </template>\n        <template is=\"dom-if\" if=\"{{_computeIf2(availtype)}}\">\n        <p><span>{{availtype.runtimes.length}}</span> runtimes</p>\n        </template>\n      </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-type-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'runtimesChanged',\n    },\n    type: {\n      type: String,\n      value: 'noflo-nodejs',\n      notify: true,\n    },\n  },\n\n  runtimesChanged() {\n    this.available = [{\n      id: 'all',\n      label: 'Multi-platform',\n      icon: 'asterisk',\n      runtimes: [],\n    }];\n    if (!this.runtimes) {\n      return;\n    }\n    this.runtimes.forEach((rt) => {\n      if (!rt.type) {\n        return;\n      }\n      const availType = this.getByType(rt.type);\n      availType.runtimes.push(rt);\n    });\n  },\n\n  selectType(event) {\n    this.type = event.currentTarget.getAttribute('data-id');\n  },\n\n  getByType(type) {\n    for (let i = 0; i < this.available.length; i += 1) {\n      if (this.available[i].id === type) {\n        return this.available[i];\n      }\n    }\n    return this.prepareAvailable(type);\n  },\n\n  prepareAvailable(type) {\n    const runtimeTypeInfo = {};\n    Object.keys(runtimeInfo).forEach((name) => {\n      const info = runtimeInfo[name];\n      Object.keys(info.runtimetypes).forEach((runtimeType) => {\n        runtimeTypeInfo[runtimeType] = info.runtimetypes[runtimeType];\n      });\n    });\n    // Also unknown runtimes should show up, synthesize info using defaults\n    const availType = {\n      id: type,\n      label: type,\n      icon: 'cogs',\n      runtimes: [],\n    };\n    const info = runtimeTypeInfo[type];\n    if (info && info.icon) {\n      availType.icon = info.icon;\n    }\n    if (info && info.shortname) {\n      availType.label = info.shortname;\n    }\n    this.push('available', availType);\n    return availType;\n  },\n\n  _computeClass(availtype, type) {\n    return this.tokenList({ selected: type === availtype.id });\n  },\n\n  _computeIf(availtype) {\n    return availtype.runtimes.length === 1;\n  },\n\n  _computeIf2(availtype) {\n    return availtype.runtimes.length > 1;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-type-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new project</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Project label\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          Project namespace\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-project\" autocapitalize=\"off\" autocorrect=\"off\" readonly=\"\">\n        </label>\n        <label>\n          Primary Type\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-project',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    projectId: {\n      type: String,\n      value: '',\n    },\n    projects: { value: null },\n    runtimes: {\n      value: null,\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  produceNamespace(namespace) {\n    return namespace.toLowerCase().replace(/[\\s/._]/g, '-').replace('--', '-').replace(/[^a-z0-9-]/g, '');\n  },\n\n  nameChanged() {\n    this.namespace = this.produceNamespace(this.name);\n    this.projectId = uuid();\n    if (this.name && this.namespace && this.projectId) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name || !this.namespace || !this.projectId) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newProject');\n    }\n    this.fire('new', {\n      id: this.projectId,\n      name: this.name,\n      namespace: this.produceNamespace(this.namespace),\n      type: this.type,\n      graphs: [],\n      components: [],\n      specs: [],\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add a new repository</h1>\n      <div class=\"modal-content\">\n      <form>\n        <label>\n          GitHub repository name\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/repository\" required=\"\">\n        </label>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Add</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-repository',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    repo: {\n      type: String,\n      value: '',\n      observer: 'repoChanged',\n    },\n    runtimes: { notify: true },\n    token: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  repoChanged() {\n    this.canSend = false;\n    if (this.repo && typeof this.repo === 'string') {\n      const matched = this.repo.match(/^(git@github\\.com:|https:\\/\\/github\\.com\\/)?(\\S+\\/\\S+?(?=\\.git|$))(\\.git)?$/);\n      if (!matched || !matched[2]) {\n        return;\n      }\n      if (matched[2] !== this.repo) {\n        // eslint-disable-next-line prefer-destructuring\n        this.repo = matched[2];\n      }\n      this.canSend = true;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.repo) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newRepository');\n    }\n    this.fire('new', this.repo);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      :host {\n        display: block;\n      }\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Add new runtime</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Runtime name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"New local runtime\" required=\"\">\n        </label>\n        <label>\n          IP address\n          <input type=\"text\" value=\"{{address::input}}\" placeholder=\"127.0.0.1\" required=\"\">\n        </label>\n        <label>\n          Port\n          <input type=\"text\" data-type=\"int\" value=\"{{port::input}}\" placeholder=\"3569\" required=\"\">\n        </label>\n        <label>\n          Type\n          <select id=\"type\" value=\"{{type::input}}\">\n            <template is=\"dom-repeat\" items=\"{{availableTypes}}\" as=\"type\">\n            <option value=\"{{type}}\">{{type}}</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Secret\n          <input type=\"text\" value=\"{{secret::input}}\" placeholder=\"secret-string\" required=\"\">\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"create\" class\\$=\"{{_computeClass(canCreate)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-add-runtime',\n\n  properties: {\n    address: {\n      type: String,\n      value: 'localhost',\n      observer: 'validate',\n    },\n    availableTypes: {\n      type: Array,\n      value() {\n        return [\n          '',\n          'custom',\n          'noflo-nodejs',\n          'microflo',\n          'javafbp',\n          'imgflo',\n          'sndflo',\n          'msgflo',\n        ];\n      },\n    },\n    canCreate: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n    port: {\n      type: String,\n      value: '3569',\n      observer: 'validate',\n    },\n    secret: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      observer: 'validate',\n    },\n  },\n\n  attached() {\n    // PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    // PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  validate() {\n    if (this.name && this.address && this.port && this.type) {\n      this.canCreate = true;\n    }\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  createUUID() {\n    return uuid();\n  },\n\n  create(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    const runtime = {\n      name: this.name,\n      label: this.name,\n      id: this.createUUID(),\n      type: this.type,\n      seen: new Date().toString(),\n      protocol: 'websocket',\n      address: `ws://${this.address}:${this.port}`,\n      description: '',\n      secret: this.secret,\n      icon: 'cloud',\n    };\n    this.fire('new', runtime);\n    this.close();\n  },\n\n  listeners: { click: 'close' },\n\n  _computeRepeat(availableTypes, t) {\n    return t in availableTypes;\n  },\n\n  _computeClass(canCreate) {\n    return this.tokenList({ disabled: !canCreate });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-add-runtime';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nconst runtimes = [];\n\nconst runtimeTypes = {};\nObject.keys(runtimeInfo).forEach((name) => {\n  const rtInfo = runtimeInfo[name];\n  Object.keys(rtInfo.runtimetypes).forEach((runtimeType) => {\n    const info = rtInfo.runtimetypes[runtimeType];\n    const def = {\n      name: runtimeType,\n      label: info.shortname,\n      icon: info.icon,\n      description: info.description,\n      url: info.helpurl,\n    };\n    if (!runtimeTypes[runtimeType]) {\n      // Avoid duplicates\n      runtimeTypes[runtimeType] = def;\n      runtimes.push(def);\n    }\n  });\n});\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      a {\n        color: hsl(190, 100%, 30%);\n      }\n      p {\n        font-size: 11px;\n      }\n      ul.runtimes {\n        padding: 0px;\n        margin: 0px;\n        margin-left: -10px;\n        margin-right: -10px;\n        list-style: none;\n      }\n      ul.runtimes li {\n        display: inline-block;\n      }\n      ul.runtimes li a {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n        text-decoration: none;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n        text-decoration: none;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n        text-decoration: none;\n      }\n      ul.runtimes li a noflo-icon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        text-decoration: none;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Register new runtime</h1>\n      <div class=\"modal-content\">\n      <p>\n      [[env.NOFLO_APP_TITLE]] supports all flow-based programming runtimes that are compatible with the <a href=\"https://flowbased.github.io/fbp-protocol/\" target=\"_blank\">FBP protocol</a>.\n      [[env.NOFLO_APP_TITLE]] comes with a bundled <a href=\"http://noflojs.org\" target=\"_blank\">NoFlo</a> runtime for the browser.\n      Here are some other popular ones:\n      </p>\n      <ul class=\"runtimes\">\n      <template is=\"dom-repeat\" items=\"{{runtimes}}\" as=\"runtime\">\n      <li class\\$=\"{{runtime.name}}\">\n        <a target=\"_blank\" href\\$=\"{{runtime.url}}\">\n          <noflo-icon icon=\"{{ runtime.icon }}\" fallback=\"cog\"></noflo-icon>\n          <h2>{{runtime.label}}</h2>\n          <p>{{runtime.description}}</p>\n        </a>\n      </li>\n      </template>\n      </ul>\n      <p>\n      Most runtimes provide a link that connects to them in [[env.NOFLO_APP_TITLE]] live mode at start-up. You can also add a runtime manually.\n      </p>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"addRuntime\">Add manually</button>\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-new-runtime',\n\n  properties: {\n    runtimes: {\n      value() {\n        return runtimes;\n      },\n    },\n    env: {\n      type: Object,\n      value() {\n        return {\n          NOFLO_APP_TITLE: process.env.NOFLO_APP_TITLE,\n        };\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    if (this.runtimeAdd) {\n      if (PolymerDom(this.runtimeAdd).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeAdd).parentNode).removeChild(this.runtimeAdd);\n      }\n      this.runtimeAdd = null;\n    }\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  addRuntime(event) {\n    event.preventDefault();\n    this.runtimeAdd = document.createElement('noflo-add-runtime');\n    PolymerDom(document.body).appendChild(this.runtimeAdd);\n    this.runtimeAdd.addEventListener('new', (ev) => {\n      this.fire('addRuntime', ev.detail);\n    });\n  },\n\n  listeners: { click: 'close' },\n});\n","/*\n* Renders a fbp-graph instance into a canvas\n* Autoscales the render to fit, and exposes the scale as thumbscale, thumbrectangle, viewrectangle\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\n\nPolymer({\n  _template: html`\n    <canvas id=\"canvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n`,\n\n  is: 'the-graph-thumb',\n\n  properties: {\n    edgeColors: {\n      type: Array,\n      value() {\n        return [\n          'white',\n          'hsl(  0, 100%, 46%)',\n          'hsl( 35, 100%, 46%)',\n          'hsl( 60, 100%, 46%)',\n          'hsl(135, 100%, 46%)',\n          'hsl(160, 100%, 46%)',\n          'hsl(185, 100%, 46%)',\n          'hsl(210, 100%, 46%)',\n          'hsl(285, 100%, 46%)',\n          'hsl(310, 100%, 46%)',\n          'hsl(335, 100%, 46%)',\n        ];\n      },\n    },\n    fillStyle: {\n      type: String,\n      value: 'hsl(184, 8%, 10%)',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    lineWidth: {\n      type: Number,\n      value: 0.75,\n    },\n    listener: { value: null },\n    nodeSize: {\n      type: Number,\n      value: 60,\n    },\n    strokeStyle: {\n      type: String,\n      value: 'hsl(180, 11%, 70%)',\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { notify: true },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.thumbrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.viewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n  },\n\n  attached() {\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n    this.themeChanged();\n  },\n\n  themeChanged() {\n    const style = TheGraph.thumb.styleFromTheme(this.theme);\n    this.edgeColors = style.edgeColors;\n    this.fillStyle = style.fill;\n    this.strokeStyle = style.stroke;\n    // Redraw\n    this.redrawGraph();\n  },\n\n  redrawGraph() {\n    if (!this.graph) {\n      return;\n    }\n    const context = this.$.canvas.getContext('2d');\n    if (!context) {\n      // ???\n      setTimeout(this.redrawGraph.bind(this), 500);\n      return;\n    }\n    const properties = {\n      width: this.width,\n      height: this.height,\n      edgeColors: this.edgeColors,\n      nodeSize: this.nodeSize,\n      strokeStyle: this.strokeStyle,\n      fillStyle: this.fillStyle,\n      lineWidth: this.lineWidth,\n    };\n    const thumb = TheGraph.thumb.render(context, this.graph, properties);\n    this.thumbrectangle = thumb.rectangle;\n    this.thumbscale = thumb.scale;\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (!this.listener) {\n      this.listener = this.redrawGraph.bind(this);\n    }\n    if (oldGraph) {\n      oldGraph.removeListener('endTransaction', this.listener);\n    }\n    if (!this.graph) {\n      return;\n    }\n    this.graph.on('endTransaction', this.listener);\n    this.redrawGraph();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.redrawGraph();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.redrawGraph();\n  },\n\n  toDataURL() {\n    return this.$.canvas.toDataURL();\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\nimport './the-graph-thumb';\n\nclass NoFloProjectCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n    </style>\n    <the-graph-thumb graph=\"[[_getMainGraph(project.main)]]\" width=\"200\" height=\"120\"></the-graph-thumb>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <template is=\"dom-if\" if=\"[[project.gist]]\">\n      <li><button on-click=\"openGithub\">View Gist</button></li>\n      </template>\n      <li><button on-click=\"deleteProject\">Delete project</button></li>\n    </ul>\n    </template>\n    <h2>[[project.name]]</h2>\n    <p><span>[[project.graphs.length]]</span>&nbsp;graphs, <span>[[project.components.length]]</span>&nbsp;components</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-project-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo && !this.project.gist) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n      return;\n    }\n    if (this.project.gist) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGist');\n      }\n      window.location = `https://gist.github.com/${this.project.gist}`;\n    }\n  }\n\n  deleteProject(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.dispatchEvent(new CustomEvent('deleteProject', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _getMainGraph(main) {\n    if (!main) {\n      return null;\n    }\n    const mains = this.project.graphs.filter((graph) => {\n      if (graph.properties.id !== main) {\n        return false;\n      }\n      return true;\n    });\n    if (!mains.length) {\n      return null;\n    }\n    return mains[0];\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloProjectCard.is, NoFloProjectCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRepoCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n      #repoicon {\n        font-size: 72px;\n        position: absolute;\n        right: -8px;\n        top: 9px;\n        color: hsla(185, 100%, 75%, 0.2);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-icon id=\"repoicon\" icon=\"[[getRepoIcon(project)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Project menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <template is=\"dom-if\" if=\"[[project.repo]]\">\n      <li><button on-click=\"openGithub\">View on GitHub</button></li>\n      </template>\n      <li><button on-click=\"deleteRepo\">Remove from [[env.NOFLO_APP_NAME]]</button></li>\n    </ul>\n    </template>\n    <h2>[[project.repo]]</h2>\n    <template is=\"dom-if\" if=\"[[project.private]]\">\n    <p>Private repository</p>\n      <template is=\"dom-if\" if=\"[[!_isFree(user)]]\">\n      </template>\n    </template>\n    <template is=\"dom-if\" if=\"[[!project.private]]\">\n    <p>Public repository</p>\n    </template>\n`;\n  }\n\n  static get is() {\n    return 'noflo-repo-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      project: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n      env: {\n        type: Object,\n        value() {\n          return {\n            NOFLO_APP_NAME: process.env.NOFLO_APP_NAME,\n          };\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  openGithub(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (!this.project.repo) {\n      return;\n    }\n    if (this.project.repo) {\n      if (typeof ga === 'function') {\n        ga('send', 'event', 'button', 'click', 'openGithub');\n      }\n      window.location = `https://github.com/${this.project.repo}`;\n    }\n  }\n\n  deleteRepo(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteRepo');\n    }\n    this.dispatchEvent(new CustomEvent('deleteRepo', {\n      detail: this.project,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n\n  getRepoIcon() {\n    return 'github';\n  }\n}\ncustomElements.define(NoFloRepoCard.is, NoFloRepoCard);\n","import { PolymerElement, html } from '@polymer/polymer';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-card-styles';\nimport './noflo-icon';\n\nclass NoFloRuntimeCard extends PolymerElement {\n  static get template() {\n    return html`\n    <style include=\"noflo-card-styles\">\n    #runtimeicon {\n      font-size: 72px;\n      position: absolute;\n      right: -8px;\n      top: 9px;\n      color: hsla(185, 100%, 75%, 0.2);\n      text-decoration: none;\n    }\n    </style>\n    <noflo-icon id=\"runtimeicon\" icon=\"[[getRuntimeIcon(runtime)]]\"></noflo-icon>\n    <button id=\"menubutton\" title=\"Runtime menu\" on-click=\"toggleMenu\"><noflo-icon icon=\"[[menuicon]]\"></noflo-icon></button>\n    <template is=\"dom-if\" if=\"[[menuopen]]\">\n    <ul id=\"menu\">\n      <li><button on-click=\"deleteRuntime\">Delete runtime</button></li>\n    </ul>\n    </template>\n    <h2>[[runtime.label]]</h2>\n    <p><span>[[_produceAddress(runtime)]]</span>. Seen <span>[[runtime.seenHoursAgo]]</span>h ago</p>\n`;\n  }\n\n  static get is() {\n    return 'noflo-runtime-card';\n  }\n\n  static get properties() {\n    return {\n      menuopen: {\n        type: Boolean,\n        value: false,\n        observer: '_menuOpenChanged',\n      },\n      menuicon: {\n        type: String,\n        value: 'ellipsis-v',\n      },\n      runtime: {\n        type: Object,\n        value() {\n          return {};\n        },\n      },\n    };\n  }\n\n  toggleMenu(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    if (this.menuopen) {\n      this.menuopen = false;\n      return;\n    }\n    this.menuopen = true;\n  }\n\n  deleteRuntime(event) {\n    event.stopPropagation();\n    event.preventDefault();\n    this.dispatchEvent(new CustomEvent('deleteRuntime', {\n      detail: this.runtime,\n      composed: true,\n      bubbles: true,\n    }));\n    this.menuopen = false;\n  }\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.type || !runtimeInfo[runtime.type]) {\n      return 'cog';\n    }\n    let icon = 'cog';\n    Object.keys(runtimeInfo).forEach((name) => {\n      Object.keys(runtimeInfo[name].runtimetypes).forEach((runtimeType) => {\n        if (runtimeType !== runtime.type) {\n          return;\n        }\n        icon = runtimeInfo[name].runtimetypes[runtime.type].icon;\n      });\n    });\n    return icon;\n  }\n\n  _produceAddress(runtime) {\n    if (runtime.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.id}`;\n    }\n    return runtime.address;\n  }\n\n  _menuOpenChanged() {\n    if (this.menuopen) {\n      this.menuicon = 'caret-down';\n      return;\n    }\n    this.menuicon = 'ellipsis-v';\n  }\n}\ncustomElements.define(NoFloRuntimeCard.is, NoFloRuntimeCard);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-account';\nimport './noflo-new-project';\nimport './noflo-new-repository';\nimport './noflo-new-runtime';\nimport './noflo-project-card';\nimport './noflo-repo-card';\nimport './noflo-runtime-card';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: hsl(190, 90%, 45%);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        transition: height 1s ease-in-out;\n        display: block;\n      }\n      section {\n        display: block;\n        position: relative;\n        padding-left: 72px;\n        padding-right: 72px;\n      }\n      section > h2 {\n        font-size: 17px;\n        line-height: 36px;\n        margin-top: 36px;\n        height: 36px;\n        color: white;\n        text-shadow: 0 1px 0 hsl(190, 100%, 40%);\n        text-transform: none;\n      }\n      section > h2 small {\n        font-size: 10px;\n        text-transform: uppercase;\n        color: hsl(189, 50%, 25%);\n      }\n      ul.tabs {\n        position: absolute;\n        display: inline-block;\n        top: 0px;\n        left: calc(50% - 133px);\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n      ul.projects {\n        padding: 0px;\n        margin-top: 36px;\n        margin-bottom: 36px;\n        margin-left: -18px;\n        margin-right: -18px;\n        list-style: none;\n      }\n      ul.projects li {\n        width: 216px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: var(--noflo-ui-background);\n        color: var(--noflo-ui-text);\n        border-radius: 3px;\n        margin-right: 18px;\n        margin-left: 18px;\n        margin-bottom: 36px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.projects li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.projects li.remote {\n        cursor: default;\n      }\n      section button,\n      section #cta {\n        background-color: transparent;\n        color: hsl(189, 50%, 25%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        border: none;\n        padding-left: 13px;\n        padding-right: 13px;\n        cursor: pointer;\n      }\n      ul.projects li button,\n      ul.projects li #cta {\n        display: block;\n        border: 1px solid hsl(189, 50%, 25%);\n        position: absolute;\n        right: 18px;\n        top: 36px;\n      }\n      ul.projects li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 150px;\n        text-transform: none;\n        font-size: 12px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.projects li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 150px;\n        text-transform: uppercase;\n        font-size: 10px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 11%, 50%);\n      }\n      ul.projects li a {\n        color: var(--noflo-ui-background);\n        text-decoration: none;\n      }\n    </style>\n    <noflo-account id=\"mainaccount\" user=\"[[user]]\" theme=\"[[theme]]\"></noflo-account>\n      <section id=\"projects\">\n        <h2>Projects\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <small>[[numberOfLocalProjects(projects)]]</small>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <small>[[numberOfRemoteProjects(remoteProjects)]]</small>\n          <button on-click=\"fetchGithub\">\n            <noflo-icon id=\"fetchgithub\" icon=\"refresh\"></noflo-icon>\n          </button>\n          </template>\n        </h2>\n        <ul class=\"tabs\">\n          <li on-click=\"openLocal\" class\\$=\"[[_isSelectedView('local', projectList)]]\">On device</li>\n          <template is=\"dom-if\" if=\"[[_canGithub(user)]]\">\n          <li on-click=\"openGithub\" class\\$=\"[[_isSelectedView('github', projectList)]]\">GitHub</li>\n          </template>\n        </ul>\n        <ul class=\"projects\">\n          <template is=\"dom-if\" if=\"[[_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>New project</h2>\n            <button id=\"newproject\" on-click=\"newProject\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[projects]]\" as=\"project\" filter=\"filterLocalProjects\">\n            <li on-click=\"openProject\" data-id\\$=\"[[project.id]]\">\n              <noflo-project-card project=\"[[project]]\"></noflo-project-card>\n            </li>\n          </template>\n          </template>\n          <template is=\"dom-if\" if=\"[[!_isLocalProjects(projectList)]]\">\n          <li class=\"add\">\n            <h2>Add a repository</h2>\n            <button id=\"newrepository\" on-click=\"newRepository\">Add</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"[[remoteProjects]]\" as=\"project\" filter=\"filterRemoteProjects\">\n            <li class=\"remote\" on-click=\"downloadProject\" data-repo\\$=\"[[project.repo]]\">\n              <noflo-repo-card project=\"[[project]]\"></noflo-repo-card>\n            </li>\n          </template>\n          </template>\n        </ul>\n      </section>\n    <section id=\"runtimes\">\n      <h2>\n        Runtimes <small><span>[[numberOfAvailableRuntimes(runtimes)]]</span> / <span>[[runtimes.length]]</span></small>\n        <template is=\"dom-if\" if=\"[[_canFlowhub(user)]]\">\n        <button on-click=\"fetchRuntimes\">\n          <noflo-icon id=\"fetchruntimes\" icon=\"refresh\"></noflo-icon>\n        </button>\n        </template>\n      </h2>\n      <ul class=\"projects\">\n        <li class=\"add\">\n          <h2>New runtime</h2>\n          <button on-click=\"newRuntime\">Register</button>\n        </li>\n\n        <template is=\"dom-repeat\" items=\"[[runtimes]]\" as=\"runtime\" filter=\"filterAvailableRuntimes\">\n          <li on-click=\"openRuntime\" data-id\\$=\"[[runtime.id]]\" data-protocol\\$=\"[[runtime.protocol]]\">\n            <noflo-runtime-card runtime=\"[[runtime]]\"></noflo-runtime-card>\n          </li>\n        </template>\n      </ul>\n    </section>\n    <section id=\"examples\">\n      <h2>\n        Examples\n      </h2>\n      <ul class=\"projects\">\n        <template is=\"dom-repeat\" items=\"[[_getExamples(projects, runtimes)]]\" as=\"example\">\n        <li on-click=\"openExample\" class=\"example\" data-id\\$=\"[[example.id]]\">\n          <h2>[[example.label]]</h2>\n          <p>[[example.address]]</p>\n        </li>\n        </template>\n      </ul>\n    </section>\n`,\n\n  is: 'noflo-main',\n\n  properties: {\n    help: { value: null },\n    open: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'openChanged',\n    },\n    projectList: {\n      type: String,\n      value: 'local',\n    },\n    projects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    remoteProjects: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    theme: {\n      type: String,\n    },\n    user: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.openChanged();\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  openChanged() {\n    if (String(this.open) === 'true') {\n      // Make main visible\n      this.set('style.height', '100%');\n      return;\n    }\n    this.set('style.height', '0px');\n  },\n\n  openLocal(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.projectList = 'local';\n  },\n\n  openGithub(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    event.preventDefault();\n    this.projectList = 'github';\n    if (!this.remoteProjects || this.remoteProjects.length === 0) {\n      setTimeout(() => {\n        this.fetchGithub();\n      }, 1);\n    }\n  },\n\n  downloadProject(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    const repo = event.currentTarget.getAttribute('data-repo');\n    const repoParts = repo.split('/');\n    const branch = 'master';\n    this.fire('downloadProject', {\n      org: repoParts[0],\n      repo: repoParts[1],\n      branch,\n    });\n    this.openLocal();\n  },\n\n  fetchGithub(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this._canGithub(this.user)) {\n      return;\n    }\n    this.fire('fetchRemote', true);\n  },\n\n  numberOfRemoteProjects(remoteProjects) {\n    return remoteProjects.filter(this.filterRemoteProjects.bind(this)).length;\n  },\n\n  filterRemoteProjects(remoteProject) {\n    if (!this.projects) {\n      return true;\n    }\n    for (let i = 0; i < this.projects.length; i += 1) {\n      if (this.projects[i].repo === remoteProject.repo) {\n        // We already have this project checked out\n        return false;\n      }\n    }\n    return true;\n  },\n\n  numberOfLocalProjects(projects) {\n    return projects.filter(this.filterLocalProjects.bind(this)).length;\n  },\n\n  filterLocalProjects(project) {\n    if (project.type === 'flowtrace-replay') {\n      return false;\n    }\n    return true;\n  },\n\n  numberOfAvailableRuntimes(runtimes) {\n    return runtimes.filter(this.filterAvailableRuntimes.bind(this)).length;\n  },\n\n  filterAvailableRuntimes(runtime) {\n    if (!runtime) {\n      return false;\n    }\n    if (!runtime.seen) {\n      // Non-persistent runtime, don't show\n      return false;\n    }\n    if (runtime.type === 'flowtrace-replay') {\n      // Flowtrace runtimes don't make sense to show\n      return false;\n    }\n    if (runtime.protocol === 'opener' && !window.opener) {\n      // Can't use opener runtimes if opener is not defined\n      return false;\n    }\n    if (typeof runtime.seen !== 'object') {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = new Date(runtime.seen);\n    }\n    const now = new Date();\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor((now - runtime.seen) / (60 * 60 * 1000));\n    return true;\n  },\n\n  _getExamples(projects, runtimes) {\n    const runtimeTypes = [];\n    // Find examples for current runtime types\n    runtimes.forEach((runtime) => {\n      if (!runtime.type) {\n        return;\n      }\n      if (runtimeTypes.indexOf(runtime.type) === -1) {\n        runtimeTypes.push(runtime.type);\n      }\n    });\n    const examples = [];\n    runtimeTypes.forEach((type) => {\n      if (!runtimeInfo[type]) {\n        return;\n      }\n      const typeExamples = runtimeInfo[type].examples;\n      if (!typeExamples) {\n        return;\n      }\n      Object.keys(typeExamples).forEach((key) => {\n        if (typeExamples[key].ssl && window.location.protocol !== 'https:') {\n          // Skip examples that require SSL when on HTTP\n          return;\n        }\n        examples.push(typeExamples[key]);\n      });\n    });\n    const seen = [];\n    return examples.filter((example) => {\n      if (seen.indexOf(example.id) !== -1) {\n        return false;\n      }\n      seen.push(example.id);\n      const local = projects.filter((project) => {\n        if (project.gist === example.id) {\n          return true;\n        }\n        return false;\n      });\n      if (!local.length) {\n        return true;\n      }\n      return false;\n    });\n  },\n\n  fetchRuntimes() {\n    if (!this._canFlowhub(this.user)) {\n      return;\n    }\n    this.fire('fetchRuntimes', true);\n  },\n\n  openProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    let project = null;\n    this.projects.forEach((p) => {\n      if (p.id === event.currentTarget.getAttribute('data-id')) {\n        project = p;\n      }\n    });\n    if (!project) {\n      return;\n    }\n    if (project.runtime) {\n      const matchingRuntime = this.runtimes.filter(this.filterAvailableRuntimes).filter((rt) => {\n        if (rt.id === project.runtime) {\n          return true;\n        }\n        return false;\n      });\n      if (!matchingRuntime.length) {\n        // Runtime for this project is not available\n        return;\n      }\n    }\n    this.fire('openProject', project);\n  },\n\n  openRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (event.currentTarget.getAttribute('data-protocol') === 'iframe') {\n      return;\n    }\n    this.fire('hash', [\n      'runtime',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  openExample(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.fire('hash', [\n      'gist',\n      event.currentTarget.getAttribute('data-id'),\n    ]);\n  },\n\n  newProject(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-project');\n    dialog.projects = this.projects;\n    dialog.runtimes = this.runtimes;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const project = ev.detail;\n      const graph = new Graph('main');\n      const graphId = `${project.id}/main`;\n      graph.setProperties({\n        id: graphId,\n        project: project.id,\n        environment: { type: project.type },\n        main: true,\n      });\n      project.graphs.push(graph);\n      project.main = graphId;\n      this.fire('newgraph', graph);\n      this.fire('newproject', project);\n    });\n  },\n\n  newRepository(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-repository');\n    dialog.addEventListener('new', (ev) => {\n      const repo = ev.detail;\n      const repoParts = repo.split('/');\n      const branch = 'master';\n      this.fire('downloadProject', {\n        org: repoParts[0],\n        repo: repoParts[1],\n        branch,\n      });\n      setTimeout(() => {\n        this.openLocal();\n      }, 1);\n    });\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  newRuntime(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-runtime');\n    dialog.addEventListener('addRuntime', (ev) => {\n      this.fire('newruntime', ev.detail);\n    });\n    dialog.user = this.user;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  _isLocalProjects(projectList) {\n    return projectList === 'local';\n  },\n\n  _canGithub(user) {\n    if (user && user['github-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _canFlowhub(user) {\n    if (user && user['flowhub-token']) {\n      return true;\n    }\n    return false;\n  },\n\n  _isSelectedView(view, list) {\n    if (list === view) {\n      return 'selected';\n    }\n    return '';\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport 'hammerjs';\nimport TheGraph from 'the-graph';\nimport { unnamespace } from '../src/collections';\nimport './the-graph-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-graph-styles\">\n    </style>\n    <div id=\"svgcontainer\"></div>\n`,\n\n  is: 'the-graph',\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'iconsChanged',\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'animatedEdgesChanged',\n    },\n    appView: { value: null },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    autolayouter: { value: null },\n    debounceLibraryRefeshTimer: { value: null },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'displaySelectionGroupChanged',\n    },\n    editable: {\n      type: Boolean,\n      value: true,\n    },\n    graphChanges: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n      observer: 'errorNodesChanged',\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'forceSelectionChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    graphView: { value: null },\n    grid: {\n      type: Number,\n      value: 72,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    library: {\n      value: null,\n      notify: true,\n    },\n    maxZoom: {\n      type: Number,\n      value: 15,\n      notify: true,\n    },\n    menus: {\n      value: null,\n      notify: true,\n      observer: 'menusChanged',\n    },\n    minZoom: {\n      type: Number,\n      value: 0.15,\n      notify: true,\n    },\n    offsetX: {\n      value: 0,\n      notify: true,\n    },\n    offsetY: {\n      value: 0,\n      notify: true,\n    },\n    pan: {\n      notify: true,\n      observer: 'panChanged',\n    },\n    readonly: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    scale: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedEdgesChanged',\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'selectedNodesChanged',\n    },\n    selectedNodesHash: {\n      type: Object,\n      value() {\n        return {};\n      },\n      observer: 'selectedNodesHashChanged',\n    },\n    snap: {\n      type: Number,\n      value: 36,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.library = {};\n    // Default pan\n    this.pan = [\n      0,\n      0,\n    ];\n    // Initializes the autolayouter\n    this.autolayouter = klayNoflo.init({\n      onSuccess: this.applyAutolayout.bind(this),\n      workerScript: 'vendor/klayjs/klay.js',\n    });\n    this.themeChanged();\n  },\n\n  themeChanged(newTheme, previousTheme) {\n    PolymerDom(this.$.svgcontainer).classList.remove(`the-graph-${previousTheme}`);\n    if (newTheme) {\n      PolymerDom(this.$.svgcontainer).classList.add(`the-graph-${newTheme}`);\n    }\n  },\n\n  graphEvents: [\n    'changeProperties',\n    'addNode',\n    'changeNode',\n    'removeNode',\n    'addEdge',\n    'changeEdge',\n    'removeEdge',\n    'addInitial',\n    'removeInitial',\n    'addGroup',\n    'removeGroup',\n    'changeGroup',\n  ],\n\n  graphRenameEvents: [\n    'renameInport',\n    'renameOutport',\n    'renameGroup',\n    'renameNode',\n  ],\n\n  graphPortEvents: [\n    'addInport',\n    'removeInport',\n    'addOutport',\n    'removeOutport',\n  ],\n\n  subscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      this.trackGraphChange = {};\n    }\n    this.graphEvents.forEach((event) => {\n      this.trackGraphChange[event] = (payload) => {\n        this.graphChanges.push({\n          event,\n          payload,\n        });\n        if (this.autolayout) {\n          this.triggerAutolayout();\n        }\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphRenameEvents.forEach((event) => {\n      this.trackGraphChange[event] = (from, to) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            from,\n            to,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n    this.graphPortEvents.forEach((event) => {\n      this.trackGraphChange[event] = (pub, priv) => {\n        this.graphChanges.push({\n          event,\n          payload: {\n            public: pub,\n            node: priv.process,\n            port: priv.port,\n            metadata: priv.metadata,\n          },\n        });\n      };\n      graph.on(event, this.trackGraphChange[event]);\n    });\n\n    // Send changeset at end of transaction\n    this.trackGraphChange.endTransaction = () => {\n      // Send full graph for storage\n      this.fire('changed', graph);\n      // Send and clear graph change log\n      if (this.graphChanges.length) {\n        if (!this.readonly) {\n          this.fire('graphChanges', this.graphChanges);\n        }\n        this.graphChanges = [];\n      }\n    };\n    this.graph.on('endTransaction', this.trackGraphChange.endTransaction);\n  },\n\n  unsubscribeGraph(graph) {\n    if (!this.trackGraphChange) {\n      return;\n    }\n    const allEvents = this.graphEvents.concat(this.graphRenameEvents, this.graphPortEvents);\n    allEvents.forEach((event) => {\n      if (!this.trackGraphChange[event]) {\n        return;\n      }\n      graph.removeListener(event, this.trackGraphChange[event]);\n      delete this.trackGraphChange[event];\n    });\n\n    if (this.trackGraphChange.endTransaction) {\n      graph.removeListener('endTransaction', this.trackGraphChange.endTransaction);\n      delete this.trackGraphChange.endTransaction;\n    }\n  },\n\n  graphChanged(newGraph, oldGraph) {\n    if (oldGraph && oldGraph.removeListener) {\n      this.unsubscribeGraph(oldGraph);\n    }\n\n    if (this.appView) {\n      // Remove previous instance\n      ReactDOM.unmountComponentAtNode(this.$.svgcontainer);\n    }\n\n    if (!this.graph) {\n      return;\n    }\n\n    // Subscribe to graph changes\n    this.subscribeGraph(newGraph);\n\n    // Setup app\n    PolymerDom(this.$.svgcontainer).innerHTML = '';\n    this.appView = ReactDOM.render(TheGraph.App({\n      graph: this.graph,\n      width: this.width,\n      minZoom: this.minZoom,\n      maxZoom: this.maxZoom,\n      height: this.height,\n      library: this.library,\n      menus: this.menus,\n      editable: this.editable,\n      onEdgeSelection: this.onEdgeSelection.bind(this),\n      onNodeSelection: this.onNodeSelection.bind(this),\n      onPanScale: this.onPanScale.bind(this),\n      getMenuDef: this.getMenuDef.bind(this),\n      displaySelectionGroup: this.displaySelectionGroup,\n      forceSelection: this.forceSelection,\n      offsetY: this.offsetY,\n      offsetX: this.offsetX,\n      readonly: this.readonly,\n    }), this.$.svgcontainer);\n    this.graphView = this.appView.refs.graph;\n  },\n\n  onPanScale(x, y, scale) {\n    this.pan = [x, y];\n    this.scale = scale;\n  },\n\n  onEdgeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedEdges.length > 0) {\n        this.selectedEdges = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedEdges.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedEdges.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedEdges = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedEdges = shallowClone;\n      }\n    } else {\n      this.selectedEdges = [item];\n    }\n  },\n\n  onNodeSelection(itemKey, item, toggle) {\n    if (itemKey === undefined) {\n      if (this.selectedNodes.length > 0) {\n        this.selectedNodes = [];\n      }\n      return;\n    }\n    if (toggle) {\n      const index = this.selectedNodes.indexOf(item);\n      const isSelected = index !== -1;\n      const shallowClone = this.selectedNodes.slice();\n      if (isSelected) {\n        shallowClone.splice(index, 1);\n        this.selectedNodes = shallowClone;\n      } else {\n        shallowClone.push(item);\n        this.selectedNodes = shallowClone;\n      }\n    } else {\n      this.selectedNodes = [item];\n    }\n  },\n\n  selectedNodesChanged() {\n    this.set('selectedNodesHash', {});\n    const selectedNodesHash = {};\n    this.selectedNodes.forEach((item) => {\n      selectedNodesHash[item.id] = true;\n    });\n    this.set('selectedNodesHash', selectedNodesHash);\n    this.fire('nodes', this.selectedNodes);\n  },\n\n  selectedNodesHashChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedNodes(this.selectedNodesHash);\n  },\n\n  errorNodesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setErrorNodes(this.errorNodes);\n  },\n\n  selectedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setSelectedEdges(this.selectedEdges);\n    this.fire('edges', this.selectedEdges);\n  },\n\n  animatedEdgesChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setAnimatedEdges(this.animatedEdges);\n  },\n\n  iconsChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    Object.keys(this.icons).forEach((nodeId) => {\n      this.graphView.updateIcon(nodeId, this.icons[nodeId]);\n    });\n  },\n\n  triggerAutolayout() {\n    const { graph } = this;\n    const portInfo = this.graphView ? this.graphView.portInfo : null;\n    // Calls the autolayouter\n    this.autolayouter.layout({\n      graph,\n      portInfo,\n      direction: 'RIGHT',\n      options: {\n        intCoordinates: true,\n        algorithm: 'de.cau.cs.kieler.klay.layered',\n        layoutHierarchy: true,\n        spacing: 36,\n        borderSpacing: 20,\n        edgeSpacingFactor: 0.2,\n        inLayerSpacingFactor: 2,\n        nodePlace: 'BRANDES_KOEPF',\n        nodeLayering: 'NETWORK_SIMPLEX',\n        edgeRouting: 'POLYLINE',\n        crossMin: 'LAYER_SWEEP',\n        direction: 'RIGHT',\n      },\n    });\n  },\n\n  applyAutolayout(keilerGraph) {\n    this.graph.startTransaction('autolayout');\n    TheGraph.autolayout.applyToGraph(this.graph, keilerGraph, { snap: this.snap });\n    this.graph.endTransaction('autolayout');\n    // Fit to window\n    this.triggerFit();\n  },\n\n  triggerFit() {\n    if (this.appView) {\n      this.appView.triggerFit();\n    }\n  },\n\n  widthChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ width: this.width });\n  },\n\n  heightChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({ height: this.height });\n  },\n\n  rerender(options) {\n    // This is throttled with rAF internally\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.markDirty(options);\n  },\n\n  addNode(id, component, metadata) {\n    if (!this.graph) {\n      return;\n    }\n    this.graph.addNode(id, component, metadata);\n  },\n\n  getPan() {\n    if (!this.appView) {\n      return [\n        0,\n        0,\n      ];\n    }\n    return [\n      this.appView.state.x,\n      this.appView.state.y,\n    ];\n  },\n\n  panChanged() {\n    // Send pan back to React\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setState({\n      x: this.pan[0],\n      y: this.pan[1],\n    });\n  },\n\n  getScale() {\n    if (!this.appView) {\n      return 1;\n    }\n    return this.appView.state.scale;\n  },\n\n  displaySelectionGroupChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ displaySelectionGroup: this.displaySelectionGroup });\n  },\n\n  forceSelectionChanged() {\n    if (!this.graphView) {\n      return;\n    }\n    this.graphView.setState({ forceSelection: this.forceSelection });\n  },\n\n  focusNode(node) {\n    this.appView.focusNode(node);\n  },\n\n  menusChanged() {\n    // Only if the object itself changes,\n    // otherwise builds menu from reference every time menu shown\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ menus: this.menus });\n  },\n\n  readonlyChanged() {\n    if (!this.appView) {\n      return;\n    }\n    this.appView.setProps({ readonly: this.readonly });\n  },\n\n  debounceLibraryRefesh() {\n    // Breaking the \"no debounce\" rule, this fixes #76 for subgraphs\n    if (this.debounceLibraryRefeshTimer) {\n      clearTimeout(this.debounceLibraryRefeshTimer);\n    }\n    this.debounceLibraryRefeshTimer = setTimeout(() => {\n      this.rerender({ libraryDirty: true });\n    }, 200);\n  },\n\n  registerComponent(definition, generated) {\n    const component = this.library[definition.name];\n    const def = definition;\n    if (component && generated) {\n      // Don't override real one with generated dummy\n      return;\n    }\n    this.set(`library.${definition.name}`, def);\n    // So changes are rendered\n    this.debounceLibraryRefesh();\n    // Register namespaced components also without their alias\n    if (definition.name.indexOf('/') !== -1) {\n      const unnamespaced = unnamespace(definition.name);\n      this.registerComponent({\n        ...definition,\n        name: unnamespaced,\n        unnamespaced: true,\n      }, false);\n    }\n  },\n\n  getComponent(name) {\n    return this.library[name];\n  },\n\n  toJSON() {\n    if (!this.graph) {\n      return {};\n    }\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph';\n\nPolymer({\n  _template: html`\n    <the-graph id=\"graph\" menus=\"{{menus}}\" width=\"{{width}}\" height=\"{{height}}\" pan=\"{{pan}}\" scale=\"{{scale}}\" autolayout=\"{{autolayout}}\" readonly=\"{{readonly}}\" theme=\"{{theme}}\" selected-nodes=\"{{selectedNodes}}\" error-nodes=\"{{errorNodes}}\" selected-edges=\"{{selectedEdges}}\" animated-edges=\"{{animatedEdges}}\" display-selection-group=\"{{displaySelectionGroup}}\" force-selection=\"{{forceSelection}}\" icons=\"[[icons]]\">\n    </the-graph>\n`,\n\n  is: 'the-graph-editor',\n\n  attached() {\n    this.$.graph.getMenuDef = this.getMenuDef;\n  },\n\n  properties: {\n    icons: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    animatedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    autolayout: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    copyNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    displaySelectionGroup: {\n      type: Boolean,\n      value: true,\n      notify: true,\n    },\n    errorNodes: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    forceSelection: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    grid: {\n      type: Number,\n      value: 72,\n      notify: true,\n    },\n    height: {\n      type: Number,\n      value: 600,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    menus: { value: null },\n    notifyView: { observer: 'notifyViewChanged' },\n    onContextMenu: { notify: true },\n    pan: { observer: 'panChanged' },\n    plugins: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    readonly: { notify: true },\n    scale: {\n      type: Number,\n      value: 1,\n      observer: 'scaleChanged',\n    },\n    selectedEdges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    selectedNodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    snap: {\n      type: Number,\n      value: 36,\n      notify: true,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.pan = [\n      0,\n      0,\n    ];\n    this.menus = TheGraph.editor.getDefaultMenus(this);\n  },\n\n  detached() {\n    Object.keys(this.plugins).forEach((name) => {\n      this.plugins[name].unregister(this);\n      delete this.plugins[name];\n    });\n  },\n\n  addPlugin(name, plugin) {\n    this.set(`plugins.${name}`, plugin);\n    plugin.register(this);\n  },\n\n  addMenu(type, options) {\n    // options: icon, label\n    this.set(`menus.${type}`, options);\n  },\n\n  addMenuCallback(type, callback) {\n    if (!this.menus[type]) {\n      return;\n    }\n    this.set(`menus.${type}.callback`, callback);\n  },\n\n  addMenuAction(type, direction, options) {\n    if (!this.menus[type]) {\n      this.set(`menus.${type}`, {});\n    }\n    const menu = this.menus[type];\n    menu[direction] = options;\n  },\n\n  getMenuDef(options) {\n    // Options: type, graph, itemKey, item\n    if (options.type && this.menus[options.type]) {\n      const defaultMenu = this.menus[options.type];\n      if (defaultMenu.callback) {\n        return defaultMenu.callback(defaultMenu, options);\n      }\n      return defaultMenu;\n    }\n    return null;\n  },\n\n  notifyViewChanged() {\n    const view = {\n      scale: this.scale,\n      pan: this.pan,\n      width: this.width,\n      height: this.height,\n    };\n    this.fire('viewchanged', view);\n  },\n\n  panChanged() {\n    this.notifyViewChanged();\n  },\n\n  scaleChanged() {\n    this.notifyViewChanged();\n  },\n\n  widthChanged() {\n    this.set('style.width', `${this.width}px`);\n    this.notifyViewChanged();\n  },\n\n  heightChanged() {\n    this.set('style.height', `${this.height}px`);\n    this.notifyViewChanged();\n  },\n\n  themeChanged() {\n    this.$.graph.theme = this.theme;\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      this.set('$.graph.graph', this.graph);\n      return;\n    }\n    if (typeof this.graph.addNode !== 'function') {\n      throw new Error('.graph property of the-graph-editor must be a fbp-graph instance (since the-graph 0.8)');\n    }\n    this.buildInitialLibrary(this.graph);\n    this.set('$.graph.graph', this.graph);\n  },\n\n  buildInitialLibrary(graph) {\n    /* if (Object.keys(this.$.graph.library).length !== 0) {\n      // We already have a library, skip\n      // TODO what about loading a new graph? Are we making a new editor?\n      return;\n    } */\n    const components = TheGraph.library.componentsFromGraph(graph);\n    components.forEach((component) => {\n      this.registerComponent(component, true);\n    });\n  },\n\n  registerComponent(definition, generated) {\n    this.$.graph.registerComponent(definition, generated);\n  },\n\n  libraryRefresh() {\n    this.$.graph.debounceLibraryRefesh();\n  },\n\n  rerender() {\n    this.$.graph.rerender();\n  },\n\n  triggerAutolayout() {\n    this.$.graph.triggerAutolayout();\n  },\n\n  triggerFit() {\n    this.$.graph.triggerFit();\n  },\n\n  animateEdge(edge) {\n    // Make sure unique\n    const index = this.animatedEdges.indexOf(edge);\n    if (index === -1) {\n      this.push('animatedEdges', edge);\n    }\n  },\n\n  unanimateEdge(edge) {\n    const index = this.animatedEdges.indexOf(edge);\n    if (index >= 0) {\n      this.splice('animatedEdges', index, 1);\n    }\n  },\n\n  addErrorNode(id) {\n    this.set(`errorNodes.${id}`, true);\n    this.updateErrorNodes();\n  },\n\n  removeErrorNode(id) {\n    this.set(`errorNodes.${id}`, false);\n    this.updateErrorNodes();\n  },\n\n  clearErrorNodes() {\n    this.errorNodes = {};\n    this.updateErrorNodes();\n  },\n\n  updateErrorNodes() {\n    this.$.graph.errorNodesChanged();\n  },\n\n  focusNode(node) {\n    this.$.graph.focusNode(node);\n  },\n\n  getComponent(name) {\n    return this.$.graph.getComponent(name);\n  },\n\n  getLibrary() {\n    return this.$.graph.library;\n  },\n\n  toJSON() {\n    return this.graph.toJSON();\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  is: 'noflo-library',\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n  },\n  addNode(component) {\n    const componentName = component.name;\n    let num = 60466176;\n    // 36^5\n    num = Math.floor(Math.random() * num);\n    const id = `${componentName}_${num.toString(36)}`;\n    // TODO fix with pan\n    const pan = this.editor.$.graph.getPan();\n    const scale = this.editor.$.graph.getScale();\n    const { graph } = this.editor;\n    graph.startTransaction('addnode');\n    const nameParts = componentName.split('/');\n    graph.addNode(id, componentName, {\n      label: nameParts[nameParts.length - 1],\n      x: Math.floor((-pan[0] + 334) / scale),\n      y: Math.floor((-pan[1] + 100) / scale),\n    });\n    // Add IIPs for default values\n    component.inports.forEach((port) => {\n      const value = port.default;\n      if (value !== undefined) {\n        graph.addInitial(value, id, port.name);\n      }\n    });\n    graph.endTransaction('addnode');\n  },\n  searchChanged() {\n    if (typeof this.search !== 'string') {\n      return;\n    }\n    if (!this.editor) {\n      return;\n    }\n    const library = this.editor.getLibrary();\n    if (!library) {\n      return;\n    }\n    const search = this.search.toLowerCase();\n    const components = Object.keys(library).map((name) => this.editor.getComponent(name));\n    const matching = components.filter((component) => {\n      if (component.unnamespaced) {\n        // Skip the non-namespaced variants from results\n        return false;\n      }\n      // First find all components matching the search\n      if (search === '') {\n        // Empty search, all components match\n        return true;\n      }\n      if (component.name.toLowerCase().indexOf(search) !== -1) {\n        // Component name matches\n        return true;\n      }\n      if (typeof component.description === 'string' && component.description.toLowerCase().indexOf(search) !== -1) {\n        // Component description matches\n        return true;\n      }\n      return false;\n    }).filter((component) => {\n      // Then filter out components we're not supposed to use\n      if (!component.subgraph) {\n        // Elementary components can always be used\n        return true;\n      }\n      const nameParts = component.name.split('/');\n      if (nameParts[0] === this.project.id || nameParts[0] === this.project.namespace) {\n        for (let i = 0; i < this.graphs.length; i += 1) {\n          if (this.graphs[i].name === nameParts[1]\n            || this.graphs[i].properties.id === nameParts[1]) {\n            // Prevent circular dependencies\n            return false;\n          }\n        }\n      }\n      return true;\n    });\n    // timeout required because events fired by polymer that are received\n    // by graph router need to clean up before the graph receives another event\n    window.setTimeout(() => {\n      const addNode = this.addNode.bind(this);\n      this.fire('result', matching.map((component) => ({\n        label: component.name,\n        icon: component.icon || 'cog',\n        description: component.description,\n        action() {\n          addNode(component);\n        },\n      })));\n    }, 0);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Published <span>{{direction}}</span> port <span>{{publicport}}</span></h1>\n      <form>\n        <label>\n          Port name\n          <input type=\"text\" value=\"{{name::input}}\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Rename</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-exported-inspector',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    direction: {\n      type: String,\n      value: 'input',\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    privateport: {\n      value: null,\n      notify: true,\n    },\n    publicport: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.publicport;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    if (!this.name) {\n      this.canSend = false;\n      return;\n    }\n    if (this.direction === 'input' && (this.name === 'start' || this.name === 'graph')) {\n      // Reserved port names\n      this.canSend = false;\n      return;\n    }\n    this.canSend = true;\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.direction === 'input') {\n      if (this.name === 'start' || this.name === 'graph') {\n        return;\n      }\n      this.graph.renameInport(this.publicport, this.name);\n    } else {\n      this.graph.renameOutport(this.publicport, this.name);\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { PolymerElement, html } from '@polymer/polymer';\nimport icons from '../src/icons';\nimport './noflo-icon';\n\nclass NoFloIconSelector extends PolymerElement {\n  static get template() {\n    return html`\n    <style>\n    :host {\n      display: block;\n    }\n    ul.icons {\n      padding: 0px;\n      margin: 0px;\n      list-style: none;\n    }\n    ul.icons li {\n      display: inline-block;\n      width: 18px;\n      height: 18px;\n      font-size: 18px;\n      padding: 0px;\n      margin: 0px;\n      text-align: center;\n      overflow: hidden;\n      background-color: var(--noflo-ui-text);\n      color: var(--noflo-ui-background);\n      cursor: pointer;\n      transition: background-color 0.3s ease-in-out;\n      border-radius: 2px;\n      margin-right: 2px\n      margin-bottom: 2px;\n    }\n    ul.icons li.selected,\n    ul.icons li:hover {\n      background-color: hsl(190, 100%, 30%);\n      color: white;\n    }\n    </style>\n    <ul class=\"icons\">\n      <template is=\"dom-repeat\" items=\"{{icons}}\" as=\"icon\">\n        <li data-id\\$=\"[[icon]]\" class\\$=\"[[_selectedClass(icon, selected)]]\" on-click=\"selectIcon\">\n          <noflo-icon icon=\"[[icon]]\" title=\"[[icon]]\"></noflo-icon>\n        </li>\n      </template>\n    </ul>\n`;\n  }\n\n  static get is() {\n    return 'noflo-icon-selector';\n  }\n\n  static get properties() {\n    return {\n      icons: {\n        type: Array,\n        value() {\n          return [];\n        },\n      },\n      selected: {\n        type: String,\n        notify: true,\n      },\n    };\n  }\n\n  constructor() {\n    super();\n    this.icons = Object.keys(icons.getIcons());\n  }\n\n  selectIcon(event) {\n    this.selected = event.currentTarget.getAttribute('data-id');\n  }\n\n  _selectedClass(icon, selected) {\n    if (icon === selected) {\n      return 'selected';\n    }\n    return '';\n  }\n}\ncustomElements.define(NoFloIconSelector.is, NoFloIconSelector);\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { Graph } from 'fbp-graph';\nimport './noflo-type-selector';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new graph</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Graph name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolGraph\" required=\"\">\n        </label>\n        <label>\n          Graph type\n          <select name=\"type\" value=\"{{mainGraph::input}}\">\n            <option value=\"true\" selected\\$=\"[[_isSelectedMainGraph('true', mainGraph)]]\">Main graph</option>\n            <option value=\"false\" selected\\$=\"[[_isSelectedMainGraph('false', mainGraph)]]\">Subgraph</option>\n          </select>\n        </label>\n        <label>\n          Graph description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Runtime\n          <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-new-graph',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    mainGraph: {\n      type: String,\n      value: 'true',\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    type: {\n      type: String,\n      value: 'noflo-browser',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.project) {\n      if (!this.project.graphs || !this.project.components) {\n        return;\n      }\n      duplicates = this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newGraph');\n    }\n    const graph = new Graph(this.name);\n    graph.setProperties({\n      description: this.description,\n      project: this.project.id,\n      id: `${this.project.id}/${this.name}`,\n      icon: this.icon,\n      main: (this.mainGraph === 'true'),\n      environment: { type: this.type },\n    });\n    this.fire('new', graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _isSelectedMainGraph(value, current) {\n    return value === current;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>\n        <template is=\"dom-if\" if=\"{{group}}\">\n        <span>{{group}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{!group}}\">\n        New\n        </template>\n        group containing <span>{{nodes.length}}</span> nodes\n      </h1>\n      <form>\n        <label>\n          Group name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"processing\" required=\"\">\n        </label>\n        <label>\n          Group description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"The nodes that process things\" required=\"\">\n        </label>\n        <div class=\"toolbar\">\n          <button on-click=\"send\">\n            <template is=\"dom-if\" if=\"{{group}}\">\n            Rename\n            </template>\n            <template is=\"dom-if\" if=\"{{!group}}\">\n            Create\n            </template>\n          </button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-group-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    group: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    groupdescription: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.name = this.group;\n    this.description = this.groupdescription;\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (this.group) {\n      if (this.name !== this.group) {\n        this.graph.renameGroup(this.group, this.name);\n      }\n      if (this.description !== this.groupdescription) {\n        this.graph.setGroupMetadata(this.group, { description: this.description });\n      }\n    } else {\n      this.graph.addGroup(this.name, this.nodes, { description: this.description });\n    }\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  is: 'the-card-stack',\n  properties: { type: { notify: true } },\n  enteredView() {\n    this.observeChanges();\n  },\n  leftView() {\n    if (this.observer) {\n      this.observer.disconnect();\n    }\n  },\n  observeChanges() {\n    this.observer = new MutationObserver(this.updateVisibility.bind(this));\n    this.observer.observe(this, {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n  updateVisibility() {\n    if (this.childElementCount === 0) {\n      PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './the-card-stack';\n\nPolymer({\n  _template: html`\n    <slot name=\"header\"></slot>\n    <slot></slot>\n`,\n\n  is: 'the-card',\n  properties: { type: { notify: true } },\n\n  enteredView() {\n    this.fire('show', this);\n  },\n\n  leftView() {\n    this.fire('hide', this);\n  },\n\n  addTo(parent, prepend) {\n    const stacks = parent.getElementsByTagName('the-card-stack');\n    for (let i = 0; i < stacks.length; i += 1) {\n      if (stacks[i].type === this.type) {\n        PolymerDom(stacks[i]).appendChild(this);\n        return;\n      }\n    }\n    const stack = document.createElement('the-card-stack');\n    stack.type = this.type;\n    PolymerDom(stack).appendChild(this);\n    if (prepend && parent.childElementCount > 0) {\n      PolymerDom(parent).insertBefore(stack, PolymerDom(parent).firstChild);\n      return;\n    }\n    PolymerDom(parent).appendChild(stack);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        position: fixed;\n        overflow: hidden;\n      }\n    </style>\n    <slot name=\"header\"></slot>\n    <slot></slot>\n    <slot name=\"footer\"></slot>\n`,\n\n  is: 'the-panel',\n\n  properties: {\n    automatic: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'automaticChanged',\n    },\n    edge: {\n      type: String,\n      value: 'left',\n      notify: true,\n      observer: 'edgeChanged',\n    },\n    handle: {\n      type: Number,\n      value: 0,\n      notify: true,\n      observer: 'handleChanged',\n    },\n    open: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'openChanged',\n    },\n    size: {\n      type: Number,\n      value: 200,\n      notify: true,\n      observer: 'sizeChanged',\n    },\n  },\n\n  toggleOpen(open) {\n    this.open = open;\n    this.updateVisibility();\n  },\n\n  enteredView() {\n    this.cleanUpLocation();\n    this.automaticChanged();\n    this.updateVisibility();\n  },\n\n  leftView() {\n    this.unobserve();\n  },\n\n  edgeChanged() {\n    this.updateVisibility();\n  },\n\n  sizeChanged() {\n    this.updateVisibility();\n  },\n\n  handleChanged() {\n    this.updateVisibility();\n  },\n\n  openChanged() {\n    this.updateVisibility();\n  },\n\n  automaticChanged() {\n    if (this.automatic) {\n      this.observeChanges();\n    } else {\n      this.unobserve();\n    }\n  },\n\n  getHeader() {\n    return PolymerDom(this).querySelector('header');\n  },\n\n  getMain() {\n    return PolymerDom(this).querySelector('main');\n  },\n\n  getFooter() {\n    return PolymerDom(this).querySelector('footer');\n  },\n\n  handleClicked(event) {\n    if (this.automatic) {\n      return;\n    }\n    if (event.target !== this) {\n      return;\n    }\n    if (this.open) {\n      this.open = false;\n      return;\n    }\n    this.open = true;\n  },\n\n  observeChanges() {\n    this.observer = new MutationObserver(this.handleMutations.bind(this));\n    this.observer.observe(this.getMain(), {\n      subtree: false,\n      childList: true,\n      attributes: false,\n      characterData: false,\n    });\n  },\n\n  unobserve() {\n    if (!this.observer) {\n      return;\n    }\n    this.observer.disconnect();\n    this.observer = null;\n  },\n\n  handleMutations() {\n    if (this.getMain().childElementCount === 0) {\n      this.open = false;\n    } else {\n      this.open = true;\n    }\n  },\n\n  getPositionDimension() {\n    return this.edge;\n  },\n\n  getSizeDimensions() {\n    switch (this.edge) {\n      case 'left':\n      case 'right':\n        return [\n          'width',\n          'height',\n        ];\n      case 'top':\n      case 'bottom':\n        return [\n          'height',\n          'width',\n        ];\n      default:\n        throw new Error(`Unknown edge ${this.edge}`);\n    }\n  },\n\n  cleanUpLocation() {\n    this.set('style.left', '');\n    this.set('style.right', '');\n    this.set('style.top', '');\n    this.set('style.bottom', '');\n  },\n\n  updateVisibility() {\n    const sizeDimensions = this.getSizeDimensions();\n    this.set(`style.${sizeDimensions[1]}`, '100%');\n    this.set(`style.${sizeDimensions[0]}`, `${this.size}px`);\n    let outside = 0;\n    if (!this.open) {\n      outside = (this.size - this.handle) * -1;\n    }\n    this.set(`style.${this.getPositionDimension()}`, `${outside}px`);\n  },\n\n  listeners: { click: 'handleClicked' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-exported-inspector';\nimport './noflo-new-graph';\nimport './noflo-group-inspector';\nimport './the-card';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      #contextsection {\n        position: fixed;\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        left: 36px;\n        top: 72px;\n        width: calc(72px * 4);\n        max-height: calc(100% - 72px);\n        box-sizing: border-box;\n        display: block;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        overflow-x: visible;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-top: 72px;\n        top: 0px;\n        border-left-width: 1px;\n        height: 100vh;\n        padding-left: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f188';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        left: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: w-resize;\n      }\n      the-panel footer {\n        position: absolute;\n        bottom: 0px;\n        right: 0px;\n      }\n    </style>\n    <section id=\"contextsection\"></section>\n`,\n\n  is: 'noflo-context',\n\n  properties: {\n    component: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'componentChanged',\n    },\n    edge: { notify: true },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    editor: {\n      value: null,\n      observer: 'editorChanged',\n    },\n    errors: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    help: { value: null },\n    node: { notify: true },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    readonly: { notify: true },\n    runtime: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      notify: true,\n    },\n  },\n\n  attached() {\n    this.contextBar = this.$.contextsection;\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    // Workaround for https://github.com/Polymer/PointerEvents/issues/134\n    document.addEventListener('touchstart', () => {\n    });\n    this.help = PolymerDom(document).querySelector('noflo-help');\n  },\n\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n\n  getpanel() {\n    this.fire('contextpanel', this.$.contextsection);\n  },\n\n  editorChanged() {\n    if (!this.editor) {\n      return;\n    }\n    const emptyOnReadOnly = (defaultMenu) => {\n      if (this.readonly) {\n        return {};\n      }\n      return defaultMenu;\n    };\n    this.editor.addMenuCallback('main', emptyOnReadOnly);\n    this.editor.addMenuCallback('edge', emptyOnReadOnly);\n    this.editor.addMenuCallback('node', (defaultMenu, options) => {\n      const localMenu = emptyOnReadOnly(defaultMenu, options);\n      if (!options.item.component) {\n        return localMenu;\n      }\n      if (!this.canGetSource(options.item.component)) {\n        return localMenu;\n      }\n      localMenu.n4 = {\n        icon: 'arrow-circle-o-up',\n        iconLabel: 'open',\n        action: (graph, itemKey, item) => {\n          if (typeof ga === 'function') {\n            ga('send', 'event', 'menu', 'click', 'openNode');\n          }\n          let hash = window.location.href.split('#')[1] || '';\n          if (graph === this.graphs[0] && graph.properties.id) {\n            const currentGraphId = encodeURIComponent(graph.properties.id);\n            if (hash.indexOf(currentGraphId) === -1) {\n              hash += `/${currentGraphId}`;\n            }\n          }\n          window.location.hash = `${hash}/${encodeURIComponent(item.id)}`;\n        },\n      };\n      return localMenu;\n    });\n    this.editor.addMenuCallback('nodeInport', emptyOnReadOnly);\n    this.editor.addMenuCallback('nodeOutport', emptyOnReadOnly);\n    this.editor.addMenuCallback('graphInport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'input';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('graphOutport', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        n4: {\n          icon: 'pencil-square-o',\n          iconLabel: 'rename',\n          action: (graph, itemKey, item) => {\n            const dialog = document.createElement('noflo-exported-inspector');\n            dialog.graph = this.graphs[this.graphs.length - 1];\n            dialog.publicport = itemKey;\n            dialog.privateport = item;\n            dialog.direction = 'output';\n            PolymerDom(document.body).appendChild(dialog);\n          },\n        },\n      };\n    });\n    this.editor.addMenuCallback('group', emptyOnReadOnly);\n    this.editor.addMenuCallback('selection', (defaultMenu, options) => {\n      if (this.readonly) {\n        return emptyOnReadOnly(defaultMenu, options);\n      }\n      return {\n        ...defaultMenu,\n        e4: {\n          icon: 'sitemap',\n          iconLabel: 'graph',\n          action: this.subgraph.bind(this),\n        },\n        w4: {\n          icon: 'square-o',\n          iconLabel: 'group',\n          action: this.group.bind(this),\n        },\n      };\n    });\n  },\n\n  edgesChanged() {\n    this.fire('edges', this.edges);\n  },\n\n  componentChanged() {\n    if (this.component && typeof this.component === 'object' && !this.component.name) {\n      this.component = null;\n    }\n    if (this.component && typeof ga === 'function') {\n      ga('send', 'event', 'url', 'navigation', 'openComponent');\n    }\n    this.fire('component', this.component);\n  },\n\n  group(graph, itemKey, item) {\n    if (this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createGroup');\n    }\n    // See if the nodes are already part of a group\n    let group = '';\n    let description = '';\n    const selectedNodes = item.nodes;\n    selectedNodes.sort();\n    graph.groups.forEach((grp) => {\n      const grpNodes = JSON.parse(JSON.stringify(grp.nodes));\n      grpNodes.sort();\n      if (grpNodes.join(',') === selectedNodes.join(',')) {\n        group = grp.name;\n        description = grp.metadata.description;\n      }\n    });\n    const dialog = document.createElement('noflo-group-inspector');\n    dialog.group = group;\n    dialog.groupdescription = description;\n    dialog.nodes = selectedNodes;\n    dialog.graph = graph;\n    PolymerDom(document.body).appendChild(dialog);\n  },\n\n  subgraph(currentGraph, itemKey, item) {\n    if (!this.project || this.readonly) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'menu', 'click', 'createSubgraph');\n    }\n    // Ask user to name the new subgraph\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.runtimes = this.runtimes;\n    dialog.type = currentGraph.properties.environment.type;\n    dialog.project = this.project;\n    dialog.mainGraph = 'false';\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (event) => {\n      // Register new subgraph\n      this.fire('newsubgraph', {\n        currentGraph,\n        subgraph: event.detail,\n        nodes: item.nodes,\n        project: this.project,\n      });\n      // Editor deselect, hide node inspectors\n      if (this.editor) {\n        this.editor.selectedNodes = [];\n      }\n    });\n  },\n\n  setHelp() {\n    // If manually triggered, show something relevant\n    if (!this.help) {\n      return;\n    }\n    this.set('help.headline', `${process.env.NOFLO_APP_TITLE} graph editor`);\n    this.set('help.text', 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n  },\n\n  showHelp(graph) {\n    if (!this.help) {\n      return;\n    }\n    this.help.show(`${process.env.NOFLO_APP_TITLE} graph editor`, 'Here you can edit your Flow-Based graphs and run them. To add nodes, search for components using the search area on the top-left corner.');\n    graph.once('addNode', () => {\n      this.help.close();\n    });\n  },\n\n  libraryMatch(library, project) {\n    const namespace = project.namespace || project.id;\n    if (library === namespace) {\n      return true;\n    }\n    if (library === namespace.replace('noflo-')) {\n      return true;\n    }\n    return false;\n  },\n\n  canGetSource(component) {\n    const componentParts = component.split('/');\n    if (componentParts.length > 1\n      && this.project\n      && this.libraryMatch(componentParts.shift(), this.project)) {\n      // Local component, see if it is available\n      for (let i = 0; i < this.project.graphs.length; i += 1) {\n        if (this.project.graphs[i].name === componentParts[0]) {\n          return true;\n        }\n        if (this.project.graphs[i].properties.id === componentParts[0]) {\n          return true;\n        }\n      }\n      for (let i = 0; i < this.project.components.length; i += 1) {\n        if (this.project.components[i].name === componentParts[0]) {\n          return true;\n        }\n      }\n    }\n    // Otherwise we check if Runtime can get it for us\n    if (!this.runtime.definition || !this.runtime.definition.capabilities) {\n      return false;\n    }\n    if (this.runtime.definition.capabilities.indexOf('component:getsource') === -1) {\n      return false;\n    }\n    return this.runtime.status.online;\n  },\n});\n","import React from 'react';\n\nfunction TestStatus(props) {\n  const state = {\n    passed: 0,\n    failed: 0,\n    skipped: 0,\n    total: 0,\n  };\n  props.suites.forEach((suite) => {\n    suite.cases.forEach((testCase) => {\n      state.total += 1;\n      if (suite.skip || testCase.skip) {\n        state.skipped += 1;\n        return;\n      }\n      if (testCase.passed === true) {\n        state.passed += 1;\n      }\n      if (testCase.passed === false) {\n        state.failed += 1;\n      }\n    });\n  });\n  return (\n    <ul className=\"test-status\">\n      <li className=\"pass\">{state.passed}</li>\n      <li className=\"fail\">{state.failed}</li>\n      <li className=\"skip\">{state.skipped}</li>\n      <li className=\"total\">{state.total}</li>\n    </ul>\n  );\n}\n\nexport default TestStatus;\n","import React from 'react';\n\nfunction stateToClass(testCase, suite) {\n  if (testCase.skip || suite.skip) {\n    return 'skip';\n  }\n  if (testCase.passed === true) {\n    return 'pass';\n  }\n  if (testCase.passed === false) {\n    return 'fail';\n  }\n  return 'pending';\n}\n\nfunction TestStatusDetailed(props) {\n  return (\n    <ul>\n      {\n        props.suites.map((suite) => (\n          <li className=\"testsuite\">\n            <div className=\"suite-header\">\n              <label className=\"name\">{suite.name}</label>\n              <label className=\"topic\">{suite.topic}</label>\n            </div>\n            <ul>\n              {\n                suite.cases.map((testCase) => (\n                  <li className={stateToClass(testCase, suite)}>\n                    <div className=\"testcase\">\n                      <label className=\"name\">{testCase.name}</label>\n                      <label className=\"assertion\">{testCase.assertion}</label>\n                      <label className=\"error\">{testCase.error || ''}</label>\n                    </div>\n                  </li>\n                ))\n              }\n            </ul>\n          </li>\n        ))\n      }\n    </ul>\n  );\n}\n\nexport default TestStatusDetailed;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Launch noflo-browser device</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"text\" value=\"{{baseApp::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"info\">\n        <div><a id=\"runtimeLink\" href\\$=\"{{runtimeUrl}}\">Launch</a></div>\n        <div><img id=\"qrcode\" src=\"{{qrCodeUrl}}\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-browserdebug',\n\n  properties: {\n    baseApp: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser-app/main.html',\n    },\n    graph: { notify: true },\n    qrCodeUrl: {\n      type: String,\n      value: '',\n    },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const signaller = 'https://api.flowhub.io';\n    const id = uuid();\n    const address = `${signaller}#${id}`;\n    const params = `?fbp_noload=true&fbp_protocol=webrtc&fbp_address=${encodeURIComponent(address)}`;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1931',\n      // FIXME: correct\n      secret: 'my-super-secret',\n      // FIXME: correct\n      label: 'noflo-browser live debug',\n      description: 'On device debugging project',\n      graph: this.graph.properties.id,\n      protocol: 'webrtc',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n    const appDebugUrl = this.baseApp + params;\n    const qrBase = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=';\n    this.qrCodeUrl = qrBase + encodeURIComponent(appDebugUrl);\n    this.runtimeUrl = appDebugUrl;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport { v4 as uuid } from 'uuid';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #runtimeLink {\n        width: 100%;\n      }\n      #qrcode {\n        width: 300px;\n        height: 300px;\n      }\n      .info {\n        clear: both;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Open noflo-browser runtime in preview area</h1>\n      <label>\n        <span>Base application</span>\n        <input type=\"url\" value=\"{{runtimeUrl::input}}\" on-change=\"generateRuntimeInfo\">\n      </label>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n        <button on-click=\"connectRuntime\">Connect</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-customiframe',\n\n  properties: {\n    graph: { notify: true },\n    runtime: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    runtimeUrl: {\n      type: String,\n      value: 'https://noflojs.org/noflo-browser/everything.html',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    this.generateRuntimeInfo();\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  generateRuntimeInfo() {\n    const id = uuid();\n    // TODO: make a hash of the URL instead??\n    const params = '?fbp_noload=true&fbp_protocol=iframe';\n    const address = this.runtimeUrl + params;\n    const runtime = {\n      id,\n      seenHoursAgo: 1,\n      user: '3f3a8187-0931-4611-8963-239c0dff1932',\n      // FIXME: correct\n      label: 'noflo-browser iframe',\n      description: 'running in iframe',\n      graph: this.graph.properties.id,\n      protocol: 'iframe',\n      type: 'noflo-browser',\n      address,\n    };\n    this.runtime = runtime;\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  connectRuntime() {\n    this.fire('runtime', this.runtime);\n    this.close();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport runtimelib from '../src/runtime';\nimport './noflo-runtime-browserdebug';\nimport './noflo-runtime-customiframe';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      ul.runtimes {\n        padding: 0px;\n        margin-left: -9px;\n        margin-right: -9px;\n        list-style: none;\n        margin-top: 18px;\n        margin-bottom: 18px;\n      }\n      ul.runtimes li {\n        width: 274px;\n        height: 105px;\n        overflow: hidden;\n        display: inline-block;\n        text-align: center;\n        background-color: hsl(192, 25%, 60%);\n        color: white;\n        transition: background-color 0.3s ease-in-out;\n        border-radius: 3px;\n        margin-right: 9px;\n        margin-left: 9px;\n        margin-bottom: 18px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.runtimes li.selected,\n      ul.runtimes li:hover {\n        background-color: hsl(190, 100%, 30%);\n        color: white;\n        cursor: default;\n      }\n      ul.runtimes li h2 {\n        position: absolute;\n        top: 36px;\n        line-height: 36px;\n        width: 180px;\n        text-transform: none;\n        font-size: 10px;\n        text-align: left;\n        white-space: nowrap;\n        left: 18px;\n        padding: 0px;\n        margin: 0px;\n        text-overflow: ellipsis;\n        overflow: hidden;\n      }\n      ul.runtimes li p {\n        position: absolute;\n        top: 53px;\n        left: 18px;\n        width: 180px;\n        text-transform: uppercase;\n        font-size: 8px;\n        text-align: left;\n        max-height: 36px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Select runtime for <span>{{graph.name}}</span></h1>\n      <template is=\"dom-if\" if=\"{{available.length}}\">\n        <ul class=\"runtimes modal-content\">\n          <template is=\"dom-repeat\" items=\"{{available}}\" as=\"runtime\">\n          <li on-click=\"selectRuntime\" data-id\\$=\"{{runtime.id}}\" class\\$=\"{{runtime.type}}\">\n            <h2>{{runtime.label}}</h2>\n            <p><span>{{runtime.address}}</span>.<br>Seen <span>{{runtime.seenHoursAgo}}</span>h ago</p>\n          </li>\n          </template>\n        </ul>\n      </template>\n      <template is=\"dom-if\" if=\"{{!available.length}}\">\n        <p>No compatible runtimes available.</p>\n      </template>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Cancel</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-selector',\n\n  properties: {\n    available: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    graph: { notify: true },\n    component: { notify: true },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    let type;\n    if (this.component) {\n      type = runtimelib.getComponentType(this.component);\n    }\n    if (this.graph) {\n      type = runtimelib.getGraphType(this.graph);\n    }\n    if (!type) {\n      type = 'all';\n    }\n    // Insert button to launch new runtime for noflo-browser\n    const launchNewBrowserRuntime = {\n      id: 'new-browser-runtime',\n      label: 'Launch new runtime',\n      address: 'WebRTC',\n    };\n    const customIframeRuntime = {\n      id: 'custom-iframe-address',\n      label: 'Custom iframe URL',\n      address: 'myapp.html',\n    };\n    const launchImgfloHerokuRuntime = {\n      id: 'imgflo-heroku-new',\n      label: 'New imgflo app on Heroku',\n      address: 'myapp.herokuapps.com',\n    };\n    if (type === 'noflo-browser') {\n      this.push('available', launchNewBrowserRuntime);\n      this.push('available', customIframeRuntime);\n    }\n    if (type === 'imgflo') {\n      this.push('available', launchImgfloHerokuRuntime);\n    }\n    this.runtimes.forEach((rt) => {\n      this.push('available', rt);\n    });\n    this.available.forEach(this.checkRuntimeSeen.bind(this));\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  // similiar to in noflo-main.html\n  checkRuntimeSeen(runtime) {\n    if (!runtime.seen) {\n      // eslint-disable-next-line no-param-reassign\n      runtime.seen = Date.now();\n    }\n    // eslint-disable-next-line no-param-reassign\n    runtime.seenHoursAgo = Math.floor(\n      (Date.now() - new Date(runtime.seen).getTime()) / (60 * 60 * 1000),\n    );\n    if (runtime.seenHoursAgo / 24 > 31) {\n      // We haven't seen this runtime in over a month, don't show it\n      const index = this.available.indexOf(runtime);\n      this.splice('available', index, 1);\n    }\n  },\n\n  selectRuntime(event) {\n    const id = event.currentTarget.getAttribute('data-id');\n    if (id === 'new-browser-runtime') {\n      // Launch new runtime instead of connect to existing\n      this.close();\n      this.debugOnDevice();\n      return;\n    } if (id === 'custom-iframe-address') {\n      // Add new iframe runtime for given address\n      this.close();\n      this.addIframeRuntime();\n      return;\n    } if (id === 'imgflo-heroku-new') {\n      this.close();\n      this.deployHeroku('https://github.com/jonnor/imgflo');\n    }\n    this.runtimes.forEach((runtime) => {\n      if (runtime.id === id) {\n        this.fire('runtime', runtime);\n        this.close();\n      }\n    });\n  },\n\n  debugOnDevice() {\n    this.debugOnDeviceModal = document.createElement('noflo-runtime-browserdebug');\n    this.set('debugOnDeviceModal.graph', this.graph);\n    this.debugOnDeviceModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.debugOnDeviceModal);\n  },\n\n  addIframeRuntime() {\n    this.addIframeModal = document.createElement('noflo-runtime-customiframe');\n    this.set('addIframeModal.graph', this.graph);\n    this.addIframeModal.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      this.fire('runtime', runtime);\n    });\n    PolymerDom(document.body).appendChild(this.addIframeModal);\n  },\n\n  deployHeroku(template) {\n    // Send user over to Heroku\n    // The deployed runtime will then have a link which takes them back to Flowhub\n    // TODO: inform the user about this process\n    const baseUrl = 'https://dashboard.heroku.com/new?template=';\n    document.location.href = baseUrl + encodeURIComponent(template);\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatusDetailed from '../src/components/TestStatusDetailed';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      #testlisting ul {\n        padding: 0px;\n      }\n      li .suite-header label.topic {\n        font-weight: bold;\n      }\n      li .suite-header label {\n        display: inline !important;\n        padding-right: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      li.testsuite {\n        margin-bottom: 1em;\n      }\n      li {\n        list-style: none;\n      }\n      li.testsuite li {\n        margin-left: 28px;\n      }\n      li label {\n        display: inline;\n        margin-top: 7px !important;\n      }\n      li label.assertion {\n        padding-left: 8px;\n      }\n      li label.error {\n        margin-bottom: 8px;\n        font-style: italic;\n        display: block;\n      }\n      li.pass {\n        color: hsl(135, 98%, 46%);\n        list-style: disc;\n      }\n      li.fail {\n        color: hsl(0, 98%, 46%);\n        list-style: square;\n      }\n      li.skip {\n        color: hsl( 60, 98%, 46%);\n        list-style: disc;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <div class=\"modal-content\">\n        <div id=\"testlisting\"></div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"close\">Close</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-runtime-testdetails',\n\n  properties: {\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    const container = this.shadowRoot.getElementById('testlisting');\n    ReactDOM.render(TestStatusDetailed({ suites: this.suites }), container);\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport TestStatus from '../src/components/TestStatus';\nimport './noflo-runtime-selector';\nimport './noflo-runtime-testdetails';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        padding-left: 18px;\n        box-sizing: border-box;\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n      }\n\n      #runtime_icon {\n        position: absolute;\n        right: 8px;\n        top: 0px;\n        font-size: 72px;\n        color: hsla(185, 100%, 75%, 0.1);\n      }\n\n      #teststatus {\n        position: absolute;\n        right: 0px;\n        z-index: 1;\n        width: 100px;\n      }\n      #teststatus ul {\n        margin: 0px;\n        padding: 0px;\n      }\n      #teststatus ul li {\n        display: inline;\n        padding-left: 8px;\n        line-height: 36px;\n      }\n      #teststatus ul li.pass {\n        color: hsl(135, 98%, 46%);\n      }\n      #teststatus ul li.fail {\n        color: hsl(0, 98%, 46%);\n      }\n      #teststatus ul li.skip {\n        color: hsl( 60, 98%, 46%);\n      }\n\n      h2 {\n        font-size: 14px;\n        width: 216px;\n        font-weight: normal;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n      }\n\n      button {\n        width: 36px;\n        height: 36px;\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text-highlight);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      #address h2 {\n        position: absolute;\n        left: 54px;\n        width: 180px;\n        top: 0px;\n        color: var(--noflo-ui-text);\n      }\n\n      #address, #address button {\n        color: #e70215;\n      }\n      .online#address, .online#address button {\n        color: #01d159;\n      }\n      #address button.clear {\n        position: absolute;\n        right: 0px;\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #runcontrol h2 {\n        position: absolute;\n        left: 54px;\n        top: 36px;\n      }\n      #runcontrol button {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #select {\n        text-align: center;\n      }\n      #select button.select {\n        width: auto;\n        height: auto;\n        background-color: hsl(190, 90%, 45%);\n        color: hsla(0, 0%, 0%, 0.98);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 36px;\n        padding-right: 36px;\n        margin: 0px;\n        margin-top: 18px;\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{runtime}}\">\n      <noflo-icon id=\"runtime_icon\" icon=\"{{icon}}\"></noflo-icon>\n      <div id=\"address\" class\\$=\"{{_computeOnlineClass(runtime.status.online)}}\">\n        <button title=\"Connect/Disconnect\" on-click=\"reconnect\"><noflo-icon icon=\"refresh\"></noflo-icon></button>\n        <h2>{{_produceAddress(runtime)}}</h2>\n        <button title=\"Change Runtime\" on-click=\"clearRuntime\" class=\"clear\"><noflo-icon icon=\"exchange\"></noflo-icon></button>\n      </div>\n      <div id=\"teststatus\" on-click=\"showTestDetails\"></div>\n      <div id=\"runcontrol\">\n        <template is=\"dom-if\" if=\"{{runtime.status.online}}\">\n          <template is=\"dom-if\" if=\"{{runtime.execution.running}}\">\n            <button title=\"Stop\" class=\"stop\" on-click=\"stop\"><noflo-icon icon=\"pause\"></noflo-icon></button>\n          </template>\n          <template is=\"dom-if\" if=\"{{!runtime.execution.running}}\">\n            <button title=\"Start\" class=\"start\" on-click=\"start\"><noflo-icon icon=\"play\"></noflo-icon></button>\n          </template>\n          <h2>{{runtime.execution.label}}</h2>\n        </template>\n      </div>\n    </template>\n    <template is=\"dom-if\" if=\"{{!runtime}}\">\n      <div id=\"select\">\n        <button on-click=\"selectRuntime\" class=\"select\">Select runtime</button>\n      </div>\n    </template>\n`,\n\n  is: 'noflo-runtime',\n\n  properties: {\n    icon: {\n      type: String,\n      value: 'asterisk',\n    },\n    graph: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      observer: 'graphChanged',\n    },\n    panel: { value: null },\n    iframe: { value: null },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    suites: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n  },\n\n  clearRuntime() {\n    // Disassociate old runtime with this project\n    this.runtime.definition.project = null;\n    this.fire('changed', this.runtime.definition);\n    this.set('runtime', null);\n    this.graphChanged();\n  },\n\n  graphChanged() {\n    if (this.runtimeSelector) {\n      if (PolymerDom(this.runtimeSelector).parentNode) {\n        PolymerDom(PolymerDom(this.runtimeSelector).parentNode).removeChild(this.runtimeSelector);\n      }\n      this.runtimeSelector = null;\n    }\n  },\n\n  runtimeChanged() {\n    const runtimeIframe = this.getRuntimeIframe();\n    if (this.iframe && this.iframe !== runtimeIframe) {\n      // Hide old iframe\n      this.hideCard();\n    }\n    this.iframe = runtimeIframe;\n    if (!this.runtime) {\n      return;\n    }\n    this.set('icon', this.getRuntimeIcon(this.runtime));\n    if (!this.runtime.status || !this.runtime.status.online) {\n      this.hideCard();\n    } else if (this.runtime.execution && this.runtime.execution.running) {\n      this.showCard();\n    }\n  },\n\n  start(event) {\n    event.preventDefault();\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.showCard();\n    this.fire('start', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  stop(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.runtime || !this.graph) {\n      return;\n    }\n    this.fire('stop', {\n      runtime: this.runtime.definition.id,\n      graph: this.graph,\n    });\n  },\n\n  reconnect(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    this.fire('reconnect', {\n      runtime: this.runtime.definition.id,\n    });\n  },\n\n  showTests(suites) {\n    this.suites = suites;\n    const container = this.shadowRoot.getElementById('teststatus');\n    ReactDOM.render(TestStatus({ suites: this.suites }), container);\n  },\n\n  showTestDetails() {\n    if (!this.suites || !this.suites.length) {\n      return;\n    }\n    const details = document.createElement('noflo-runtime-testdetails');\n    details.suites = this.suites;\n    PolymerDom(document.body).appendChild(details);\n  },\n\n  showCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'block');\n  },\n\n  hideCard() {\n    if (!this.iframe) {\n      return;\n    }\n    this.setIframeVisibility(this.iframe, 'none');\n  },\n\n  getRuntimeIframe() {\n    if (!this.runtime || !this.runtime.definition) {\n      return null;\n    }\n    if (!this.runtime.definition.querySelector) {\n      return null;\n    }\n    const iframe = document.body.querySelector(this.runtime.definition.querySelector);\n    if (!iframe) {\n      return null;\n    }\n    return iframe;\n  },\n\n  setIframeVisibility(iframe, visibility) {\n    // eslint-disable-next-line no-param-reassign\n    iframe.style.display = visibility;\n  },\n\n  selectRuntime() {\n    if (!this.graph && !this.component) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.runtimeSelector = document.createElement('noflo-runtime-selector');\n    this.set('runtimeSelector.runtimes', this.runtimes);\n    this.set('runtimeSelector.graph', this.graph);\n    this.set('runtimeSelector.component', this.component);\n    this.runtimeSelector.addEventListener('runtime', (event) => {\n      const runtime = event.detail;\n      if (this.graph) {\n        runtime.project = this.graph.properties.project;\n      }\n      if (this.component) {\n        runtime.project = this.component.project;\n      }\n      this.fire('changed', runtime);\n      setTimeout(() => {\n        this.fire('switchRuntime', runtime.id);\n      }, 10);\n    });\n    PolymerDom(document.body).appendChild(this.runtimeSelector);\n  },\n\n  getRuntimeIcon(runtime) {\n    if (!runtime || !runtime.definition || !runtime.definition.type) {\n      return 'cog';\n    }\n    switch (runtime.definition.type) {\n      case 'noflo-browser':\n        return 'html5';\n      case 'noflo-nodejs':\n        return 'cloud';\n      case 'noflo-gnome':\n        return 'desktop';\n      case 'microflo':\n        return 'lightbulb-o';\n      case 'javafbp':\n        return 'android';\n      case 'imgflo':\n        return 'picture-o';\n      case 'sndflo':\n        return 'music';\n      case 'flowtrace-replay':\n        return 'pause-circle';\n      default:\n        return 'cog';\n    }\n  },\n\n  _computeOnlineClass(online) {\n    return this.tokenList({ online });\n  },\n\n  _produceAddress(runtime) {\n    if (!runtime.definition) {\n      return '';\n    }\n    if (runtime.definition.protocol === 'webrtc') {\n      return `WebRTC P2P ${runtime.definition.id}`;\n    }\n    return runtime.definition.address;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","/*\n\n* Wraps the-graph-thumb with a current view bounding box\n* Observes changes from attached instance of the-graph-editor\n\n*/\nimport { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport TheGraph from 'the-graph';\nimport './the-graph-thumb';\n\nPolymer({\n  _template: html`\n    <style>\n      #thumb,\n      #outcanvas {\n        position: absolute;\n        top: 0;\n        left: 0;\n        overflow: visible;\n      }\n      #viewrect {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 200px;\n        height: 150px;\n        border: 1px solid hsla(190, 100%, 80%, 0.4);\n        border-style: dotted;\n      }\n    </style>\n    <the-graph-thumb id=\"thumb\" graph=\"{{graph}}\" thumbrectangle=\"{{thumbrectangle}}\" width=\"{{width}}\" height=\"{{height}}\" thumbscale=\"{{thumbscale}}\" theme=\"{{theme}}\">\n    </the-graph-thumb>\n    <canvas id=\"outcanvas\" width=\"{{width}}\" height=\"{{height}}\" style=\"position:absolute;top:0;left:0;\"></canvas>\n    <div id=\"viewrect\"></div>\n`,\n\n  is: 'the-graph-nav',\n\n  properties: {\n    backgroundColor: {\n      type: String,\n      value: 'hsla(184, 8%, 75%, 0.9)',\n    },\n    graph: { notify: true },\n    height: {\n      type: Number,\n      value: 150,\n      notify: true,\n    },\n    hide: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'hideChanged',\n    },\n    outsideFill: {\n      type: String,\n      value: 'hsla(0, 0%, 0%, 0.4)',\n    },\n    theme: {\n      notify: true,\n      observer: 'themeChanged',\n    },\n    thumbrectangle: { observer: 'thumbrectangleChanged' },\n    thumbscale: {\n      type: Number,\n      value: 1,\n      observer: 'thumbscaleChanged',\n    },\n    view: { observer: 'viewChanged' },\n    viewrectangle: { observer: 'viewrectangleChanged' },\n    width: {\n      type: Number,\n      value: 200,\n      notify: true,\n    },\n  },\n\n  ready() {\n    this.viewrectangle = [\n      0,\n      0,\n      500,\n      500,\n    ];\n    this.scaledviewrectangle = [\n      0,\n      0,\n      200,\n      150,\n    ];\n    this.theme = 'dark';\n  },\n\n  attached() {\n    this.set('style.overflow', 'hidden');\n    this.set('style.cursor', 'move');\n    this.set('style.width', `${this.width}px`);\n    this.set('style.height', `${this.height}px`);\n  },\n\n  viewChanged(_, view) {\n    if (!view) {\n      return;\n    }\n    const x = view.pan[0];\n    const y = view.pan[1];\n    this.viewrectangle = [-x, -y, view.width, view.height];\n    this.scale = view.scale;\n  },\n\n  themeChanged() {\n    const style = TheGraph.nav.calculateStyleFromTheme(this.theme);\n    this.backgroundColor = style.backgroundColor;\n    this.viewBoxBorder = style.viewBoxBorder;\n    this.viewBoxBorder2 = style.viewBoxBorder2;\n    this.outsideFill = style.outsideFill;\n    this.set('style.backgroundColor', this.backgroundColor);\n    // Redraw rectangle\n    this.viewrectangleChanged();\n  },\n\n  viewrectangleChanged() {\n    if (!this.viewrectangle || !this.viewrectangle.length) {\n      return;\n    }\n    // Canvas to grey out outside view\n    const context = this.$.outcanvas.getContext('2d');\n    const properties = {\n      width: this.width,\n      height: this.height,\n      scale: this.scale,\n      thumbscale: this.thumbscale,\n      thumbrectangle: this.thumbrectangle,\n      viewrectangle: this.viewrectangle,\n      viewBoxBorder: this.viewBoxBorder,\n      viewBoxBorder2: this.viewBoxBorder2,\n      outsideFill: this.outsideFill,\n    };\n    const nav = TheGraph.nav.render(context, this.$.viewrect, properties);\n    this.hide = nav.hide;\n  },\n\n  // this.scaledviewrectangle = [x, y, w, h];\n  hideChanged() {\n    if (this.hide) {\n      this.set('style.display', 'none');\n    } else {\n      this.set('style.display', 'block');\n    }\n  },\n\n  thumbscaleChanged() {\n    this.viewrectangleChanged();\n  },\n\n  thumbrectangleChanged() {\n    // Binding this from the-graph-thumb to know the dimensions rendered\n    const w = this.thumbrectangle[2];\n    const h = this.thumbrectangle[3];\n    this.thumbscale = w > h ? this.width / w : this.height / h;\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { Journal } from 'fbp-graph';\nimport { IDBJournalStore } from '../src/JournalStore';\nimport './the-graph-nav';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      #controls {\n        display: flex;\n        justify-content: space-between;\n        flex-direction: row;\n        position: fixed;\n        right: 0px;\n        bottom: 36px;\n        width: 288px;\n        height: 144px;\n        color: var(--noflo-ui-text-highlight);\n        box-sizing: border-box;\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px -1px;\n        border-top: 1px solid var(--noflo-ui-border);\n      }\n      #controls #buttons {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n      }\n\n      #controls button {\n        line-height: 36px;\n        border: none;\n        background-color: transparent;\n        font-size: 14px;\n        width: 36px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: pointer;\n      }\n      #controls button.disabled {\n        color: rgba(179, 222, 230, 0.2);\n      }\n    </style>\n    <div id=\"controls\">\n      <the-graph-nav id=\"nav\" width=\"252\" height=\"144\" graph=\"{{graph}}\" hide=\"{{hidenav}}\"></the-graph-nav>\n      <div id=\"buttons\">\n      <template is=\"dom-if\" if=\"{{graph}}\">\n        <button title=\"Undo\" on-click=\"undo\" class\\$=\"{{_computeClass(canUndo)}}\">\n          <noflo-icon icon=\"undo\"></noflo-icon>\n        </button>\n        <template is=\"dom-if\" if=\"{{klay}}\">\n          <button title=\"Autolayout\" class=\"autolayout\" on-click=\"autolayout\">\n            <noflo-icon icon=\"magic\"></noflo-icon>\n          </button>\n        </template>\n        <button title=\"Redo\" on-click=\"{{_computeClass2(canRedo)}}\" class\\$=\"{{_computeClass(canRedo)}}\">\n          <noflo-icon icon=\"repeat\"></noflo-icon>\n        </button>\n      </template>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-journal',\n\n  properties: {\n    canRedo: {\n      type: Boolean,\n      value: false,\n    },\n    canUndo: {\n      type: Boolean,\n      value: false,\n    },\n    db: {\n      value: null,\n      notify: true,\n      observer: 'dbChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n      observer: 'editorChanged',\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    hidenav: {\n      type: Boolean,\n      value: false,\n      observer: 'hidenavChanged',\n    },\n    klay: {\n      type: Boolean,\n      value: false,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    panel: { notify: true },\n    returnTo: { value: null },\n  },\n\n  attached() {\n    this.klay = true;\n  },\n\n  editorChanged(newEditor) {\n    if (!newEditor) {\n      return;\n    }\n    // Connect nav and editor together\n    const { nav } = this.$;\n    const editor = newEditor;\n    editor.addEventListener('viewchanged', (e) => {\n      nav.view = e.detail;\n    });\n    nav.addEventListener('panto', (e) => {\n      const pan = e.detail;\n      if (pan.x !== editor.pan[0] || pan.y !== editor.pan[1]) {\n        editor.pan[0] = pan.x;\n        editor.pan[1] = pan.y;\n      }\n    });\n    nav.addEventListener('tap', () => {\n      editor.triggerFit();\n    });\n  },\n\n  graphChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  dbChanged() {\n    this.checkState();\n    this.connectJournal();\n  },\n\n  componentChanged() {\n    if (this.component && this.component.name) {\n      this.hidenav = true;\n    } else {\n      this.hidenav = false;\n    }\n  },\n\n  connectJournal() {\n    if (!this.graph || !this.graph.on || !this.db) {\n      return;\n    }\n    const positionedNodes = this.graph.nodes.filter((node) => {\n      if (!node.metadata) {\n        return false;\n      }\n      if (!node.metadata.x || !node.metadata.y) {\n        return false;\n      }\n      return true;\n    });\n    if (this.graph.nodes.length && !positionedNodes.length) {\n      setTimeout(() => {\n        this.autolayout();\n      }, 10);\n    }\n    if (!this.graph.properties.project || this.graph.journal || !this.db) {\n      return;\n    }\n    // Initialize persistent journal whenever needed\n    const store = new IDBJournalStore(this.graph, this.db);\n    store.init(() => {\n      this.graph.journal = new Journal(this.graph, undefined, store);\n      this.checkState();\n      this.graph.journal.store.on('transaction', () => {\n        this.checkState();\n      });\n    });\n  },\n\n  checkState() {\n    if (!this.graph || !this.graph.journal) {\n      this.canUndo = false;\n      this.canRedo = false;\n      return;\n    }\n    this.canUndo = this.graph.journal.canUndo();\n    this.canRedo = this.graph.journal.canRedo();\n  },\n\n  undo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.undo();\n    this.checkState();\n  },\n\n  redo(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.graph.journal) {\n      return;\n    }\n    this.graph.journal.redo();\n    this.checkState();\n  },\n\n  autolayout(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.graph || !this.klay) {\n      return;\n    }\n    this.editor.triggerAutolayout();\n  },\n\n  themeChanged(newTheme) {\n    this.$.nav.theme = newTheme;\n  },\n\n  hidenavChanged() {\n    if (this.hidenav) {\n      this.set('$.controls.style.width', '36px');\n    } else {\n      this.set('$.controls.style.width', '288px');\n    }\n  },\n\n  _computeClass(canUndo) {\n    return `undo ${this.tokenList({ disabled: !canUndo })}`;\n  },\n\n  _computeClass2(canRedo) {\n    return `redo ${this.tokenList({ disabled: !canRedo })}`;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"codemirror-styles\">\n      :host {\n        background-color: var(--noflo-ui-background);\n        overflow: hidden;\n      }\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      #code,\n      #tests {\n        display: block;\n        width: 50%;\n        height: 100%;\n        position: absolute;\n        left: 0px;\n        top: 36px;\n      }\n      #tests {\n        left: auto;\n        right: 0px;\n      }\n      #code h1,\n      #tests h1 {\n        margin: 0;\n        line-height: 36px;\n        padding-left: 36px;\n        font-size: 14px;\n        text-transform: uppercase;\n        color: var(--noflo-ui-text);\n      }\n      #code h1 {\n        text-align: right;\n      }\n    </style>\n    <section id=\"code\">\n      <h1>Implementation</h1>\n      <div id=\"code_editor\"></div>\n    </section>\n    <section id=\"tests\">\n      <h1>Tests</h1>\n      <div id=\"tests_editor\"></div>\n    </section>\n`,\n\n  is: 'noflo-component-editor',\n\n  properties: {\n    codeEditor: { value: null },\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    height: {\n      value: null,\n      notify: true,\n      observer: 'heightChanged',\n    },\n    project: { value: null },\n    runtime: { value: null },\n    spec: {\n      value: null,\n      observer: 'specChanged',\n    },\n    testsEditor: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    width: {\n      value: null,\n      notify: true,\n      observer: 'widthChanged',\n    },\n  },\n\n  ready() {\n    this.componentChanged();\n    const self = this;\n    this.debouncedComponentChange = _.debounce(() => {\n      if (!self.component) {\n        return;\n      }\n      self.fire('changed', self.component);\n    }, 1500);\n    this.debouncedSpecChange = _.debounce(() => {\n      if (!self.spec) {\n        return;\n      }\n      self.fire('specschanged', self.spec);\n    }, 1500);\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      this.set('style.display', 'none');\n      return;\n    }\n    this.set('spec', null);\n    if (this.project) {\n      this.project.specs.forEach((spec) => {\n        if (spec.name === this.component.name) {\n          this.set('spec', spec);\n        }\n      });\n      if (!this.spec) {\n        this.set('spec', {\n          name: this.component.name,\n          changed: false,\n          code: this.component.tests || '',\n          language: 'yaml',\n          project: this.component.project,\n          type: 'spec',\n        });\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.set('style.display', 'block');\n    PolymerDom(this.$.code_editor).innerHTML = '';\n    if (!this.component.code) {\n      this.set('component.code', this.getExampleCode());\n    }\n    const codeOptions = this.getMirrorOptions(this.component, this.component.code);\n    this.codeEditor = CodeMirror(this.$.code_editor, codeOptions);\n    this.codeEditor.on('change', () => {\n      this.set('component.code', this.codeEditor.getValue());\n      this.set('component.changed', true);\n      this.debouncedComponentChange();\n    });\n    this.setSize();\n  },\n\n  specChanged() {\n    PolymerDom(this.$.tests_editor).innerHTML = '';\n    if (!this.spec) {\n      return;\n    }\n    const testOptions = this.getMirrorOptions(this.spec, this.spec.code);\n    this.testsEditor = CodeMirror(this.$.tests_editor, testOptions);\n    this.testsEditor.on('change', () => {\n      this.set('spec.code', this.testsEditor.getValue());\n      this.set('spec.changed', true);\n      this.debouncedSpecChange();\n    });\n    this.setSize();\n  },\n\n  widthChanged() {\n    this.setSize();\n  },\n\n  heightChanged() {\n    this.setSize();\n  },\n\n  getMirrorOptions(component, value) {\n    const options = {\n      lineNumbers: true,\n      value: value || '',\n      mode: this.getMirrorMode(component.language),\n      theme: this.getMirrorTheme(),\n      readOnly: component.project ? false : 'nocursor',\n    };\n    const canLint = () => false;\n    if (canLint(component.language) && !options.readOnly) {\n      options.gutters = ['CodeMirror-lint-markers'];\n      options.lint = true;\n    }\n    return options;\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript') {\n      return language;\n    } if (language === 'typescript') {\n      return 'text/typescript';\n    } if (language === 'yaml') {\n      return 'text/x-yaml';\n    } if (language === 'python') {\n      return 'text/x-python';\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  getExampleCode() {\n    let runtimeType = null;\n    if (this.runtime && this.runtime && this.runtime.definition && this.runtime.definition.type) {\n      runtimeType = this.runtime.definition.type;\n    }\n    if (!runtimeType && this.project) {\n      runtimeType = this.project.type;\n    }\n    if (!runtimeType) {\n      return '';\n    }\n    const info = runtimeInfo[runtimeType];\n    let { language } = this.component;\n    if (language === 'es6') {\n      language = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[this.component.language]) {\n      template = info.componenttemplates[this.component.language];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.component.name,\n        description: this.component.description,\n        icon: this.component.icon,\n      });\n    }\n    return template;\n  },\n\n  themeChanged() {\n    if (!this.codeEditor || !this.testsEditor) {\n      return;\n    }\n    this.codeEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  setSize() {\n    if (!this.width || !this.height) {\n      return;\n    }\n    const width = (this.width - 90) / 2;\n    const height = this.height - 102;\n    if (this.codeEditor) {\n      this.codeEditor.setSize(width, height);\n      this.codeEditor.refresh();\n    }\n    if (this.testsEditor) {\n      this.testsEditor.setSize(width, height);\n      this.testsEditor.refresh();\n    }\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <ul class=\"toolbar2right\">\n      <template is=\"dom-repeat\" items=\"{{buttons}}\" as=\"button\">\n        <li>\n          <button on-click=\"clicked\" id=\"{{button.id}}\">\n            <noflo-icon icon=\"{{button.icon}}\" fallback=\"\"></noflo-icon>\n            <span>{{button.label}}</span>\n          </button>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-menu',\n\n  properties: {\n    buttons: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  clicked(event, detail, sender) {\n    event.preventDefault();\n    this.buttons.forEach((button) => {\n      if (button.id !== sender.getAttribute('id')) {\n        return;\n      }\n      this.fire('click', button.id);\n      if (button.search) {\n        this.fire('search', button.search);\n        return;\n      }\n      button.action();\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i class=\"fa fa-cog\"></i>\n          <h2>{{result.metadata.label}}</h2>\n          <p>{{result.component}}</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-graph-results',\n\n  properties: {\n    editor: {\n      value: null,\n      notify: true,\n    },\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'resultsChanged',\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  detached() {\n    this.editor = null;\n  },\n\n  resultsChanged() {\n    if (!this.editor) return;\n    if (!this.search || this.search.length < 1) {\n      this.set('editor.displaySelectionGroup', true);\n      this.set('editor.selectedNodes', []);\n    } else if (this.results) {\n      this.set('editor.displaySelectionGroup', !(this.results.length > 0));\n      this.set('editor.selectedNodes', this.results);\n    }\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result) {\n      return;\n    }\n    this.set('editor.displaySelectionGroup', true);\n    this.set('editor.selectedNodes', [result]);\n    this.editor.focusNode(result);\n    this.fire('resultclick', result);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      .search-results-header h1 {\n        color: var(--noflo-ui-border);\n        padding-left: 25px;\n        font-size: 12px !important;\n      }\n      .search-results-header i {\n        padding: 0;\n        margin: 0;\n        line-height: 36px;\n        width: 36px;\n        left: -10px;\n        position: absolute;\n        text-align: center;\n      }\n\n      .search-results-list {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        list-style: none;\n        margin: 0;\n        padding: 0;\n        background-color: var(--noflo-ui-background);\n        border-right: 1px solid var(--noflo-ui-border);\n      }\n\n      .search-results-item {\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        min-height: 36px;\n        position: relative;\n        cursor: cell;\n        padding-top: 18px !important;\n        padding-right: 12px !important;\n      }\n      .search-results-item i {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        top: 18px;\n        left: 0;\n        width: 36px;\n        text-align: center;\n        padding: 0;\n        margin: 0;\n        font: normal normal normal 14px/1 FontAwesomeSVG;\n      }\n      .search-results-item h2 {\n        color: var(--noflo-ui-text-highlight);\n        position: absolute;\n        margin: 0;\n        display: block;\n        left: 36px;\n        top: 18px;\n        height: 36px;\n        width: calc(100% - 36px);\n        font-size: 12px;\n        text-overflow: ellipsis;\n        text-transform: uppercase;\n        white-space: nowrap;\n        overflow-x: hidden;\n      }\n      .search-results-item p {\n        position: relative;\n        display: block;\n        left: 8px;\n        padding: 0px;\n        margin: 0px;\n        margin-top: 24px;\n        height: auto;\n        line-height: calc(36px / 3);\n        font-size: 10px;\n        color: var(--noflo-ui-text);\n        text-shadow: var(--noflo-ui-background) 0px 1px 1px;\n      }\n    </style>\n    <ul class=\"search-results-list\">\n      <template is=\"dom-repeat\" items=\"{{results}}\" as=\"result\" index-as=\"index\">\n        <li class=\"search-results-item\" on-click=\"clicked\" data-index\\$=\"{{index}}\">\n          <i><noflo-icon icon=\"[[result.icon]]\" fallback=\"cog\"></noflo-icon></i>\n          <h2>[[result.label]]</h2>\n          <p>[[result.description]]</p>\n        </li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-search-library-results',\n\n  properties: {\n    results: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    search: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n  },\n\n  clicked(event) {\n    event.preventDefault();\n    const index = event.currentTarget.getAttribute('data-index');\n    const result = this.results[index];\n    if (!result || !result.action) {\n      return;\n    }\n    this.fire('resultclick', result);\n    result.action();\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport CodeMirror from 'codemirror';\nimport 'codemirror/mode/xml/xml';\nimport 'codemirror/mode/javascript/javascript';\nimport 'codemirror/mode/css/css';\nimport 'codemirror/mode/vbscript/vbscript';\nimport 'codemirror/mode/coffeescript/coffeescript';\nimport 'codemirror/mode/clike/clike';\nimport 'codemirror/mode/htmlmixed/htmlmixed';\nimport 'codemirror/mode/smalltalk/smalltalk';\nimport 'codemirror/mode/yaml/yaml';\nimport 'codemirror/mode/python/python';\n\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport runtime from '../src/runtime';\nimport './noflo-type-selector';\nimport './noflo-icon';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\nimport './codemirror-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles codemirror-styles\">\n      .CodeMirror {\n        height: 100%;\n        cursor: text;\n      }\n      .CodeMirror-scroll {\n        height: 100%;\n      }\n      textarea {\n        height: 144px;\n      }\n      .editable-title {\n        font-size: 17px;\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        margin-bottom: 18px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n      }\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      div.hidden {\n        display: none;\n      }\n      a#download {\n        position: absolute;\n        right: 36px;\n        top: 36px;\n        width: 36px;\n        display: block;\n        height: 36px;\n        line-height: 36px;\n        background-color: rgb(0, 127, 153);\n        text-align: center;\n        border-radius: 6px;\n        color: white;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n      ul.tabs {\n        display: block;\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n        padding: 1px;\n        text-align: center;\n      }\n      ul.tabs li {\n        display: inline;\n        line-height: 36px;\n        font-size: 13px;\n        color: hsl(189, 50%, 25%);\n        text-decoration: none;\n        padding-left: 36px;\n        padding-right: 36px;\n        cursor: pointer;\n      }\n      ul.tabs li.selected {\n        border: none;\n        border-radius: 3px;\n        background-color: rgba(0, 42, 51, 0.498039);\n        color: white;\n        border-radius: 3px;\n        padding-top: 8px;\n        padding-bottom: 9px;\n        cursor: default;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <input type=\"text\" on-keydown=\"checkUpdateName\" on-blur=\"updateName\" class=\"editable-title\" value=\"{{getName(graph)}}\">\n      <template is=\"dom-if\" if=\"{{downloadUrl}}\">\n        <a id=\"download\" download=\"{{_computeDownload(graph)}}\" href\\$=\"{{downloadUrl}}\">\n          <noflo-icon icon=\"download\"></noflo-icon>\n        </a>\n      </template>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{isMain}}\">\n      <p>Main graph in project <span>{{project.name}}</span>.</p>\n      </template>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as subgraph in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <ul class=\"tabs\">\n        <li id=\"properties\" on-click=\"setView\" class\\$=\"{{_computeClass(view)}}\">Properties</li>\n        <template is=\"dom-if\" if=\"{{_computeIf(type)}}\">\n        <li id=\"html\" on-click=\"setView\" class\\$=\"{{_computeClass5(view)}}\">HTML</li>\n        </template>\n        <template is=\"dom-if\" if=\"{{spec}}\">\n        <li id=\"tests\" on-click=\"setView\" class\\$=\"{{_computeClass6(view)}}\">Tests</li>\n        </template>\n      </ul>\n      <div class\\$=\"{{_computeClass2(view)}}\">\n      <label>\n        <span>Description</span>\n        <input type=\"text\" value=\"{{description::input}}\">\n      </label>\n      <label>\n        Icon\n        <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n      </label>\n      <label>\n        <span>Type</span>\n        <noflo-type-selector type=\"{{type}}\" runtimes=\"{{runtimes}}\"></noflo-type-selector>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass3(view)}}\">\n      <label id=\"html_editor\">\n        <span>Preview contents</span>\n      </label>\n      </div>\n      <div class\\$=\"{{_computeClass4(view)}}\">\n      <label id=\"tests_editor\">\n        <span>Tests</span>\n      </label>\n      </div>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"save\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-graph-inspector',\n\n  properties: {\n    description: {\n      type: String,\n      value: '',\n    },\n    downloadUrl: {\n      type: String,\n      value: '',\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    icon: {\n      type: String,\n      value: '',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    isMain: {\n      type: Boolean,\n      value: false,\n    },\n    preview: {\n      type: String,\n      value: '',\n    },\n    project: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    spec: {\n      value: null,\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      observer: 'themeChanged',\n    },\n    type: {\n      type: String,\n      value: '',\n    },\n    view: {\n      type: String,\n      value: 'properties',\n      observer: 'viewChanged',\n    },\n  },\n\n  checkUpdateName(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateName(event);\n    }\n  },\n\n  updateName(event) {\n    this.set('graph.name', event.currentTarget.value);\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n    if (!this.graph) {\n      return;\n    }\n    this.description = this.graph.properties.description;\n    this.icon = this.graph.properties.icon || 'cog';\n    this.type = runtime.getGraphType(this.graph);\n    this.view = 'properties';\n    this.inGraph = [];\n    this.isMain = false;\n\n    if (this.project) {\n      if (this.graph.properties.main) {\n        this.isMain = true;\n      } else {\n        this.project.graphs.forEach((graph) => {\n          graph.nodes.forEach((node) => {\n            if (node.component === collections.unnamespace(this.graph.name)\n            || node.component === collections.namespace(this.graph.name, this.project.namespace)) {\n              this.push('inGraph', graph);\n            }\n          });\n        });\n      }\n      this.project.specs.forEach((spec) => {\n        if (collections.unnamespace(spec.name) === collections.unnamespace(this.graph.name)) {\n          this.spec = spec;\n        }\n      });\n      if (!this.spec) {\n        this.spec = {\n          name: collections.unnamespace(this.graph.name),\n          changed: false,\n          code: '',\n          language: 'yaml',\n          project: this.project.id,\n          type: 'spec',\n        };\n        this.push('project.specs', this.spec);\n      }\n    }\n    this.prepareHtmlEditor();\n    this.prepareTestsEditor();\n    this.prepareDownload();\n  },\n\n  prepareDownload() {\n    if (!window.Blob || !window.URL) {\n      return;\n    }\n    const graph = JSON.parse(JSON.stringify(this.graph));\n    if (graph.properties) {\n      delete graph.properties.sha;\n      delete graph.properties.changed;\n      delete graph.properties.project;\n      delete graph.properties.id;\n    }\n    const blob = new Blob([JSON.stringify(graph, null, 4)], { type: 'application/json' });\n    try {\n      this.downloadUrl = URL.createObjectURL(blob);\n    } catch (e) {\n      // Ignore URL failure\n    }\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  viewChanged() {\n    if (this.view === 'html' && this.htmlEditor) {\n      setTimeout(() => {\n        this.htmlEditor.setSize(576 - 4, 288);\n        this.htmlEditor.refresh();\n        this.htmlEditor.focus();\n      }, 1);\n    }\n    if (this.view === 'tests' && this.testsEditor) {\n      setTimeout(() => {\n        this.testsEditor.setSize(576 - 4, 288);\n        this.testsEditor.refresh();\n        this.testsEditor.focus();\n      }, 1);\n    }\n  },\n\n  getMirrorTheme() {\n    if (this.theme === 'light') {\n      return 'mdn-like';\n    }\n    return 'noflo';\n  },\n\n  themeChanged() {\n    if (!this.htmlEditor || !this.testsEditor) {\n      return;\n    }\n    this.htmlEditor.setOption('theme', this.getMirrorTheme());\n    this.testsEditor.setOption('theme', this.getMirrorTheme());\n  },\n\n  prepareHtmlEditor() {\n    if (this.type !== 'noflo-browser') {\n      return;\n    }\n    this.htmlEditor = CodeMirror(this.$.html_editor, {\n      lineNumbers: true,\n      value: this.graph.properties.environment.content || '',\n      language: 'htmlmixed',\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  prepareTestsEditor() {\n    if (!this.spec) {\n      return;\n    }\n    this.testsEditor = CodeMirror(this.$.tests_editor, {\n      lineNumbers: true,\n      value: this.spec.code || '',\n      mode: this.getMirrorMode(this.spec.language),\n      theme: this.getMirrorTheme(),\n    });\n  },\n\n  getMirrorMode(language) {\n    if (language === 'coffeescript' || language === 'javascript' || language === 'yaml') {\n      return language;\n    } if (language === 'c') {\n      return 'text/x-csrc';\n    } if (language === 'c++') {\n      return 'text/x-c++src';\n    } if (language === 'supercollider') {\n      return 'text/x-stsrc';\n    }\n    // smalltalk-like\n    return 'clike';\n  },\n\n  save() {\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveGraphProperties');\n    }\n    const env = JSON.parse(JSON.stringify(this.graph.properties.environment));\n    if (this.htmlEditor) {\n      this.preview = this.htmlEditor.getValue();\n      env.content = this.preview;\n    }\n    if (this.testsEditor && this.spec) {\n      const specCode = this.testsEditor.getValue();\n      if (specCode !== this.spec.code) {\n        this.set('spec.code', specCode);\n        this.set('spec.changed', true);\n        this.fire('specschanged', this.spec);\n      }\n    }\n    env.type = this.type;\n    this.graph.setProperties({\n      environment: env,\n      description: this.description,\n      icon: this.icon,\n    });\n    this.close();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteGraph');\n    }\n    this.fire('delete', this.graph);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  setView(event) {\n    this.view = event.currentTarget.id;\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(view) {\n    return this.tokenList({ selected: view === 'properties' });\n  },\n\n  _computeIf(type) {\n    return type === 'noflo-browser';\n  },\n\n  _computeClass2(view) {\n    return this.tokenList({ hidden: view !== 'properties' });\n  },\n\n  _computeClass3(view) {\n    return this.tokenList({ hidden: view !== 'html' });\n  },\n\n  _computeClass4(view) {\n    return this.tokenList({ hidden: view !== 'tests' });\n  },\n\n  _computeDownload(graph) {\n    return `${collections.unnamespace(graph.name)}.json`;\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  _computeClass5(view) {\n    return this.tokenList({ selected: view === 'html' });\n  },\n\n  _computeClass6(view) {\n    return this.tokenList({ selected: view === 'tests' });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      p {\n        font-size: 13px;\n        line-height: 18px;\n      }\n      p a, label a {\n        color: rgb(0, 127, 153);\n        text-decoration: none;\n      }\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{getName(component)}}</span></h1>\n      <template is=\"dom-if\" if=\"{{inGraph.length}}\">\n      <p>Used as component in\n      <template is=\"dom-repeat\" items=\"{{inGraph}}\" as=\"parent\">\n        <a href\\$=\"{{_computeHref(parent, project)}}\">\n          <span>{{getName(parent)}}</span>\n        </a>\n      </template>\n      </p>\n      </template>\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <div class=\"toolbar\">\n          <!-- <button on-click=\"{{send}}\">Save</button> -->\n          <a on-click=\"close\">Cancel</a>\n          <button class=\"delete\" on-click=\"delete\">Delete</button>\n        </div>\n      </form></div>\n`,\n\n  is: 'noflo-component-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      observer: 'componentChanged',\n    },\n    inGraph: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    errorText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    Polymer.dom(document.getElementById('container')).classList.add('blur');\n    Polymer.dom(this).classList.add('modal-content');\n    this.inGraph = [];\n    if (this.project) {\n      this.project.graphs.forEach((graph) => {\n        graph.nodes.forEach((node) => {\n          if (node.component === collections.unnamespace(this.component.name)\n            || node.component === collections.namespace(\n              this.component.name,\n              this.project.namespace,\n            )) {\n            this.push('inGraph', graph);\n          }\n        });\n      });\n    }\n  },\n\n  detached() {\n    Polymer.dom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  componentChanged() {\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteComponent');\n    }\n    this.fire('delete', this.component);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!Polymer.dom(this).parentNode) {\n      return;\n    }\n    Polymer.dom(Polymer.dom(this).parentNode).removeChild(this);\n  },\n\n  _computeHref(parent, project) {\n    const hash = urls.getGraphHash(parent.properties.id, project);\n    return urls.hashToString(hash);\n  },\n\n  listeners: { click: 'close' },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport './noflo-menu';\nimport './noflo-search-graph-results';\nimport './noflo-search-library-results';\nimport './noflo-graph-inspector';\nimport './noflo-component-inspector';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        background-color: var(--noflo-ui-background);\n        -webkit-transform: translateZ(0);\n        transform: translateZ(0);\n        color: var(--noflo-ui-text);\n        font-size: 10px;\n        white-space: nowrap;\n      }\n      input {\n        background-color: var(--noflo-ui-background);\n        background-image: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        border: none;\n        padding: 0px;\n        padding-right: 10px;\n        padding-left: 10px;\n        color: var(--noflo-ui-text);\n        width: 245px;\n        height: 36px;\n        display: inline;\n      }\n      button {\n        width: 36px;\n        height: 36px;\n        margin: 0px;\n        margin-left: -5px;\n        padding: 0px;\n        display: inline;\n        display: inline;\n\n        font-size: 10px;\n        background-color: transparent;\n        border: none;\n        color: var(--noflo-ui-text);\n        text-align: center;\n        cursor: pointer;\n      }\n\n      :host(.overlay) #breadcrumb {\n        width: calc(72px * 4);\n        display: block;\n      }\n      #breadcrumb {\n        position: relative;\n        overflow: hidden;\n        width: 0px;\n        height: 71px;\n        left: 0px;\n        top: 0px;\n        z-index: 1;\n\n        /*transition: width 0.3s ease-in-out;*/\n        display: none;\n        /*box-sizing: border-box;*/\n\n        background-color: var(--noflo-ui-background) !important;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n\n      }\n      #breadcrumb noflo-icon.fa-search {\n        position: absolute;\n        line-height: 72px;\n        right: 54px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n        cursor: text;\n      }\n      #breadcrumb #parentlink {\n        line-height: 72px;\n        display: inline-block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear,\n      #breadcrumb #graphinspector,\n      #breadcrumb #componentinspector,\n      #breadcrumb #readonly-lock {\n        position: absolute;\n        right: 9px;\n        top: 0px;\n        line-height: 72px;\n        display: block;\n        height: 72px;\n        font-size: 15px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      #clear {\n        color: var(--noflo-ui-border-highlight);\n      }\n      #breadcrumb h1 {\n        display: inline-block;\n        line-height: 72px;\n        font-size: 15px;\n        margin: 0px;\n        padding: 0px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        width: 156px;\n        font-weight: normal;\n        padding-left: 18px;\n        cursor: pointer;\n      }\n      :host(.overlay) #searchinput {\n        display: none;\n      }\n      #searchinput {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        display: block;\n        position: absolute;\n        top: 0px;\n        left: 0px;\n        border: none;\n        padding: 0px;\n        padding-right: 54px;\n        padding-left: 18px;\n        width: calc(72px * 3 - 1px);\n        height: 71px;\n        font-size: 12px;\n        display: inline;\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, var(--noflo-ui-background) 1px);\n        background-size: calc(100% - 1px);\n        background-position: 0px;\n        border-bottom: 1px var(--noflo-ui-border) solid;\n        border-right: 1px var(--noflo-ui-border) solid;\n        border-radius: none;\n      }\n      #searchinput #speech {\n        color: var(--noflo-ui-text-highlight);\n      }\n\n      #searchinput.components {\n        background-color: var(--noflo-ui-text);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.components::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n        color: var(--noflo-ui-text-highlight);\n      }\n      #searchinput.processes {\n        background-color: hsl(161, 79%, 68%);\n        transition: background-color 0.3s linear;\n      }\n      #searchinput.processes::-webkit-input-placeholder {\n        color: hsl(190, 90%, 45%);\n      }\n    </style>\n    <div id=\"breadcrumb\" on-click=\"focus\">\n      <template is=\"dom-if\" if=\"{{_canSearch(component, readonly)}}\">\n      <noflo-icon class=\"fa-search\" icon=\"search\"></noflo-icon>\n      </template>\n      <h1 title=\"Search\">\n        <template is=\"dom-if\" if=\"{{_canGoBack(project, graphs, component)}}\">\n        <button id=\"parentlink\" title=\"Back\" on-click=\"goBack\">\n          <noflo-icon icon=\"angle-left\"></noflo-icon>\n        </button>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isGraph(component, graph)}}\">\n        <span>{{getName(graph)}}</span>\n        </template>\n        <template is=\"dom-if\" if=\"{{_isComponent(component)}}\">\n        <span>{{getName(component)}}</span>\n        </template>\n      </h1>\n      <template is=\"dom-if\" if=\"{{_canInspectGraph(component, graph, readonly)}}\">\n      <button on-click=\"showGraphInspector\" id=\"graphinspector\" title=\"Graph properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_canInspectComponent(component, graph, readonly)}}\">\n      <button on-click=\"showComponentInspector\" id=\"componentinspector\" title=\"Component properties\">\n        <noflo-icon icon=\"cog\"></noflo-icon>\n      </button>\n      </template>\n      <template is=\"dom-if\" if=\"{{_isReadOnly(component, graph, readonly)}}\">\n      <button title=\"Read-only\" id=\"readonly-lock\">\n        <noflo-icon icon=\"lock\"></noflo-icon>\n      </button>\n      </template>\n    </div>\n    <input id=\"searchinput\" placeholder=\"Search components\" on-keydown=\"switchSearch\" value=\"{{search::input}}\" type=\"text\" autocapitalize=\"off\" autocorrect=\"off\" x-webkit-speech=\"\">\n    <button id=\"clear\" on-click=\"clearSearch\" title=\"Clear search\">\n      <noflo-icon icon=\"times\"></noflo-icon>\n    </button>\n`,\n\n  is: 'noflo-search',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    editor: {\n      value: null,\n      notify: true,\n    },\n    graph: { value: null },\n    graphInspector: { value: null },\n    graphs: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'graphsChanged',\n    },\n    menuCard: { value: null },\n    theme: {\n      type: String,\n      value: 'dark',\n    },\n    panel: { value: null },\n    parentPath: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    project: { value: null },\n    readonly: {\n      type: Boolean,\n      value: true,\n      notify: true,\n      observer: 'readonlyChanged',\n    },\n    results: { notify: true },\n    resultsCard: { value: null },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    search: {\n      value: null,\n      observer: 'searchChanged',\n    },\n    searchGraphResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchGraphResultsChanged',\n    },\n    searchLibrary: {\n      type: Boolean,\n      value: true,\n    },\n    searchLibraryResults: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'searchLibraryResultsChanged',\n    },\n  },\n\n  readonlyChanged() {\n    if (this.readonly) {\n      this.blur();\n    }\n  },\n\n  componentChanged() {\n    if (!this.component || !this.component.name) {\n      // Component nullified, ensure we recount graphs\n      this.graphsChanged();\n      return;\n    }\n    this.closeInspectors();\n  },\n\n  graphsChanged() {\n    this.closeInspectors();\n    this.blur();\n  },\n\n  closeInspectors() {\n    if (this.graphInspector) {\n      if (PolymerDom(this.graphInspector).parentNode) {\n        PolymerDom(PolymerDom(this.graphInspector).parentNode)\n          .removeChild(this.graphInspector);\n      }\n      this.graphInspector = null;\n    }\n    if (this.componentInspector) {\n      if (PolymerDom(this.componentInspector).parentNode) {\n        PolymerDom(PolymerDom(this.componentInspector).parentNode)\n          .removeChild(this.componentInspector);\n      }\n      this.componentInspector = null;\n    }\n  },\n\n  getParentPath(graphs, component) {\n    const parentPath = [];\n    if (!this.project) {\n      return parentPath;\n    }\n    const findNode = (comp, graph) => {\n      const matching = graph.nodes.filter((node) => {\n        if (node.id === comp) {\n          return true;\n        }\n        if (node.component === comp) {\n          // Direct match\n          return true;\n        }\n        if (!this.project) {\n          return false;\n        }\n        if (node.component === `${this.project.namespace}/${comp}`) {\n          return true;\n        }\n        if (node.component === `${this.project.id}/${comp}`) {\n          return true;\n        }\n        return false;\n      });\n      return matching[0];\n    };\n    graphs.forEach((graph, idx) => {\n      if (!component && idx >= graphs.length - 1) {\n        return;\n      }\n      if (idx === 0) {\n        parentPath.push(graph.properties.id);\n        return;\n      }\n      const previous = graphs[idx - 1];\n      const node = findNode(graph.name, previous);\n      if (!node) {\n        return;\n      }\n      parentPath.push(node.id);\n    });\n    return parentPath;\n  },\n\n  libraryResults(results) {\n    this.set('searchLibraryResults', []);\n    this.set('searchLibraryResults', results);\n  },\n\n  graphResults(result) {\n    this.push('searchGraphResults', result);\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('gpu');\n    this.blur();\n  },\n\n  focus() {\n    if (this.readonly) {\n      return;\n    }\n    if (this.component && this.component.name) {\n      return;\n    }\n    PolymerDom(this).classList.remove('overlay');\n    this.$.searchinput.focus();\n    if (this.search === null) {\n      // Show all\n      this.search = '';\n    }\n  },\n\n  blur() {\n    this.clearResults();\n    PolymerDom(this).classList.add('overlay');\n  },\n\n  toggle() {\n    if (PolymerDom(this).classList.contains('overlay')) {\n      this.focus();\n      return;\n    }\n    this.blur();\n  },\n\n  clearResults() {\n    this.set('searchGraphResults', []);\n    this.set('searchLibraryResults', []);\n  },\n\n  clearSearch() {\n    if (this.resultsCard) {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    this.search = null;\n    this.blur();\n  },\n\n  switchSearch(event) {\n    if (event.keyIdentifier === 'U+0009') {\n      event.preventDefault();\n      this.searchLibrary = !this.searchLibrary;\n      if (this.searchLibrary) {\n        PolymerDom(this.$.searchinput).classList.add('components');\n        PolymerDom(this.$.searchinput).classList.remove('processes');\n        this.set('$.searchinput.placeholder', 'Search components');\n      } else {\n        PolymerDom(this.$.searchinput).classList.add('processes');\n        PolymerDom(this.$.searchinput).classList.remove('components');\n        this.set('$.searchinput.placeholder', 'Search processes');\n      }\n      this.searchChanged();\n    }\n    event.stopPropagation();\n  },\n\n  searchChanged() {\n    this.clearResults();\n    if (this.search && typeof ga === 'function') {\n      ga('send', 'event', 'search', 'input', 'newSearch');\n    }\n    if (this.resultsCard) {\n      this.set('resultsCard.children.0.search', this.search);\n      this.set('resultsCard.search', this.search);\n    }\n    const event = this.searchLibrary ? 'search:library' : 'search:graph';\n    this.fire(event, { search: this.search });\n  },\n\n  searchLibraryResultsChanged() {\n    if (!this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-library-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchLibraryResults);\n      return;\n    }\n    if (this.searchLibraryResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-library-results');\n    results.id = 'results';\n    results.search = this.search;\n    results.results = this.searchLibraryResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-library-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  searchGraphResultsChanged() {\n    if (this.searchLibrary) {\n      return;\n    }\n    if (this.resultsCard && this.resultsCard.type !== 'noflo-search-graph-results') {\n      PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n      this.resultsCard = null;\n    }\n    if (this.resultsCard || this.search === null) {\n      this.set('resultsCard.children.0.results', []);\n      this.set('resultsCard.children.0.results', this.searchGraphResults);\n      return;\n    }\n    if (this.searchGraphResults.length === 0) {\n      if (this.resultsCard) {\n        PolymerDom(PolymerDom(this.resultsCard).parentNode).removeChild(this.resultsCard);\n        this.resultsCard = null;\n      }\n      return;\n    }\n    const results = document.createElement('noflo-search-graph-results');\n    results.id = 'results';\n    results.editor = this.editor;\n    results.search = this.search;\n    results.results = this.searchGraphResults;\n    results.addEventListener('resultclick', () => {\n      this.clearSearch();\n    });\n    this.resultsCard = document.createElement('the-card');\n    this.set('resultsCard.type', 'noflo-search-graph-results');\n    PolymerDom(this.resultsCard).appendChild(results);\n    this.resultsCard.addTo(this.panel, true);\n  },\n\n  goBack(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    const path = this.getParentPath(this.graphs, this.component);\n    if (this.project.runtime) {\n      path.unshift(this.project.runtime);\n      path.unshift('runtime');\n      this.fire('hash', path);\n      return;\n    }\n    path.unshift(this.project.id);\n    path.unshift('project');\n    this.fire('hash', path);\n  },\n\n  showGraphInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (this.graphs.length === 0) {\n      return;\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'graphProperties');\n    }\n    this.graphInspector = document.createElement('noflo-graph-inspector');\n    this.set('graphInspector.graph', this.graph);\n    this.set('graphInspector.project', this.project);\n    this.set('graphInspector.runtimes', this.runtimes);\n    this.set('graphInspector.theme', this.theme);\n    this.graphInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteGraph', ev.detail);\n    });\n    this.graphInspector.addEventListener('specschanged', (ev) => {\n      this.fire('specschanged', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.graphInspector);\n  },\n\n  showComponentInspector(event) {\n    if (event) {\n      event.stopPropagation();\n      event.preventDefault();\n    }\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'search', 'click', 'componentProperties');\n    }\n    this.componentInspector = document.createElement('noflo-component-inspector');\n    this.set('componentInspector.component', this.component);\n    this.set('componentInspector.project', this.project);\n    this.componentInspector.addEventListener('delete', (ev) => {\n      this.fire('deleteComponent', ev.detail);\n    });\n    PolymerDom(document.body).appendChild(this.componentInspector);\n  },\n\n  _canSearch(component, readonly) {\n    return !readonly && (!component || !component.name);\n  },\n\n  _canGoBack(project, graphs, component) {\n    if (!project) {\n      return false;\n    }\n    if (graphs.length > 1 || (graphs.length && component)) {\n      return true;\n    }\n    return false;\n  },\n\n  _isGraph(component, graph) {\n    return graph && (!component || !component.name);\n  },\n\n  _isComponent(component) {\n    return component && component.name;\n  },\n\n  _canInspectGraph(component, graph, readonly) {\n    return !readonly && graph && (!component || !component.name);\n  },\n\n  _canInspectComponent(component, graph, readonly) {\n    return !readonly && !graph && component && component.name;\n  },\n\n  _isReadOnly(component, graph, readonly) {\n    return readonly || (component && component.readonly) || (graph && graph.properties.readonly);\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport _ from 'underscore';\nimport runtimeInfo from '../runtimeinfo';\nimport './noflo-icon-selector';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Create new component</h1>\n      <form>\n        <div class=\"modal-content\">\n        <label>\n          Component name\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"MyCoolComponent\" required=\"\">\n        </label>\n        <label>\n          Component description\n          <input type=\"text\" value=\"{{description::input}}\" placeholder=\"Do something interesting\">\n        </label>\n        <label>\n          Language\n          <select name=\"type\" value=\"{{language::input}}\">\n            <template is=\"dom-repeat\" items=\"{{languages}}\" as=\"lang\">\n            <option value=\"[[lang.id]]\" selected\\$=\"[[_languageSelected(lang, language)]]\">[[lang.label]]</option>\n            </template>\n          </select>\n        </label>\n        <label>\n          Icon\n          <noflo-icon-selector selected=\"{{icon}}\"></noflo-icon-selector>\n        </label>\n        </div>\n        <div class=\"toolbar\">\n          <button on-click=\"send\" class\\$=\"{{_computeClass(canSend)}}\">Create</button>\n          <a on-click=\"close\">Cancel</a>\n        </div>\n      </form>\n    </div>\n`,\n\n  is: 'noflo-new-component',\n\n  properties: {\n    canSend: {\n      type: Boolean,\n      value: false,\n    },\n    language: {\n      type: String,\n      value: '',\n    },\n    type: {\n      type: String,\n      value: '',\n      notify: true,\n      observer: 'typeChanged',\n    },\n    languages: {\n      type: Array,\n      value() {\n        return [\n          {\n            id: 'c',\n            label: 'C',\n          },\n          {\n            id: 'c++',\n            label: 'C++',\n          },\n          {\n            id: 'coffeescript',\n            label: 'CoffeeScript',\n          },\n          {\n            id: 'es2015',\n            label: 'JavaScript (modern ES2015)',\n          },\n          {\n            id: 'javascript',\n            label: 'JavaScript',\n          },\n          {\n            id: 'typescript',\n            label: 'TypeScript',\n          },\n          {\n            id: 'python',\n            label: 'Python',\n          },\n          {\n            id: 'supercollider',\n            label: 'SuperCollider',\n          },\n          {\n            id: 'yaml',\n            label: 'YAML',\n          },\n        ];\n      },\n    },\n    name: {\n      type: String,\n      value: '',\n      observer: 'nameChanged',\n    },\n    description: {\n      type: String,\n      value: '',\n    },\n    icon: {\n      type: String,\n      value: 'cog',\n      notify: true,\n    },\n    project: {\n      type: Object,\n      value() {\n        return {};\n      },\n      notify: true,\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  typeChanged() {\n    if (!this.type) {\n      // No type defined, keep full list\n      return;\n    }\n    const runtimeI = runtimeInfo[this.type];\n    if (!runtimeI || !runtimeI.componenttemplates) {\n      // We don't know what languages the runtime supports, so keep full list\n      return;\n    }\n\n    // Filter list of languages to the ones supported by the runtime\n    const allLanguages = this.languages;\n    this.languages = allLanguages.filter((lang) => {\n      if (!runtimeI.componenttemplates[lang.id]) {\n        return false;\n      }\n      return true;\n    });\n    if (!this.languages.length) {\n      // Default back to all\n      this.languages = allLanguages;\n    }\n    // Default to first language if runtime has no preference\n    this.language = runtimeI.preferredlanguage || this.languages[0].id;\n  },\n\n  nameChanged() {\n    let duplicates = [];\n    if (this.name) {\n      // Same regexp as used by the FBP language parser\n      this.name = this.name.replace(/[^a-zA-Z0-9]+/g, '_');\n    }\n    if (this.project) {\n      duplicates = this.project.components.filter((component) => {\n        if (component.name === this.name) {\n          return true;\n        }\n        return false;\n      });\n      duplicates = duplicates.concat(this.project.graphs.filter((graph) => {\n        if (graph.name === this.name) {\n          return true;\n        }\n        return false;\n      }));\n    }\n    if (this.name && this.project && !duplicates.length) {\n      this.canSend = true;\n    } else {\n      this.canSend = false;\n    }\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (!this.name) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'newComponent');\n    }\n    this.fire('new', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      description: this.description,\n      language: this.language,\n      icon: this.icon,\n      project: this.project.id,\n      code: this.getExampleCode(this.language),\n      tests: '',\n    });\n    this.fire('newSpec', {\n      id: `${this.project.id}/${this.name}`,\n      name: this.name,\n      code: this.getExampleSpec(),\n      language: 'yaml',\n      project: this.project.id,\n      type: 'spec',\n    });\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(canSend) {\n    return this.tokenList({ disabled: !canSend });\n  },\n\n  _languageSelected(lang, selected) {\n    if (lang.id === selected) {\n      return true;\n    }\n    return false;\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  getExampleCode(language) {\n    if (!this.type) {\n      return '';\n    }\n    const info = runtimeInfo[this.type];\n    let lang = language;\n    if (lang === 'es6') {\n      lang = 'es2015';\n    }\n    let template = '';\n    if (info && info.componenttemplates && info.componenttemplates[lang]) {\n      template = info.componenttemplates[lang];\n    }\n    if (template) {\n      // Allow passing project/component data to template\n      const templateFunc = _.template(template);\n      template = templateFunc({\n        namespace: this.project.namespace || this.project.id,\n        name: this.name,\n        description: this.description,\n        icon: this.icon,\n      });\n    }\n    return template;\n  },\n\n  getExampleSpec() {\n    let fbpSpec = '';\n    fbpSpec += `name: ${this.name} component\\n`;\n    fbpSpec += `topic: ${this.project.namespace || this.project.id}/${this.name}\\n`;\n    fbpSpec += 'cases:\\n';\n    fbpSpec += '  -\\n';\n    fbpSpec += '    name: with an input packet\\n';\n    fbpSpec += '    assertion: should send the same packet out\\n';\n    fbpSpec += '    inputs:\\n';\n    fbpSpec += '      in: true\\n';\n    fbpSpec += '    expect:\\n';\n    fbpSpec += '      out:\\n';\n    fbpSpec += '        equals: true\\n';\n    return fbpSpec;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      button.delete {\n        position: absolute;\n        right: 36px;\n        border: 0px solid hsla( 0, 98%, 46%, .8) !important;\n        color: hsla( 0, 98%, 46%, .8) !important;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1><span>{{project.name}}</span> settings</h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{errorText}}\">\n        <div class=\"error\">{{errorText}}</div>\n      </template>\n      <form>\n        <label>\n          <span>GitHub repository</span>\n          <input type=\"text\" value=\"{{repo::input}}\" placeholder=\"username/my-project\" autocapitalize=\"off\" autocorrect=\"off\" required=\"\">\n        </label>\n        <label>\n          <span>Project label</span>\n          <input type=\"text\" value=\"{{name::input}}\" placeholder=\"My Cool Project\" required=\"\">\n        </label>\n        <label>\n          <span>Project namespace</span>\n          <input type=\"text\" value=\"{{namespace::input}}\" placeholder=\"my-cool-project\" required=\"\">\n        </label>\n        <label>\n          <span>Main graph</span>\n          <select name=\"type\" value=\"{{main::input}}\">\n            <template is=\"dom-repeat\" items=\"[[_getMainGraphs(project.graphs)]]\" as=\"graph\">\n              <option value=\"{{graph.properties.id}}\" selected\\$=\"[[_mainSelected(graph.properties.id, main)]]\">{{graph.name}}</option>\n            </template>\n          </select>\n        </label>\n        </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\">Save</button>\n        <a on-click=\"close\">Cancel</a>\n        <a href=\"https://github.com/new\" target=\"_blank\">New Repository</a>\n        <button class=\"delete\" on-click=\"delete\">Delete</button>\n      </div>\n      </div>\n`,\n\n  is: 'noflo-project-inspector',\n\n  properties: {\n    errorText: {\n      type: String,\n      value: '',\n    },\n    main: {\n      type: String,\n      value: '',\n    },\n    name: {\n      type: String,\n      value: '',\n    },\n    namespace: {\n      type: String,\n      value: '',\n    },\n    originalRepo: {\n      type: String,\n      value: '',\n    },\n    project: { observer: 'projectChanged' },\n    repo: {\n      type: String,\n      value: '',\n    },\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  projectChanged() {\n    this.originalRepo = this.project.repo;\n    this.repo = this.project.repo;\n    this.name = this.project.name;\n    this.namespace = this.project.namespace || this.project.id;\n    this.main = this.project.main;\n  },\n\n  updateProject() {\n    this.fire('updated', {\n      id: this.project.id,\n      name: this.name,\n      namespace: this.namespace,\n      main: this.main,\n      type: this.project.type,\n      repo: this.repo,\n    });\n    this.close();\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'saveProjectProperties');\n    }\n    this.updateProject();\n  },\n\n  delete(event) {\n    event.preventDefault();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'deleteProject');\n    }\n    this.fire('delete', this.project);\n    this.close();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _mainSelected(graphId, main) {\n    if (graphId === main) {\n      return true;\n    }\n    return false;\n  },\n\n  _getMainGraphs(graphs) {\n    return graphs.filter((graph) => graph.properties.main);\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './noflo-modal-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"noflo-modal-styles\">\n      table th {\n        text-align: left;\n      }\n    </style>\n    <div class=\"modal-container\" on-click=\"bgClick\">\n      <h1>Synchronize with <noflo-icon icon=\"github\"></noflo-icon> <span>{{operation.repo}}</span></h1>\n      <div class=\"modal-content\">\n      <template is=\"dom-if\" if=\"{{statusText}}\">\n        <div>{{statusText}}</div>\n      </template>\n      <form>\n        <table>\n          <template is=\"dom-repeat\" items=\"{{files}}\" as=\"file\">\n          <tr>\n            <th>{{file.path}}</th>\n            <td>\n              <select name=\"{{file.path}}\" on-change=\"choose\">\n                <template is=\"dom-repeat\" items=\"{{file.operations}}\" as=\"op\">\n                <option value=\"[[op]]\" selected\\$=\"[[_isSelectedOp(file, op)]]\">[[_getOperationLabel(op)]]</option>\n                </template>\n              </select>\n            </td>\n          </tr>\n          </template>\n        </table>\n        <template is=\"dom-if\" if=\"{{hasPush}}\">\n          <label>\n            <span>Commit message</span>\n            <input type=\"text\" value=\"{{message::input}}\" required=\"\">\n          </label>\n        </template>\n      </form>\n      </div>\n      <div class=\"toolbar\">\n        <button on-click=\"send\" class\\$=\"{{_computeClass(hasOp)}}\">Synchronize</button>\n        <a on-click=\"close\">Cancel</a>\n      </div>\n    </div>\n`,\n\n  is: 'noflo-project-sync',\n\n  properties: {\n    files: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'filesChanged',\n    },\n    hasOp: {\n      type: Boolean,\n      value: true,\n    },\n    hasPush: {\n      type: Boolean,\n      value: false,\n    },\n    message: {\n      type: String,\n      value: '',\n    },\n    operation: {\n      type: Object,\n      value() {\n        return {\n          repo: '',\n          push: [],\n          pull: [],\n          conflict: [],\n          noop: [],\n        };\n      },\n      observer: 'operationChanged',\n    },\n    statusText: {\n      type: String,\n      value: '',\n    },\n  },\n\n  operationChanged() {\n    if (!this.operation.push.length\n      && !this.operation.pull.length\n      && !this.operation.conflict.length) {\n      this.statusText = 'All changes have been synchronized';\n      this.hasOp = false;\n    }\n    this.hasPush = false;\n    this.operation.conflict.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'pull', 'noop'],\n      });\n    });\n    this.operation.push.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'noop',\n        operations: ['push', 'noop'],\n      });\n    });\n    this.operation.pull.forEach((entry) => {\n      this.push('files', {\n        path: entry.path,\n        operation: 'pull',\n        operations: ['pull', 'noop'],\n      });\n    });\n    this.filesChanged();\n  },\n\n  filesChanged() {\n    let pushes = false;\n    let ops = false;\n    this.files.forEach((file) => {\n      if (file.operation === 'push') {\n        pushes = true;\n        ops = true;\n      }\n      if (file.operation === 'pull') {\n        ops = true;\n      }\n    });\n    this.hasPush = pushes;\n    this.hasOp = ops;\n  },\n\n  attached() {\n    PolymerDom(document.getElementById('container')).classList.add('blur');\n    PolymerDom(this).classList.add('modal-content');\n  },\n\n  detached() {\n    PolymerDom(document.getElementById('container')).classList.remove('blur');\n  },\n\n  send(event) {\n    if (event) {\n      event.preventDefault();\n    }\n    if (this.hasPush && !this.message) {\n      return;\n    }\n    const originalConflicts = this.operation.conflict;\n    const originalPushes = this.operation.push;\n    const originalPulls = this.operation.pull;\n    this.set('operation.conflict', []);\n    this.set('operation.pull', []);\n    this.set('operation.push', []);\n    const checkOps = (entry) => {\n      this.files.forEach((file) => {\n        if (file.path !== entry.path) {\n          return;\n        }\n        if (file.operation === 'push') {\n          this.push('operation.push', entry);\n        }\n        if (file.operation === 'pull') {\n          this.push('operation.pull', entry);\n        }\n      });\n    };\n    originalConflicts.forEach(checkOps);\n    originalPushes.forEach(checkOps);\n    originalPulls.forEach(checkOps);\n    this.set('operation.message', this.message);\n    this.fire('sync', this.operation);\n    this.close();\n  },\n\n  choose(event) {\n    let index = null;\n    let f = null;\n    this.files.forEach((file, idx) => {\n      if (file.path === event.currentTarget.name) {\n        index = idx;\n        f = file;\n      }\n    });\n    if (index === null) {\n      return;\n    }\n    this.splice('files', index, 1, {\n      id: event.currentTarget.name,\n      path: f.path,\n      operation: event.currentTarget.value,\n      operations: f.operations,\n    });\n    this.filesChanged();\n  },\n\n  bgClick(event) {\n    // Don't close if clicking within container\n    event.stopPropagation();\n  },\n\n  close() {\n    if (!PolymerDom(this).parentNode) {\n      return;\n    }\n    PolymerDom(PolymerDom(this).parentNode).removeChild(this);\n  },\n\n  listeners: { click: 'close' },\n\n  _computeClass(hasOp) {\n    return this.tokenList({ disabled: !hasOp });\n  },\n\n  tokenList(obj) {\n    const pieces = [];\n    Object.keys(obj).forEach((key) => {\n      if (obj[key]) {\n        pieces.push(key);\n      }\n    });\n    return pieces.join(' ');\n  },\n\n  _getOperationLabel(op) {\n    if (op === 'push') {\n      return 'Push';\n    }\n    if (op === 'pull') {\n      return 'Pull';\n    }\n    if (op === 'noop') {\n      return 'Ignore';\n    }\n    return op;\n  },\n\n  _isSelectedOp(file, op) {\n    if (op === file.operation) {\n      return true;\n    }\n    return false;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport collections from '../src/collections';\nimport urls from '../src/urls';\nimport './the-panel';\nimport './the-graph-thumb';\nimport './noflo-new-graph';\nimport './noflo-new-component';\nimport './noflo-project-inspector';\nimport './noflo-project-sync';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      h2 {\n        font-size: 16px;\n        line-height: 36px;\n        text-transform: none;\n        font-weight: normal;\n        padding: 0px;\n        margin: 0px;\n      }\n      ul.graphs {\n        margin-bottom: 144px;\n      }\n      ul.graphs li {\n        width: 245px;\n        height: 70px;\n        overflow: hidden;\n        float: left;\n        text-align: center;\n        background-color: hsl(190, 90%, 45%);\n        color: black;\n        border-radius: 3px;\n        margin-right: 0px;\n        margin-left: 0px;\n        margin-bottom: 5px;\n        position: relative;\n        cursor: pointer;\n      }\n      ul.graphs li.add {\n        background-color: var(--noflo-ui-text);\n        color: var(--noflo-ui-background);\n        cursor: default;\n      }\n      ul.graphs li the-graph-thumb {\n        display: block;\n        position: absolute;\n        left: 100px;\n        top: -20px;\n      }\n      ul.graphs li noflo-icon {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        font-size: 36px;\n        color: black;\n      }\n      ul.graphs li button {\n        display: block;\n        position: absolute;\n        right: 17px;\n        top: 17px;\n        background-color: transparent;\n        color: hsl(190, 100%, 30%);\n        border: 1px solid hsl(190, 100%, 30%);\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 13px;\n        padding-right: 13px;\n      }\n      ul.graphs li h2 {\n        position: absolute;\n        top: 18px;\n        left: 17px;\n        width: 75px;\n        text-transform: none;\n        font-size: 13px;\n        text-align: left;\n        white-space: nowrap;\n      }\n      header h1 {\n        text-align: center;\n        height: 36px;\n        line-height: 36px;\n        font-size: 17px;\n        white-space: nowrap;\n        max-width: 100%;\n        overflow-x: hidden;\n        text-overflow: ellipsis;\n        padding-left: 36px;\n        box-sizing: border-box;\n      }\n      main ul {\n        margin: 0px;\n        padding: 0px;\n        list-style: none;\n      }\n      main ul li {\n        line-height: 36px;\n        min-height: 36px;\n      }\n      main ul li a {\n        color: var(--noflo-ui-text);\n        text-decoration: none;\n        display: block;\n        cursor: pointer;\n      }\n      main ul li a i {\n        float: right;\n        line-height: 36px;\n        color: var(--noflo-ui-border);\n        margin-right: 4px;\n      }\n      main {\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        max-height: calc(100% - 72px - 43px);\n        padding-left: 36px;\n      }\n      main.repo {\n        max-height: calc(100% - 72px * 2 - 43px);\n      }\n      main::-webkit-scrollbar {\n        display: none;\n      }\n      footer {\n        background-color: transparent;\n        display: block;\n        position: absolute;\n        bottom: 43px;\n        left: 0px;\n        padding-left: 36px;\n        width: 325px;\n        padding-right: 36px;\n        box-sizing: border-box;\n        overflow: hidden;\n        height: 72;\n        transition: background-color 0.3s ease-in-out;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        top: 0px;\n        border-right-width: 1px;\n        height: 100vh;\n        padding-right: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f03a';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        right: 0px;\n        width: 36px;\n        top: 50%;\n        top: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        cursor: e-resize;\n        opacity: 1;\n      }\n      #account[open] footer {\n        background-color: hsl(190, 90%, 45%);\n      }\n      footer h1 {\n        font-size: 17px;\n        line-height: 36px;\n        text-align: center;\n        margin: 0;\n\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n      }\n      footer button {\n        background-color: white;\n        color: hsl(190, 90%, 45%);\n        border: none;\n        font-size: 13px;\n        border-radius: 3px;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        height: 36px;\n        padding-left: 17px;\n        padding-right: 17px;\n        line-height: 36px;\n        display: block;\n        margin-left: auto;\n        margin-right: auto;\n        cursor: pointer;\n      }\n      footer button:disabled {\n        opacity: 0.5;\n      }\n    </style>\n    <the-panel id=\"account\" edge=\"left\" size=\"324\" handle=\"36\">\n      <header slot=\"header\">\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <h1>{{project.name}}</h1>\n        </template>\n        <template is=\"dom-if\" if=\"{{!project}}\">\n        <h1>Live mode</h1>\n        </template>\n      </header>\n      <main class\\$=\"{{_computeClass(project)}}\">\n        <ul>\n          <li>\n            <a on-click=\"openHome\">\n              <noflo-icon icon=\"home\"></noflo-icon>\n              Home\n            </a>\n          </li>\n          <template is=\"dom-if\" if=\"{{project}}\">\n          <li>\n            <a on-click=\"openSettings\">\n              <noflo-icon icon=\"cog\"></noflo-icon>\n              Settings\n            </a>\n          </li>\n          </template>\n        </ul>\n        <template is=\"dom-if\" if=\"{{project}}\">\n        <template is=\"dom-if\" if=\"{{_canGraph(project, runtime)}}\">\n        <h2>Graphs</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New graph</h2>\n            <button on-click=\"newGraph\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.graphs}}\" as=\"graph\">\n          <li on-click=\"openGraph\" data-id\\$=\"{{graph.properties.id}}\">\n            <the-graph-thumb graph=\"{{graph}}\" width=\"200\" height=\"120\"></the-graph-thumb>\n            <h2>{{getName(graph)}}</h2>\n          </li>\n          </template>\n        </ul>\n        </template>\n        <template is=\"dom-if\" if=\"{{_canComponent(project, runtime)}}\">\n        <h2>Components</h2>\n        <ul class=\"graphs\">\n          <li class=\"add\">\n            <h2>New component</h2>\n            <button on-click=\"newComponent\">Create</button>\n          </li>\n          <template is=\"dom-repeat\" items=\"{{project.components}}\" as=\"component\">\n          <li on-click=\"openComponent\" data-id\\$=\"{{component.name}}\">\n            <h2>{{getName(component)}}</h2>\n            <template is=\"dom-if\" if=\"{{_computeIf(component)}}\">\n            <noflo-icon icon=\"coffee\"></noflo-icon>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf2(component)}}\">\n            <noflo-icon icon=\"code\"></noflo-icon>\n            </template>\n          </li>\n          </template>\n        </ul>\n        </template>\n        </template>\n      </main>\n      <template is=\"dom-if\" if=\"{{project.repo}}\">\n      <footer slot=\"footer\">\n        <h1 title=\"{{project.repo}}\">\n          <noflo-icon icon=\"github\"></noflo-icon>\n          <span>{{project.repo}}</span>\n        </h1>\n        <button on-click=\"synchronize\">\n          <noflo-icon icon=\"cloud-upload\"></noflo-icon>\n          <span>Synchronize</span>\n        </button>\n      </footer>\n      </template>\n    </the-panel>\n`,\n\n  is: 'noflo-project',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n    },\n    project: {\n      value: null,\n      notify: true,\n    },\n    runtime: {\n      value: null,\n      observer: 'runtimeChanged',\n    },\n    runtimes: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n  },\n\n  runtimeChanged() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      this.canComponent = this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n  },\n\n  newGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-graph');\n    dialog.project = this.project;\n    dialog.runtimes = this.runtimes;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const graph = ev.detail;\n      this.push('project.graphs', graph);\n      this.fire('newgraph', graph);\n      this.gotoGraph(graph.properties.id);\n    });\n  },\n\n  newComponent(event) {\n    if (!this.canComponent) {\n      return;\n    }\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    const dialog = document.createElement('noflo-new-component');\n    dialog.project = this.project;\n    if (this.graph && this.graph.properties.environment) {\n      dialog.type = this.graph.properties.environment.type || this.project.type;\n    } else {\n      dialog.type = this.project.type;\n    }\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('new', (ev) => {\n      const component = ev.detail;\n      this.push('project.components', component);\n      this.fire('newcomponent', component);\n      // TODO: Add node to graph\n      this.gotoComponent(component.name);\n    });\n    dialog.addEventListener('newSpec', (ev) => {\n      const spec = ev.detail;\n      this.push('project.specs', spec);\n      this.fire('newspec', spec);\n    });\n  },\n\n  openHome(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    this.$.account.toggleOpen(false);\n    this.fire('hash', []);\n  },\n\n  openSettings(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'projectProperties');\n    }\n    const dialog = document.createElement('noflo-project-inspector');\n    dialog.project = this.project;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('updated', (ev) => {\n      Object.keys(ev.detail).forEach((property) => {\n        this.set(`project.${property}`, ev.detail[property]);\n      });\n      if (this.project.repo) {\n        this.set('project.gist', null);\n        if (!this.project.branch) {\n          this.set('project.branch', 'master');\n        }\n      }\n      this.project.graphs.forEach((graph) => {\n        if (graph.properties.id === this.project.main) {\n          const { type } = graph.properties.environment;\n          this.set('project.mainGraph', graph);\n          this.set('project.type', type);\n        }\n      });\n      // Send only the data we actually want to store\n      this.fire('changed', this.project);\n    });\n    dialog.addEventListener('delete', (ev) => {\n      this.$.account.toggleOpen(false);\n      this.fire('deleteProject', ev.detail);\n    });\n  },\n\n  gotoGraph(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getGraphHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  gotoComponent(id) {\n    this.$.account.toggleOpen(false);\n    this.fire('hash', urls.getComponentHash(id, this.project));\n    this.$.account.toggleOpen(false);\n  },\n\n  openGraph(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openGraph');\n    }\n    this.gotoGraph(event.currentTarget.getAttribute('data-id'));\n  },\n\n  openComponent(event) {\n    event.preventDefault();\n    if (PolymerDom(document).querySelectorAll('.modal-content:not(polymer-element)').length) {\n      return;\n    }\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'openComponent');\n    }\n    this.gotoComponent(event.currentTarget.getAttribute('data-id'));\n  },\n\n  synchronize(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (typeof ga === 'function') {\n      ga('send', 'event', 'button', 'click', 'syncGithub');\n    }\n    this.fire('sync', {\n      repo: this.project.repo,\n      project: this.project,\n    });\n    this.$.account.toggleOpen(false);\n  },\n\n  confirm(operation) {\n    const dialog = document.createElement('noflo-project-sync');\n    dialog.operation = operation;\n    PolymerDom(document.body).appendChild(dialog);\n    dialog.addEventListener('sync', (event) => {\n      if (typeof ga === 'function') {\n        if (event.detail.push.length) {\n          ga('send', 'event', 'button', 'click', 'pushGithub');\n        }\n        if (event.detail.pull.length) {\n          ga('send', 'event', 'button', 'click', 'pullGithub');\n        }\n      }\n      this.fire('syncDecision', event.detail);\n    });\n  },\n\n  _computeClass(project) {\n    return project && project.repo ? 'repo' : 'norepo';\n  },\n\n  _computeIf(component) {\n    return component.language === 'coffeescript';\n  },\n\n  _computeIf2(component) {\n    return component.language !== 'coffeescript';\n  },\n\n  _canGraph() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('protocol:graph') !== -1;\n    }\n    return true;\n  },\n\n  _canComponent() {\n    if (this.runtime && this.runtime.definition && this.runtime.definition.capabilities) {\n      // If we have a runtime connection, only allow creating components if setsource is enabled\n      return this.runtime.definition.capabilities.indexOf('component:setsource') !== -1;\n    }\n    return true;\n  },\n\n  getName(entity) {\n    return collections.unnamespace(collections.getName(entity));\n  },\n});\n","import React from 'react';\nimport { unnamespace } from '../collections';\n\nfunction nodeLabel(node) {\n  return unnamespace(node).split('_')[0];\n}\n\nfunction EdgeId({ row }) {\n  let subgraph;\n  let src;\n  let connection;\n  let tgt;\n  if (row.subgraph) {\n    subgraph = <span className=\"subgraph\">{row.subgraph.map((s) => nodeLabel(s)).join(' / ')}</span>;\n  }\n  if (row.src) {\n    src = (\n      <span className=\"source\">\n        <span className=\"node-id\">{nodeLabel(row.src.node)}</span>\n      </span>\n    );\n  }\n  if (row.tgt) {\n    tgt = (\n      <span className=\"target\">\n        <span className=\"node-id\">{nodeLabel(row.tgt.node)}</span>\n      </span>\n    );\n  }\n  let routeClass = 'connection';\n  if (row.edge && row.edge.metadata && typeof row.edge.metadata.route !== 'undefined') {\n    routeClass = `connection route${row.edge.metadata.route}`;\n  }\n  connection = <span className={routeClass}>➞</span>;\n  if (row.src && row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\">➞</span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  } else if (row.src) {\n    connection = (\n      <span className={routeClass}>\n        <span className=\"port-id\">{row.src.port}</span>\n        <span class=\"arrow\">➞</span>\n      </span>\n    );\n  } else if (row.tgt) {\n    connection = (\n      <span className={routeClass}>\n        <span class=\"arrow\">➞</span>\n        <span className=\"port-id\">{row.tgt.port}</span>\n      </span>\n    );\n  }\n  return (\n    <div className=\"edge\">\n      {subgraph}\n      {src}\n      {connection}\n      {tgt}\n    </div>\n  );\n}\n\nexport default EdgeId;\n","import React, { useState } from 'react';\nimport { Table } from 'react-fluid-table';\nimport EdgeId from './EdgeId';\n\nfunction PacketData({ row, multiLine = false }) {\n  if (row.type === 'openBracket' || row.type === 'closeBracket') {\n    return (\n      <span\n        className={row.type}\n        title={row.type}\n      >\n        {row.group}\n      </span>\n    );\n  }\n  switch (typeof row.data) {\n    case 'number':\n    case 'string': {\n      return row.data;\n    }\n    default: {\n      if (multiLine) {\n        return JSON.stringify(row.data, null, 2);\n      }\n      return JSON.stringify(row.data);\n    }\n  }\n}\n\nfunction PacketDetails({ row, index, isExpanded, clearSizeCache }) {\n  return (\n    <div className=\"packet-details\">\n      <dl>\n        <dt>Payload</dt>\n        <dd className=\"packet-data\">\n          <PacketData row={row} multiLine={true} />\n        </dd>\n      </dl>\n    </div>\n  );\n}\n\nfunction RuntimeEvents({ packets, width }) {\n  const idWidth = Math.min(width / 4, 238);\n  const dataWidth = width - idWidth - 36;\n  const columns = [\n    {\n      key: 'id',\n      header: 'Edge',\n      width: idWidth,\n      content: EdgeId,\n    },\n    {\n      key: 'data',\n      header: 'Data',\n      width: dataWidth,\n      content: PacketData,\n    },\n    {\n      key: '',\n      width: 36,\n      expander: true,\n    },\n  ];\n  return (\n    <Table\n      data={packets}\n      columns={columns}\n      subComponent={PacketDetails}\n      tableHeight={288}\n    />\n  );\n}\n\nexport default RuntimeEvents;\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        -webkit-user-select: none;      /* disable cut copy paste */\n        -webkit-touch-callout: none;    /* disable callout, image save panel */\n        user-select: none;\n        touch-callout: none;\n\n        cursor: ew-resize;\n\n        display: inline-block;\n        text-align: center;\n      }\n    </style>\n`,\n\n  is: 'number-scrubber',\n\n  properties: {\n    distance: {\n      type: Number,\n      value: 5,\n      notify: true,\n    },\n    max: {\n      value() {\n        return Infinity;\n      },\n      notify: true,\n    },\n    min: {\n      value() {\n        return -Infinity;\n      },\n      notify: true,\n    },\n    mod: {\n      type: Number,\n      value: 0,\n      notify: true,\n    },\n    precision: {\n      type: Number,\n      value: 1000000,\n    },\n    scrubend: { value: null },\n    scrubstart: { value: null },\n    startValue: {\n      type: Number,\n      value: 0,\n    },\n    step: {\n      type: Number,\n      value: 1,\n      notify: true,\n    },\n    value: {\n      value() {\n        return undefined;\n      },\n      notify: true,\n    },\n  },\n\n  onTrackStart() {\n    // Don't select\n    document.body.style.webkitUserSelect = 'none';\n    document.body.style.MozUserSelect = 'none';\n    document.body.style.msUserSelect = 'none';\n    document.body.style.userSelect = 'none';\n    document.body.style.cursor = 'ew-resize';\n    this.fire('scrubstart');\n    if (this.value === undefined) {\n      return;\n    }\n    this.value = parseFloat(this.value);\n    this.startValue = this.value;\n  },\n\n  onTrack(event) {\n    if (this.value === undefined) {\n      return;\n    }\n    let delta = event.dx;\n    if (this.distance > 1) {\n      delta = Math.round(delta / this.distance);\n    }\n    if (this.step !== 1) {\n      if (this.step > 1) {\n        delta = Math.round(delta / this.step) * this.step;\n      } else if (this.step > 0) {\n        delta *= this.step;\n      }\n    }\n    let newValue = this.startValue + delta;\n    if (this.mod !== 0) {\n      newValue %= this.mod;\n    }\n    if (Number.isFinite(this.min)) {\n      newValue = Math.max(newValue, this.min);\n    }\n    if (Number.isFinite(this.max)) {\n      newValue = Math.min(newValue, this.max);\n    }\n    // Stupid JS numbers\n    if (this.precision > 1) {\n      newValue = Math.round(newValue * this.precision) / this.precision;\n    }\n    if (this.value !== newValue) {\n      this.value = newValue;\n      this.fire('scrub', this.value);\n    }\n  },\n\n  onTrackEnd() {\n    // Reset select\n    document.body.style.webkitUserSelect = 'auto';\n    document.body.style.MozUserSelect = 'auto';\n    document.body.style.msUserSelect = 'auto';\n    document.body.style.userSelect = 'auto';\n    document.body.style.cursor = 'auto';\n    this.fire('scrubend');\n  },\n\n  hostAttributes: { 'touch-action': 'none' },\n\n  listeners: {\n    trackstart: 'onTrackStart',\n    track: 'onTrack',\n    trackend: 'onTrackEnd',\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './number-scrubber';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      .editable-title {\n        line-height: 36px;\n        margin: 0px;\n        padding: 0px;\n        background-color: var(--noflo-ui-background-shadow);\n        color: var(--noflo-ui-text);\n        border: 0px;\n        display: block;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 12px;\n        font-weight: 700;\n      }\n      .ports {\n        margin-bottom: 8px;\n      }\n      ul.ports li {\n        display: block;\n        position: relative;\n        clear: left;\n      }\n      ul.ports li label span {\n        float: left;\n        clear: left;\n        font-size: 12px;\n        padding-top: 0;\n        width: 87px;\n        line-height: 36px;\n        overflow: hidden;\n      }\n\n      ul.ports li p {\n        margin: 0px;\n        padding: 0px;\n        font-size: 10px;\n        margin-left: 87px;\n        margin-bottom: 3px;\n        line-height: 13px;\n        max-height: 26px;\n        overflow: hidden;\n        color: hsl(189, 50%, 80%);\n      }\n\n      /* Hide spinners */\n      input[type=number]::-webkit-inner-spin-button,\n      input[type=number]::-webkit-outer-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n      input[type=number] {\n        -moz-appearance:textfield;\n      }\n\n      ul.ports li button {\n        padding: 8px;\n        height: 19px;\n        width: 19px;\n      }\n      ul.ports li label button {\n        background-color: hsl(184, 50%, 11%);\n        color: hsl(184, 40%, 89%);\n        display: block;\n        padding: 8px;\n        height: 36px;\n        width: 36px;\n      }\n      ul.ports li label button:active {\n        color: white;\n      }\n      ul.ports li label i {\n        margin:0;\n      }\n      ul.ports li span.route {\n        /* TODO: route colors */\n        background-color: white;\n        float: none;\n        display: inline-block;\n        width: 125px;\n        height: 1px;\n        padding: 0;\n      }\n      ul.ports .remove-value {\n        background-color: transparent !important;\n        opacity: .3;\n        border: none !important;\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        line-height: 36px;\n        height: 36px;\n        width: 36px;\n        text-align: center;\n        padding: 0px;\n        font-size: 12px;\n      }\n      ul.ports li span.route0  { background-color: hsl(  0,100%,100%); }\n      ul.ports li span.route1  { background-color: hsl(  0, 98%, 46%); }\n      ul.ports li span.route2  { background-color: hsl( 35, 98%, 46%); }\n      ul.ports li span.route3  { background-color: hsl( 60, 98%, 46%); }\n      ul.ports li span.route4  { background-color: hsl(135, 98%, 46%); }\n      ul.ports li span.route5  { background-color: hsl(160, 98%, 46%); }\n      ul.ports li span.route6  { background-color: hsl(185, 98%, 46%); }\n      ul.ports li span.route7  { background-color: hsl(210, 98%, 46%); }\n      ul.ports li span.route8  { background-color: hsl(285, 98%, 46%); }\n      ul.ports li span.route9  { background-color: hsl(310, 98%, 46%); }\n      ul.ports li span.route10 { background-color: hsl(335, 98%, 46%); }\n\n\n      ul.ports li input {\n        -webkit-box-sizing: border-box;\n        -moz-box-sizing: border-box;\n        box-sizing: border-box;\n        width: 178px;\n        height: 36px;\n        border: none;\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        font-size: 10px;\n        padding: 9px 26px 9px 36px;\n        margin: 0px;\n      }\n      ul.ports li input[type=\"checkbox\"] {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        width: 18px;\n      }\n      ul.ports li input[type=\"checkbox\"]:before {\n        display: block;\n        content: '';\n        width: 177px;\n        height: 36px;\n        margin-top: -9px;\n        margin-left: -36px;\n        background-color: hsla( 0, 0%, 20%, .2);\n        color: hsl( 0, 0%, 75%);\n        border-left: 1px solid hsla( 0, 0%, 75%, 0.1);\n      }\n\n      ul.ports li select {\n        height: 18px;\n        margin-top: 9px;\n        margin-left: 36px;\n        max-width: 110px;\n      }\n\n      ul.ports li  input,\n      ul.ports li  button  {\n        background-color: hsla(  0,  0%, 30%, 0.35);\n        color:             hsl(  0,  0%, 90%);\n      }\n\n      ul.ports li:nth-child(even) input,\n      ul.ports li:nth-child(even) button {\n        background-color: hsla(210, 100%, 20%, .1);\n      }\n      ul.ports li:nth-child(odd) input,\n      ul.ports li:nth-child(odd) button {\n        background-color: hsla(190, 100%, 20%, .1);\n      }\n\n      ul.ports li.route0  input,\n      ul.ports li.route0  button  {\n        background-color: hsla(  0,  0%, 30%, 0.35);\n      }\n      ul.ports li.route1  input,\n      ul.ports li.route1  button  {\n        background-color: hsla(  0, 98%, 20%, 0.35);\n      }\n      ul.ports li.route2  input,\n      ul.ports li.route2  button  {\n        background-color: hsla( 35, 98%, 20%, 0.35);\n      }\n      ul.ports li.route3  input,\n      ul.ports li.route3  button  {\n        background-color: hsla( 60, 98%, 20%, 0.35);\n      }\n      ul.ports li.route4  input,\n      ul.ports li.route4  button  {\n        background-color: hsla(135, 98%, 20%, 0.35);\n      }\n      ul.ports li.route5  input,\n      ul.ports li.route5  button  {\n        background-color: hsla(160, 98%, 20%, 0.35);\n      }\n      ul.ports li.route6  input,\n      ul.ports li.route6  button  {\n        background-color: hsla(185, 98%, 20%, 0.35);\n      }\n      ul.ports li.route7  input,\n      ul.ports li.route7  button  {\n        background-color: hsla(210, 98%, 20%, 0.35);\n      }\n      ul.ports li.route8  input,\n      ul.ports li.route8  button  {\n        background-color: hsla(285, 98%, 20%, 0.35);\n      }\n      ul.ports li.route9  input,\n      ul.ports li.route9  button  {\n        background-color: hsla(310, 98%, 20%, 0.35);\n      }\n      ul.ports li.route10 input,\n      ul.ports li.route10 button  {\n        background-color: hsla(335, 98%, 20%, 0.35);\n      }\n\n\n      ul.ports li.error input {\n        background-color: rgb(121, 18, 18);\n        border: 1px solid red;\n      }\n\n\n      ul.ports li         label > span { color: hsl(  0,  0%, 75%);}\n      ul.ports li.route0  label > span { color: hsl(  0,  0%,100%);}\n      ul.ports li.route1  label > span { color: hsl(  0, 98%, 46%);}\n      ul.ports li.route2  label > span { color: hsl( 35, 98%, 46%);}\n      ul.ports li.route3  label > span { color: hsl( 60, 98%, 46%);}\n      ul.ports li.route4  label > span { color: hsl(135, 98%, 46%);}\n      ul.ports li.route5  label > span { color: hsl(160, 98%, 46%);}\n      ul.ports li.route6  label > span { color: hsl(185, 98%, 46%);}\n      ul.ports li.route7  label > span { color: hsl(210, 98%, 46%);}\n      ul.ports li.route8  label > span { color: hsl(285, 98%, 46%);}\n      ul.ports li.route9  label > span { color: hsl(310, 98%, 46%);}\n      ul.ports li.route10 label > span { color: hsl(335, 98%, 46%);}\n\n\n\n      ul.ports  li        input,\n      ul.ports  li        button {\n        border-left: 1px solid hsla(  0,  0%, 75%, 0.5);\n      }\n      ul.ports  li.route0 input,\n      ul.ports  li.route0 button {\n        border-left: 1px solid hsla(  0,  0%,100%, 0.5);\n      }\n      ul.ports  li.route1 input,\n      ul.ports  li.route1 button {\n        border-left: 1px solid hsla(  0, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route2 input,\n      ul.ports  li.route2 button {\n        border-left: 1px solid hsla( 35, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route3 input,\n      ul.ports  li.route3 button {\n        border-left: 1px solid hsla( 60, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route4 input,\n      ul.ports  li.route4 button {\n        border-left: 1px solid hsla(135, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route5 input,\n      ul.ports  li.route5 button {\n        border-left: 1px solid hsla(160, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route6 input,\n      ul.ports  li.route6 button {\n        border-left: 1px solid hsla(185, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route7 input,\n      ul.ports  li.route7 button {\n        border-left: 1px solid hsla(210, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route8 input,\n      ul.ports  li.route8 button {\n        border-left: 1px solid hsla(285, 98%, 46%, 0.5);\n      }\n      ul.ports  li.route9 input,\n      ul.ports  li.route9 button {\n        border-left: 1px solid hsla(310, 98%, 46%, 0.5);\n      }\n      ul.ports li.route10 input,\n      ul.ports li.route10 button {\n        border-left: 1px solid hsla(335, 98%, 46%, 0.5);\n      }\n\n      number-scrubber,\n      ul.ports li label span:before {\n        display: inline;\n        line-height: 36px;\n        font-size: 10px;\n        float: right;\n        position: absolute;\n        left: 86px;\n        text-transform: uppercase;\n        opacity: 0.5;\n        width: 36px;\n        text-align: center;\n      }\n\n      number-scrubber {\n        z-index: 5;\n        height: 36px;\n      }\n\n      ul.ports li.port-type-color label span:before,\n      ul.ports li.port-type-int label span:before,\n      ul.ports li.port-type-number label span:before {\n        content: '#';\n      }\n      ul.ports li.port-type-array label span:before {\n        content: '[]';\n      }\n      ul.ports li.port-type-object label span:before {\n        content: '{}';\n      }\n      ul.ports li.port-type-string label span:before {\n        content: '\"';\n      }\n      ul.ports li.port-type-all label span:before {\n        content: '*';\n      }\n\n      section.errors header {\n        display: flex;\n        justify-content: space-between;\n      }\n      section.errors header h2 {\n        font-size: 10px;\n        font-weight: normal;\n        line-height: 36px;\n        margin-bottom: 0px;\n        padding-bottom: 0px;\n        position: static;\n        text-align: left;\n        color: var(--noflo-ui-text);\n      }\n      section.errors ul.toolbar {\n        display: inline-block;\n      }\n\n      ul#errorEvents {\n        max-height: 140px;\n        overflow-x: hidden;\n        overflow-y: auto;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: thin;\n        clear: left;\n      }\n      ul#errorEvents li {\n        font-size: 10px;\n        line-height: 14px;\n        margin-bottom: 0px;\n        color: hsl(185,100%,75%);\n        max-height: 56px;\n        overflow: hidden;\n        margin-bottom: 2px;\n        padding-bottom: 2px;\n        border-bottom: 1px solid hsla(190, 30%, 2%, 0.4);\n      }\n    </style>\n    <header>\n      <input type=\"text\" on-keydown=\"checkUpdateLabel\" on-blur=\"updateLabel\" class=\"editable-title\" value=\"{{label}}\">\n      <template is=\"dom-if\" if=\"{{_computeIf(node)}}\">\n        <h2>{{node.component}}</h2>\n      </template>\n    </header>\n    <ul class=\"ports\">\n      <template is=\"dom-repeat\" items=\"{{inports}}\" as=\"port\">\n        <li class\\$=\"{{_computeClass(port)}}\">\n          <label><span title=\"{{port.name}}\">{{port.label}}</span>\n\n            <template is=\"dom-if\" if=\"{{_computeIf2(port)}}\">\n              <button data-name\\$=\"{{port.name}}\" on-click=\"sendBang\">\n                <noflo-icon icon=\"bolt\"></noflo-icon>\n              </button>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf3(port)}}\">\n              <input type=\"checkbox\" data-name\\$=\"{{port.name}}\" checked=\"{{port.value}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{port.values}}\">\n              <select data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" value=\"{{port.value::input}}\" data-type\\$=\"{{port.type}}\">\n                <option></option>\n                <template is=\"dom-repeat\" items=\"{{port.values}}\" as=\"value\">\n                  <option value=\"[[value]]\" selected\\$=\"{{_computeSelected(port, value)}}\">{{value}}</option>\n                </template>\n              </select>\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf4(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"1\" data-type=\"int\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"int\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf5(port)}}\">\n              <number-scrubber data-name\\$=\"{{port.name}}\" value=\"{{port.value}}\" step=\"0.01\" data-type=\"number\" on-scrubstart=\"scrubStart\" on-scrub=\"updateValue\" on-scrubend=\"scrubEnd\">#</number-scrubber>\n              <input type=\"text\" data-type=\"number\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" on-change=\"updateValue\" on-keydown=\"checkEnter\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf6(port)}}\">\n              <input type=\"{{port.inputType}}\" data-name\\$=\"{{port.name}}\" value=\"{{port.value::input}}\" autocapitalize=\"off\" autocorrect=\"off\" on-keydown=\"checkEnter\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf7(port)}}\">\n              <input type=\"text\" data-name\\$=\"{{port.name}}\" data-type=\"string\" on-change=\"updateValue\">\n              <input type=\"file\" data-name\\$=\"{{port.name}}\" on-change=\"updateValue\" data-type\\$=\"{{port.type}}\">\n            </template>\n            <template is=\"dom-if\" if=\"{{_computeIf8(port)}}\">\n              <button class=\"remove-value\" on-click=\"removeValue\" data-port\\$=\"{{port.name}}\" title=\"Clear data\">\n                <noflo-icon icon=\"ban\"></noflo-icon>\n              </button>\n            </template>\n\n          </label>\n          <template is=\"dom-if\" if=\"{{port.description}}\">\n          <p>{{port.description}}</p>\n          </template>\n        </li>\n      </template>\n    </ul>\n    <template is=\"dom-if\" if=\"[[errorLog.length]]\">\n    <section class=\"errors\">\n      <header>\n        <h2>Errors</h2>\n        <ul class=\"toolbar\">\n          <li>\n            <button id=\"clear\" on-click=\"clearErrors\" class=\"blue-button\" title=\"Clear Error Log\">\n              <noflo-icon icon=\"ban\"></noflo-icon>\n            </button>\n          </li>\n        </ul>\n      </header>\n      <ul id=\"errorEvents\">\n        <template is=\"dom-repeat\" items=\"[[errorLog]]\" as=\"event\">\n          <li>{{ event.payload.error }}</li>\n        </template>\n      </ul>\n    </section></template>\n`,\n\n  is: 'noflo-node-inspector',\n\n  properties: {\n    component: {\n      value: null,\n      notify: true,\n      observer: 'componentChanged',\n    },\n    errorLog: {\n      value() {\n        return [];\n      },\n      notify: true,\n    },\n    graph: {\n      value: null,\n      notify: true,\n      observer: 'graphChanged',\n    },\n    inports: {\n      type: Array,\n      value() {\n        return [];\n      },\n    },\n    label: {\n      type: String,\n      value: '',\n    },\n    lastErrorLog: {\n      type: Number,\n      value: 0,\n    },\n    node: {\n      value: null,\n      notify: true,\n      observer: 'nodeChanged',\n    },\n    scrubbing: {\n      type: Boolean,\n      value: false,\n    },\n    showErrorLogs: {\n      type: Number,\n      value: 20,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n  },\n\n  nodeChanged() {\n    if (!this.node) {\n      return;\n    }\n    this.updatePorts();\n    this.label = this.node.metadata.label;\n  },\n\n  componentChanged() {\n    if (!this.component) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  graphChanged() {\n    if (!this.graph) {\n      return;\n    }\n    this.updatePorts();\n  },\n\n  checkUpdateLabel(event) {\n    if (event.keyCode === 13) {\n      // Enter\n      event.preventDefault();\n      this.updateLabel(event);\n    }\n  },\n\n  updateLabel(event) {\n    // Check if we need to make change\n    const label = event.currentTarget.value;\n    if (label === this.node.metadata.label) {\n      return;\n    }\n    this.graph.startTransaction('rename');\n    // Change id\n    let id = label;\n    if (id !== this.node.id) {\n      // Ensure unique\n      while (this.graph.getNode(id)) {\n        let num = 60466176;\n        // 36^5\n        num = Math.floor(Math.random() * num);\n        id = `${label}_${num.toString(36)}`;\n      }\n      this.graph.renameNode(this.node.id, id);\n    }\n    // Change label\n    this.graph.setNodeMetadata(id, { label });\n    this.graph.endTransaction('rename');\n  },\n\n  getPortValue(port) {\n    let value;\n    this.graph.initializers.forEach((iip) => {\n      if (iip.to.node === this.node.id && iip.to.port === port) {\n        value = iip.from.data;\n      }\n    });\n    return value;\n  },\n\n  getPortConnection(port) {\n    let connected = false;\n    let route = 'X';\n    Object.keys(this.graph.inports).forEach((name) => {\n      const inport = this.graph.inports[name];\n      if (inport.process === this.node.id && inport.port === port) {\n        connected = true;\n        route = 2;\n      }\n    });\n    this.graph.edges.forEach((edge) => {\n      if (edge.to.node === this.node.id && edge.to.port === port) {\n        connected = true;\n        route = edge.metadata.route || 0;\n      }\n    });\n    return {\n      connected,\n      route,\n    };\n  },\n\n  portToInput(port) {\n    const value = this.getPortValue(port.name);\n    const connection = this.getPortConnection(port.name);\n    const portDef = {\n      name: port.name,\n      label: port.name.replace(/(.*)\\/(.*)(_.*)\\.(.*)/, '$2.$4'),\n      class: '',\n      type: port.type,\n      description: port.description,\n      inputType: port.type,\n      value,\n      values: port.values,\n      route: connection.route,\n    };\n    switch (port.type) {\n      case 'object':\n      case 'array':\n        portDef.value = JSON.stringify(value);\n        portDef.inputType = 'text';\n        break;\n      case 'int':\n        portDef.inputType = 'number';\n        break;\n      case 'all':\n      default:\n        portDef.inputType = 'text';\n        break;\n    }\n    return portDef;\n  },\n\n  inputToPort(input) {\n    const dataType = input.getAttribute('data-type');\n    switch (dataType) {\n      case 'object':\n      case 'array':\n        try {\n          return JSON.parse(input.value);\n        } catch (e) {\n          return input.value;\n        }\n      case 'boolean':\n        return input.checked;\n      case 'number':\n        return parseFloat(input.value);\n      case 'int':\n        return parseInt(input.value, 10);\n      case 'date':\n        return new Date(input.value);\n      case 'uri':\n        return (callback) => {\n          const reader = new FileReader();\n          reader.onload = () => {\n            callback(reader.result);\n          };\n          reader.readAsDataURL(input.files[0]);\n        };\n      default:\n        return input.value;\n    }\n  },\n\n  updatePorts() {\n    this.set('inports', []);\n    if (!this.component || !this.graph) {\n      return;\n    }\n    this.component.inports.forEach((port) => {\n      const portDef = this.portToInput(port);\n      this.push('inports', portDef);\n    });\n  },\n\n  checkEnter(event) {\n    if (event.keyCode === 13) {\n      event.preventDefault();\n      this.updateValue(event);\n    }\n  },\n\n  updateValue(event) {\n    event.preventDefault();\n    const value = this.inputToPort(event.currentTarget);\n    const name = event.currentTarget.getAttribute('data-name');\n    let port;\n    this.inports.forEach((p) => {\n      if (p.name === name) {\n        port = p;\n      }\n    });\n    if (port.type !== 'string' && event.currentTarget.value === '') {\n      // Empty string should remove number, object, array IIPs\n      this.removeValue(event);\n      return;\n    }\n    const validatePortValue = (type, val) => {\n      switch (type) {\n        case 'number':\n        case 'int':\n          return val !== '' && !Number.isNaN(val);\n        case 'object':\n          return val instanceof Object;\n        case 'array':\n          return val instanceof Array;\n        case 'date':\n          return val instanceof Date;\n        default:\n          return true;\n      }\n    };\n    const setPortValue = () => {\n      if (!this.scrubbing) {\n        this.graph.startTransaction('iipchange');\n      }\n      this.graph.removeInitial(this.node.id, name);\n      this.graph.addInitial(value, this.node.id, name);\n      if (!this.scrubbing) {\n        this.graph.endTransaction('iipchange');\n        // Force Polymer to update view\n        this.updatePorts();\n      }\n    };\n    if (validatePortValue(port.type, value)) {\n      if (typeof value === 'function') {\n        // async callback\n        value(setPortValue);\n      } else {\n        setPortValue(value);\n      }\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    } else {\n      PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.add('error');\n    }\n  },\n\n  scrubStart(event) {\n    if (event.currentTarget.value === null) {\n      // eslint-disable-next-line no-param-reassign\n      event.currentTarget.value = 0;\n    }\n  },\n\n  // This need to work with the journal\n  // this.scrubbing = true;\n  // this.graph.startTransaction('iipscrub');\n  scrubEnd() {\n  },\n\n  // this.graph.endTransaction('iipscrub');\n  // this.scrubbing = false;\n  removeValue(event) {\n    event.preventDefault();\n    let name = event.currentTarget.getAttribute('data-port');\n    if (!name) {\n      name = event.currentTarget.getAttribute('data-name');\n    }\n    this.graph.removeInitial(this.node.id, name);\n    PolymerDom(PolymerDom(PolymerDom(event.currentTarget).parentNode).parentNode).classList.remove('error');\n    this.updatePorts();\n  },\n\n  sendBang(event) {\n    event.preventDefault();\n    const name = event.currentTarget.getAttribute('data-name');\n    this.graph.startTransaction('bang');\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.addInitial(true, this.node.id, name);\n    this.graph.removeInitial(this.node.id, name);\n    this.graph.endTransaction('bang');\n  },\n\n  clearErrors() {\n    this.fire('clear:runtimeevents', {\n      id: this.node.id,\n      type: 'processerror',\n    });\n  },\n\n  _computeIf(node) {\n    if (!node) {\n      return true;\n    }\n    return node.label !== node.component;\n  },\n\n  _computeClass(port) {\n    return `route route${port.route} ${port.class} port-type-${port.type}`;\n  },\n\n  _computeIf2(port) {\n    return port.type === 'bang';\n  },\n\n  _computeIf3(port) {\n    return port.type === 'boolean';\n  },\n\n  _computeIf4(port) {\n    return port.type === 'int' && !port.values;\n  },\n\n  _computeIf5(port) {\n    return port.type === 'number' && !port.values;\n  },\n\n  _computeIf6(port) {\n    return port.type !== 'bang' && port.type !== 'boolean' && port.type !== 'int' && port.type !== 'number' && port.type !== 'uri' && !port.values;\n  },\n\n  _computeIf7(port) {\n    return port.type === 'uri';\n  },\n\n  _computeIf8(port) {\n    return port.type !== 'bang' && port.value !== undefined;\n  },\n\n  _computeSelected(port, value) {\n    return port.value === value;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\nimport './the-card-styles';\n\nPolymer({\n  _template: html`\n    <style include=\"the-card-styles\">\n      :host {\n        display: block;\n        background-color: var(--noflo-ui-background) !important;\n        color: var(--noflo-ui-text);\n        background-image: radial-gradient(1px at 0px 0px, hsl(210, 50%, 60%) 0.5px, hsla(0, 0%, 0%, 0) 1px);\n        background-size: calc(100% - 1px) 100%;\n        background-position: 0px;\n      }\n      h1 {\n        font-size:15px;\n      }\n      ul.toolbar2right {\n        right: 0px !important;\n      }\n      ul.routes {\n        margin: 0;\n        margin-left: 0px;\n        margin-right: 0px;\n        padding-top: 10px;\n      }\n      ul.routes li {\n        display: inline-block;\n        position: relative;\n        float: left;\n        margin: 0px;\n        height: 26px;\n      }\n      ul.routes li button:hover {\n        opacity: 1;\n      }\n      ul.routes li button {\n        opacity: 0.7;\n        display: block;\n        padding: 0px;\n        margin: 0;\n        width: 100%;\n        height: 100%;\n        -webkit-box-sizing: border-box;\n        -mox-box-sizing: border-box;\n        box-sizing: border-box;\n        border: none;\n      }\n\n      .routes button {\n        width: 25px !important;\n        height: 20px !important;\n        background-color: hsla(  0, 98%, 100%, .8);\n        border: 1px solid hsl(  0, 98%, 46%);\n      }\n      .routes button.route0  {\n        background-color: hsla(  0, 98%, 100%, .8);\n        border-color:      hsl(  0, 98%, 46%);\n      }\n      .routes button.route1  {\n        background-color: hsla(  0, 98%, 46%, .8);\n        border-color:      hsl(  0, 98%, 46%);\n      }\n      .routes button.route2  {\n        background-color: hsla( 35, 98%, 46%, .8);\n        border-color:      hsl( 35, 98%, 46%);\n      }\n      .routes button.route3  {\n        background-color: hsla( 60, 98%, 46%, .8);\n        border-color:      hsl( 60, 98%, 46%);\n      }\n      .routes button.route4  {\n        background-color: hsla(135, 98%, 46%, .8);\n        border-color:      hsl(135, 98%, 46%);\n      }\n      .routes button.route5  {\n        background-color: hsla(160, 98%, 46%, .8);\n        border-color:      hsl(160, 98%, 46%);\n      }\n      .routes button.route6  {\n        background-color: hsla(185, 98%, 46%, .8);\n        border-color:      hsl(185, 98%, 46%);\n      }\n      .routes button.route7  {\n        background-color: hsla(210, 98%, 46%, .8);\n        border-color:      hsl(210, 98%, 46%);\n      }\n      .routes button.route8  {\n        background-color: hsla(285, 98%, 46%, .8);\n        border-color:      hsl(285, 98%, 46%);\n      }\n      .routes button.route9  {\n        background-color: hsla(310, 98%, 46%, .8);\n        border-color:      hsl(310, 98%, 46%);\n      }\n      .routes button.route10 {\n        background-color: hsla(335, 98%, 46%, .8);\n        border-color:      hsl(335, 98%, 46%);\n      }\n\n      .routes  button.route0:hover  { background-color: hsla(  0, 98%, 100%, 1); }\n      .routes  button.route1:hover  { background-color: hsla(  0, 98%, 46%, 1); }\n      .routes  button.route2:hover  { background-color: hsla( 35, 98%, 46%, 1); }\n      .routes  button.route3:hover  { background-color: hsla( 60, 98%, 46%, 1); }\n      .routes  button.route4:hover  { background-color: hsla(135, 98%, 46%, 1); }\n      .routes  button.route5:hover  { background-color: hsla(160, 98%, 46%, 1); }\n      .routes  button.route6:hover  { background-color: hsla(185, 98%, 46%, 1); }\n      .routes  button.route7:hover  { background-color: hsla(210, 98%, 46%, 1); }\n      .routes  button.route8:hover  { background-color: hsla(285, 98%, 46%, 1); }\n      .routes  button.route9:hover  { background-color: hsla(310, 98%, 46%, 1); }\n      .routes button.route10:hover  { background-color: hsla(335, 98%, 46%, 1); }\n    </style>\n    <header>\n      <h1 slot=\"header\" class=\"clear\" on-click=\"clear\"><span>{{ edges.length}}</span> <template is=\"dom-if\" if=\"{{_computeIf(edges)}}\">Edges</template><template is=\"dom-if\" if=\"{{_computeIf2(edges)}}\">Edge</template></h1>\n    </header>\n    <ul class=\"toolbar toolbar2right\">\n      <template is=\"dom-if\" if=\"{{secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setUnsecure\" title=\"Set as visible\">\n            <noflo-icon icon=\"lock\"></noflo-icon>&nbsp;Secure\n          </button>\n        </li>\n      </template>\n      <template is=\"dom-if\" if=\"{{!secure}}\">\n        <li>\n          <button class=\"blue-button\" on-click=\"setSecure\" title=\"Set as hidden\">\n            <noflo-icon icon=\"unlock\"></noflo-icon>&nbsp;Visible\n          </button>\n        </li>\n      </template>\n    </ul>\n    <ul class=\"routes\">\n      <template is=\"dom-repeat\" items=\"{{routes}}\" as=\"route\">\n        <li><button name=\"{{route}}\" on-click=\"setRoute\" class\\$=\"{{_computeClass(route)}}\"></button></li>\n      </template>\n    </ul>\n`,\n\n  is: 'noflo-edge-menu',\n\n  properties: {\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      notify: true,\n      observer: 'edgesChanged',\n    },\n    graph: { value: null },\n    routes: {\n      type: Array,\n      value() {\n        return [\n          0,\n          1,\n          2,\n          3,\n          4,\n          5,\n          6,\n          7,\n          9,\n          10,\n        ];\n      },\n    },\n    secure: {\n      type: Boolean,\n      value: false,\n    },\n  },\n\n  attached() {\n    PolymerDom(this).classList.add('the-card-content');\n    PolymerDom(this).classList.add('sticky-head');\n  },\n\n  edgesChanged() {\n    if (!this.edges.length) {\n      return;\n    }\n    this.secure = true;\n    for (let i = 0; i < this.edges.length; i += 1) {\n      if (!this.edges[i].metadata.secure) {\n        this.secure = false;\n        return;\n      }\n    }\n  },\n\n  clear(event) {\n    event.preventDefault();\n    let edge;\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n  },\n\n  remove(event) {\n    event.preventDefault();\n    while (this.edges.length) {\n      const edge = this.pop('edges');\n      if (PolymerDom(edge).parentNode) {\n        PolymerDom(PolymerDom(edge).parentNode).removeChild(edge);\n      }\n    }\n  },\n\n  setRoute(event) {\n    event.preventDefault();\n    const route = parseInt(event.currentTarget.getAttribute('name'), 10);\n    this.graph.startTransaction('changeroute');\n    this.edges.forEach((edge) => {\n      this.graph.setEdgeMetadata(\n        edge.from.node,\n        edge.from.port,\n        edge.to.node,\n        edge.to.port,\n        {\n          route,\n        },\n      );\n    });\n    this.graph.endTransaction('changeroute');\n  },\n\n  setSecure(event) {\n    event.preventDefault();\n    this.toggleSecure(true);\n  },\n\n  setUnsecure(event) {\n    event.preventDefault();\n    this.toggleSecure(false);\n  },\n\n  toggleSecure(secure) {\n    this.graph.startTransaction('changesecure');\n    this.edges.forEach((edge) => {\n      const meta = edge.metadata;\n      meta.secure = secure;\n      this.graph.setEdgeMetadata(edge.from.node, edge.from.port, edge.to.node, edge.to.port, meta);\n    });\n    this.graph.endTransaction('changesecure');\n    this.secure = secure;\n  },\n\n  _computeIf(edges) {\n    return edges.length > 1;\n  },\n\n  _computeIf2(edges) {\n    return edges.length === 1;\n  },\n\n  _computeClass(route) {\n    return `route${route}`;\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport ReactDOM from 'react-dom';\nimport RuntimeEvents from '../src/components/RuntimeEvents';\nimport './noflo-node-inspector';\nimport './noflo-edge-menu';\nimport './the-panel';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      the-panel {\n        background-color: var(--noflo-ui-background) !important;\n        transition: left 0.3s ease-in-out, bottom 0.3s ease-in-out, right 0.3s ease-in-out, top 0.3s ease-in-out, width 0.1s ease-in-out;\n        position: fixed;\n        border: 0px solid var(--noflo-ui-border);\n        box-sizing: border-box;\n        padding-left: 7px;\n        padding-right: 7px;\n        bottom: 0px;\n        border-top-width: 1px;\n        height: 100vh;\n        padding-top: 36px;\n        z-index: 3;\n      }\n      the-panel:before {\n        font-family: FontAwesomeSVG;\n        content: '\\\\f16c';\n        color: var(--noflo-ui-border-highlight);\n        position: absolute;\n        text-align: center;\n        top: 0px;\n        height: 36px;\n        line-height: 36px;\n        left: 50%;\n        left: calc(50% - 7px);\n        font-size: 17px;\n        opacity: 0.25;\n        transition: opacity 0.3s ease-in-out;\n      }\n      the-panel:not([open]):before {\n        opacity: 1;\n        cursor: n-resize;\n      }\n      the-panel#fixed main {\n        height: 288px;\n      }\n      the-panel#fixed main .react-fluid-table .cell {\n        user-select: text;\n        -webkit-user-select: text;\n      }\n      the-panel#fixed main .react-fluid-table .cell,\n      the-panel#fixed main .react-fluid-table .header-cell {\n        box-sizing: border-box;\n        display: flex;\n        padding: 7px;\n      }\n      the-panel#fixed main .react-fluid-table-container {\n        will-change: height;\n      }\n      the-panel#fixed main .sticky-header {\n        position: sticky;\n        top: 0;\n        left: 0;\n        width: 100%;\n        z-index: 1;\n      }\n      the-panel#fixed main .row-wrapper {\n        display: nline-block;\n      }\n      the-panel#fixed main .react-fluid-table-header {\n        display: flex;\n        border-bottom: 1px solid var(--noflo-ui-border);\n        background-color: var(--noflo-ui-background);\n        z-index: 2;\n      }\n      the-panel#fixed main .header-cell {\n        align-items: baseline;\n      }\n      the-panel#fixed main .header-cell-text {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        font-size: 10px;\n        font-weight: bold;\n        line-height: 14px;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .header-cell-arrow {\n        width: 0;\n        height: 0;\n        margin-left: 4px;\n        border-left: 5px solid transparent;\n        border-right: 5px solid transparent;\n      }\n      the-panel#fixed main .header-cell-arrow.asc {\n      }\n      the-panel#fixed main .header-cell-arrow.desc {\n      }\n      the-panel#fixed main .react-fluid-table-row {\n      }\n      the-panel#fixed main .react-fluid-table-row .hidden {\n        display: none;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details {\n        color: var(--noflo-ui-text);\n        background-color: var(--noflo-ui-background);\n        box-shadow: var(--noflo-ui-background) 0px 0px 2px;\n        border: 1px solid var(--noflo-ui-text-highlight);\n        /* This is a workaround for react-fluid-table not recalculating on expand, most likely due to Shadow DOM */\n        position: absolute;\n        z-index: 1;\n        right: 7px;\n        width: max(60%, 288px);\n        height: 144px;\n        overflow-y: auto;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dl {\n        margin: 0px;\n        padding: 7px;\n        font-size: 10px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dt {\n        font-weight: bold;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd {\n        margin: 0px;\n      }\n      the-panel#fixed main .react-fluid-table-row .packet-details dd.packet-data {\n        white-space: pre-wrap;\n        user-select: text;\n        -webkit-user-select: text;\n      }\n      the-panel#fixed main .row-container {\n        display: flex;\n      }\n      the-panel#fixed main .cell {\n        align-items: center;\n        position: relative;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        font-size: 10px;\n        line-height: 14px;\n        color: var(--noflo-ui-text);\n      }\n      the-panel#fixed main .cell .openBracket {\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .openBracket:before {\n        display: inline;\n        content: '<';\n      }\n      the-panel#fixed main .cell .openBracket:after {\n        display: inline;\n        content: '>';\n      }\n      the-panel#fixed main .cell .closeBracket {\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .closeBracket:before {\n        display: inline;\n        content: '</';\n      }\n      the-panel#fixed main .cell .closeBracket:after {\n        display: inline;\n        content: '>';\n      }\n      the-panel#fixed main .cell .expander {\n        cursor: pointer;\n        height: 1em;\n        width: 1em;\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge {\n        font-weight: bold;\n      }\n      the-panel#fixed main .cell .edge .subgraph {\n        margin-right: 7px;\n        color: var(--noflo-ui-border);\n      }\n      the-panel#fixed main .cell .edge .source span {\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .target span {\n        margin-left: 7px;\n      }\n      the-panel#fixed main .cell .edge .port-id {\n        text-transform: uppercase;\n      }\n      the-panel#fixed main .cell .edge .arrow {\n        margin-left: 7px;\n        margin-right: 7px;\n      }\n      the-panel#fixed main .cell .edge .connection {\n        color: var(--noflo-ui-text-highlight);\n      }\n      the-panel#fixed main .cell .edge .route0 { color: #fff; }\n      the-panel#fixed main .cell .edge .route1 { color: hsl(  0,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route2 { color: hsl( 35,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route3 { color: hsl( 60,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route4 { color: hsl(135,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route5 { color: hsl(160,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route6 { color: hsl(185,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route7 { color: hsl(210,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route8 { color: hsl(285,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route9 { color: hsl(310,  98%, 46%); }\n      the-panel#fixed main .cell .edge .route10 { color: hsl(335,  98%, 46%); }\n    </style>\n    <the-panel id=\"fixed\" edge=\"bottom\" size=\"324\" handle=\"36\" open={{showPackets}}>\n      <main id=\"fixedmain\">\n      </main>\n    </the-panel>\n  `,\n  is: 'noflo-packets',\n  properties: {\n    currentgraph: { value: null },\n    edges: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'edgesChanged',\n    },\n    editor: { value: null },\n    events: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'eventsChanged',\n    },\n    packets: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'packetsChanged',\n    },\n    nodeInspectors: {\n      type: Object,\n      value() {\n        return {};\n      },\n    },\n    nodes: {\n      type: Array,\n      value() {\n        return [];\n      },\n      observer: 'nodesChanged',\n    },\n    panel: { value: null },\n    showPackets: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n    width: {\n      type: Number,\n      value: 800,\n      notify: true,\n      observer: 'widthChanged',\n    },\n    readonly: { notify: true },\n  },\n  attached() {\n    window.addEventListener('keyup', (e) => {\n      if (e.keyCode === 27) {\n        this.clearSelection();\n      }\n    });\n    this.frameRequest = null;\n  },\n  clearSelection() {\n    let edge; let\n      node;\n    // Clear selections on Esc\n    while (this.edges.length) {\n      edge = this.pop('edges');\n      edge.selected = false;\n    }\n    while (this.nodes.length) {\n      node = this.pop('nodes');\n      node.selected = false;\n    }\n  },\n  edgesChanged(newEdges, oldEdges) {\n    if (this.edges.length) {\n      this.showEdgeCards();\n    } else {\n      this.hideEdgeCards();\n    }\n    this.updatePacketInspector();\n    if (newEdges.length && !oldEdges.length && this.packets.length) {\n      // Show packet inspector when selecting an edge\n      this.showPackets = true;\n    }\n  },\n  widthChanged() {\n    this.updatePacketInspector();\n  },\n  eventsChanged() {\n    // Clear previous state\n    if (this.editor) {\n      this.editor.clearErrorNodes();\n    }\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      this.nodeInspectors[id].inspector.errorLog = [];\n    });\n\n    if (!this.events) {\n      return;\n    }\n    this.events.forEach((event) => {\n      if (event.type !== 'processerror' || !event.payload.id) {\n        return;\n      }\n      // TODO: Check that process is in current graph\n      if (this.editor) {\n        this.editor.addErrorNode(event.payload.id);\n      }\n      if (this.nodeInspectors[event.payload.id]) {\n        this.nodeInspectors[event.payload.id].inspector.push('errorLog', event);\n      }\n    });\n  },\n  genId(source, target) {\n    let fromStr;\n    if (source) {\n      fromStr = `${source.node} ${source.port.toUpperCase()}`;\n    } else {\n      fromStr = 'DATA';\n    }\n    const toStr = `${target.port.toUpperCase()} ${target.node}`;\n    return `${fromStr} -> ${toStr}`;\n  },\n  genEdgeId(edge) {\n    return this.genId(edge.from, edge.to);\n  },\n  showEdgeCards() {\n    if (this.edgeMenu) {\n      if (this.readonly) {\n        PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n        this.edgeMenu = null;\n      } else {\n        this.set('edgeMenu.dialog.edges', this.edges);\n      }\n    } else if (!this.readonly) {\n      const menu = document.createElement('noflo-edge-menu');\n      menu.edges = this.edges;\n      menu.graph = this.currentgraph;\n      this.edgeMenu = document.createElement('the-card');\n      this.set('edgeMenu.type', 'edge-menu');\n      this.set('edgeMenu.dialog', menu);\n      PolymerDom(this.edgeMenu).appendChild(menu);\n      this.edgeMenu.addTo(this.panel);\n    }\n  },\n  packetsChanged(newPackets, oldPackets) {\n    this.updatePacketInspector();\n    if (newPackets && newPackets.length && (!oldPackets || !oldPackets.length)) {\n      // Show packet inspector when first packets arrive\n      this.showPackets = true;\n    }\n    if ((!newPackets || !newPackets.length) && oldPackets && oldPackets.length) {\n      this.showPackets = false;\n    }\n  },\n  updatePacketInspector() {\n    if (this.frameRequest) {\n      return;\n    }\n    this.frameRequest = requestAnimationFrame(() => {\n      this.frameRequest = null;\n      const edgeIds = this.currentgraph\n        ? this.currentgraph.edges.map((e) => this.genEdgeId(e)) : [];\n      const selectedEdgeIds = this.edges.map((e) => this.genEdgeId(e));\n      const packets = this.packets\n        .map((p, idx) => {\n          const packetId = this.genId(p.src, p.tgt);\n          let packetEdge;\n          if (this.currentgraph && edgeIds.indexOf(packetId) !== -1) {\n            packetEdge = this.currentgraph.edges[edgeIds.indexOf(packetId)];\n          }\n          return {\n            ...p,\n            rowId: `${idx + 1}`,\n            id: packetId,\n            edge: packetEdge,\n          };\n        })\n        .filter((p) => {\n          if (!selectedEdgeIds.length) {\n            // Show all packets when no edges are selected\n            return true;\n          }\n          return (selectedEdgeIds.indexOf(p.id) !== -1);\n        });\n      const container = this.shadowRoot.getElementById('fixedmain');\n      ReactDOM.render(RuntimeEvents({\n        packets,\n        width: container.offsetWidth, // TODO: Update on resize\n      }), container);\n    });\n  },\n  hideEdgeCards() {\n    if (this.edgeMenu) {\n      PolymerDom(PolymerDom(this.edgeMenu).parentNode).removeChild(this.edgeMenu);\n      this.edgeMenu = null;\n    }\n  },\n  nodesChanged() {\n    if (this.nodes.length) {\n      this.showNodeCards();\n    } else {\n      this.hideNodeCards();\n    }\n  },\n  showNodeCards() {\n    this.nodes.forEach((node) => {\n      const { id } = node;\n      if (this.nodeInspectors[id]) {\n        return;\n      }\n      if (this.readonly) {\n        return;\n      }\n      const inspector = document.createElement('noflo-node-inspector');\n      inspector.node = node;\n      inspector.component = this.editor.getComponent(node.component);\n      inspector.graph = this.currentgraph;\n      if (this.events) {\n        inspector.errorLog = this.events.filter((event) => {\n          if (event.type !== 'processerror') {\n            return false;\n          }\n          if (event.payload.id !== id) {\n            return false;\n          }\n          return true;\n        });\n      }\n      this.nodeInspectors[id] = document.createElement('the-card');\n      this.nodeInspectors[id].type = 'node-inspector';\n      this.nodeInspectors[id].inspector = inspector;\n      PolymerDom(this.nodeInspectors[id]).appendChild(inspector);\n      this.nodeInspectors[id].addTo(this.panel);\n    });\n    let found;\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      found = false;\n      this.nodes.forEach((node) => {\n        if (node.id === id) {\n          found = true;\n        }\n      });\n      if (!found) {\n        PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n          .removeChild(this.nodeInspectors[id]);\n        delete this.nodeInspectors[id];\n      }\n    });\n  },\n  hideNodeCards() {\n    Object.keys(this.nodeInspectors).forEach((id) => {\n      PolymerDom(PolymerDom(this.nodeInspectors[id]).parentNode)\n        .removeChild(this.nodeInspectors[id]);\n      delete this.nodeInspectors[id];\n    });\n  },\n});\n","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport './noflo-icon';\n\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n        text-align: center;\n        background-color: hsl(35, 98%, 46%);\n        color: white;\n        border-bottom: 1px black solid;\n        padding: 18px;\n      }\n      :host(.error) {\n        background-color: hsl(0, 98%, 46%);\n      }\n      a {\n        color: hsl(0, 98%, 46%);\n        background-color: white;\n        display: inline-block;\n        padding: 9px;\n        text-decoration: none;\n        font-size: 12px;\n        border-radius: 3px;\n      }\n\n      /* /deep/ animations don't work: https://github.com/Polymer/polymer/issues/141#issuecomment-31887427 */\n      /* only animate when on-screen */\n      .fa-spin {\n        -webkit-animation: none !important;\n        animation: none !important;\n      }\n      :host(.show) .fa-spin {\n        -webkit-animation: fa-spin 2s infinite linear !important;\n        animation: fa-spin 2s infinite linear !important;\n      }\n      @-webkit-keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n      @keyframes fa-spin {\n        0% {\n          -webkit-transform: rotate(0deg);\n          transform: rotate(0deg);\n        }\n        100% {\n          -webkit-transform: rotate(359deg);\n          transform: rotate(359deg);\n        }\n      }\n    </style>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <noflo-icon icon=\"warning\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{_computeIf(isError, offerHTTPS)}}\">\n      <noflo-icon icon=\"spinner\" class=\"fa-spin\"></noflo-icon>\n    </template>\n    <template is=\"dom-if\" if=\"{{offerHTTPS}}\">\n      <noflo-icon icon=\"lock\"></noflo-icon>\n      This app is available securely at <a href=\"https://app.flowhub.io/\">https://app.flowhub.io/</a> - <a href=\"https://docs.flowhub.io/article/75-security-with-https-and-wss\">about</a>\n    </template>\n    <slot>\n    <span>{{message}}</span>\n    <template is=\"dom-if\" if=\"{{isError}}\">\n      <a href=\"#\" class=\"button\">go home</a>\n    </template>\n  </slot>\n`,\n\n  is: 'noflo-alert',\n\n  properties: {\n    isError: {\n      type: Boolean,\n      value: false,\n      notify: true,\n      observer: 'isErrorChanged',\n    },\n    message: {\n      type: String,\n      value: '',\n      notify: true,\n    },\n    offerHTTPS: {\n      type: Boolean,\n      value: false,\n      notify: true,\n    },\n  },\n\n  isErrorChanged() {\n    if (this.isError) {\n      PolymerDom(this).classList.add('error');\n    } else {\n      PolymerDom(this).classList.remove('error');\n    }\n  },\n\n  _computeIf(isError, offerHTTPS) {\n    return !isError && !offerHTTPS;\n  },\n});\n","import api from \"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n            import content from \"!!../node_modules/css-loader/dist/cjs.js!./noflo-ui.css\";\n\nvar options = {};\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nexport default content.locals || {};","import { Polymer, html } from '@polymer/polymer/polymer-legacy';\nimport { dom as PolymerDom } from '@polymer/polymer/lib/legacy/polymer.dom';\nimport projects from '../src/projects';\nimport './noflo-polymer';\nimport './noflo-main';\nimport './the-graph-editor';\nimport './noflo-library';\nimport './noflo-context';\nimport './noflo-runtime';\nimport './noflo-journal';\nimport './noflo-component-editor';\nimport './noflo-search';\nimport './noflo-project';\nimport './noflo-packets';\nimport './noflo-alert';\nimport '../css/noflo-ui.css';\n\nPolymer({\n  _template: html`\n    <style>\n      /*\n       * z-indexes:\n       *\n       * Modal dialogs: 5\n       * Main screen: 4\n       * Panels: 3\n       * Context cards & runtime controls: 2\n       * Workspace chrome: 1\n       * Workspace: 0\n       */\n      :host {\n        display: block;\n      }\n\n      noflo-main {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n        overflow-y: scroll;\n        -webkit-overflow-scrolling: touch;\n        scrollbar-width: none;\n        z-index: 4;\n      }\n      the-graph-editor {\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100vw;\n        height: 100vh;\n      }\n      noflo-component-editor {\n        position: fixed;\n        top: 0;\n        left: 36px;\n        height: 100vh;\n        right: 36px;\n        z-index: 0;\n      }\n      noflo-search {\n        position: fixed;\n        top: 0px;\n        left: 36px;\n        width: 288px;\n        height: 72px;\n        z-index: 2;\n      }\n      noflo-runtime {\n        position: fixed;\n        top: 0px;\n        right: 0px;\n        width: 288px;\n        height: 72px;\n        z-index: 3;\n      }\n      noflo-journal {\n        position: fixed;\n        bottom: 0px;\n        right: 36px;\n        width: 288px;\n        z-index: 3;\n      }\n\n      #alert {\n        box-sizing: border-box;\n        position: fixed;\n        top: -144px;\n        left: 0;\n        right: 0;\n        z-index: 10;\n        max-height: 144px;\n        overflow: hidden;\n        transition: top 0.3s ease-in-out;\n      }\n      #alert.show {\n        top: 0;\n      }\n      #asproject::before {\n        content: ' ';\n        position: absolute;\n        border: 2px solid hsl(185, 98%, 46%);\n        border-radius: 6px;\n        top: -6px;\n        bottom: -6px;\n        left: -6px;\n        right: -6px;\n      }\n      #asproject:hover {\n        background-color: black;\n        color: hsl(185, 98%, 46%);\n      }\n      #asproject {\n        font-family: \"SourceCodePro\",Helvetica,Arial,sans-serif;\n        position: fixed;\n        box-sizing: border-box;\n        left: 50%;\n        transform: translateX(-50%);\n        z-index: 9;\n        background-color: hsla(185, 98%, 46%, .8);\n        border: 1px solid hsl(185, 98%, 46%);\n        color: black;\n        top: 36px;\n        height: 36px;\n        border-radius: 3px;\n        padding: 8px;\n        cursor: pointer;\n        transition: color 0.3s ease, background-color 0.3s ease, opacity 5.0s ease-in;\n        visibility: hidden;\n        opacity: 0;\n      }\n    </style>\n    <noflo-main id=\"main\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" projects=\"{{ctx.projects}}\" user=\"{{ctx.user}}\" remote-projects=\"{{ctx.remoteProjects}}\"></noflo-main>\n    <the-graph-editor id=\"grapheditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" graph=\"{{ctx.graph}}\" icons=\"[[ctx.icons]]\"></the-graph-editor>\n    <noflo-library id=\"library\" search=\"{{ctx.search}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\"></noflo-library>\n    <noflo-context id=\"context\" nodes=\"{{ctx.nodes}}\" edges=\"{{ctx.edges}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" graphs=\"{{ctx.graphs}}\" runtimes=\"{{ctx.runtimes}}\" events=\"[[ctx.events]]\"></noflo-context>\n    <noflo-runtime id=\"runtime\" runtime=\"{{ctx.runtime}}\" runtimes=\"{{ctx.compatible}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-runtime>\n    <noflo-journal id=\"journal\" db=\"{{ctx.db}}\" theme=\"[[theme]]\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\"></noflo-journal>\n    <noflo-component-editor id=\"componenteditor\" theme=\"[[theme]]\" width=\"{{width}}\" height=\"{{height}}\" runtime=\"{{ctx.runtime}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\"></noflo-component-editor>\n    <noflo-search id=\"search\" theme=\"[[theme]]\" runtimes=\"{{ctx.runtimes}}\" project=\"{{ctx.project}}\" graph=\"{{ctx.graph}}\" component=\"{{ctx.component}}\" graphs=\"{{ctx.graphs}}\"></noflo-search>\n    <noflo-project id=\"project\" runtimes=\"{{ctx.runtimes}}\" graph=\"{{ctx.graph}}\" project=\"{{ctx.project}}\" component=\"{{ctx.component}}\" runtime=\"{{ctx.runtime}}\"></noflo-project>\n    <noflo-packets id=\"packets\" edges=\"[[ctx.edges]]\" nodes=\"[[ctx.nodes]]\" currentgraph=\"[[ctx.graph]]\" packets=\"[[ctx.packets]]\" events=\"[[ctx.events]]\" width=\"[[width]]\"></noflo-packets>\n    <noflo-alert id=\"alert\" on-click=\"hideAlert\"></noflo-alert>\n`,\n\n  is: 'noflo-ui',\n\n  properties: {\n    ctx: {\n      type: Object,\n      value() {\n        return {\n          db: null,\n          search: null,\n          graph: null,\n          component: null,\n          graphs: [],\n          project: null,\n          projects: [],\n          runtime: null,\n          runtimes: [],\n          compatibleRuntimes: [],\n          packets: [],\n          edges: [],\n          nodes: [],\n        };\n      },\n    },\n    theme: {\n      type: String,\n      value: 'dark',\n      notify: true,\n      observer: 'themeChanged',\n    },\n    dontAutoHideAlert: {\n      type: Boolean,\n      value: false,\n    },\n    height: {\n      value() {\n        return window.innerHeight;\n      },\n      notify: true,\n    },\n    width: {\n      value() {\n        return window.innerWidth;\n      },\n      notify: true,\n    },\n  },\n\n  clearContextFirst: [\n    'graphs',\n    'runtimes',\n    'projects',\n    'edges',\n    'nodes',\n    'compatibleRuntimes',\n    'remoteProjects',\n  ],\n\n  emitEvent(event, payload) {\n    this.fire(event, payload);\n  },\n\n  ready() {\n    this.$.main.addEventListener('userUpdated', (event) => {\n      this.emitEvent('user:update', event.detail);\n    });\n    this.$.main.addEventListener('logout', () => {\n      this.emitEvent('user:logout', true);\n    });\n    this.$.main.addEventListener('login', () => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [],\n      });\n    });\n    this.$.main.addEventListener('relogin', (event) => {\n      this.emitEvent('user:login', {\n        url: window.location.href,\n        scopes: [event.detail],\n      });\n    });\n    this.$.main.addEventListener('fetchRemote', (event) => {\n      this.emitEvent('flowhub:projects:fetch', event.detail);\n    });\n    this.$.main.addEventListener('downloadProject', (event) => {\n      this.emitEvent('application:sethash', [\n        'github',\n        event.detail.org,\n        event.detail.repo,\n        'tree',\n        event.detail.branch,\n      ]);\n    });\n    this.$.main.addEventListener('fetchRuntimes', (event) => {\n      this.emitEvent('flowhub:runtimes:fetch', event.detail);\n    });\n    this.$.main.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.main.addEventListener('newruntime', (event) => {\n      this.emitEvent('flowhub:runtimes:register', event.detail);\n    });\n    this.$.main.addEventListener('newproject', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.main.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('openProject', (event) => {\n      this.openProject(event.detail);\n    });\n    this.$.context.addEventListener('newsubgraph', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendSubgraph', {\n        ...event.detail,\n        runtime: this.ctx.runtime.definition.id,\n      });\n    });\n    this.$.context.addEventListener('clear:runtimeevents', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph && !clear.all) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      delete clear.all;\n      this.emitEvent('runtime:clearevents', clear);\n    });\n    this.$.context.addEventListener('clear:runtimepackets', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      const clear = event.detail;\n      clear.runtime = this.ctx.runtime.definition.id;\n      if (this.ctx.graph) {\n        clear.graph = this.ctx.graph.name || this.ctx.graph.properties.id;\n      }\n      this.emitEvent('runtime:clearpackets', clear);\n    });\n    this.$.runtime.addEventListener('switchRuntime', (event) => {\n      this.emitEvent('application:recreatestate', event.detail);\n    });\n    this.$.runtime.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:runtime', event.detail);\n    });\n    this.$.runtime.addEventListener('start', (event) => {\n      this.emitEvent('runtime:start', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('stop', (event) => {\n      this.emitEvent('runtime:stop', {\n        runtime: event.detail.runtime,\n        graph: event.detail.graph,\n        project: this.ctx.project,\n      });\n    });\n    this.$.runtime.addEventListener('reconnect', (event) => {\n      this.emitEvent('runtime:reconnect', event.detail);\n    });\n    this.$.grapheditor.addEventListener('edges', (event) => {\n      this.emitEvent('context:edges', event.detail);\n    });\n    this.$.grapheditor.addEventListener('nodes', (event) => {\n      this.emitEvent('context:nodes', event.detail);\n    });\n    this.$.grapheditor.addEventListener('changed', (event) => {\n      const ev = event;\n      ev.detail.properties.changed = true;\n      this.emitEvent('storage:save:graph', ev.detail);\n    });\n    this.$.grapheditor.addEventListener('graphChanges', (event) => {\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraphChanges', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: this.ctx.graph,\n        changes: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.project.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:project', event.detail);\n    });\n    this.$.project.addEventListener('newgraph', (event) => {\n      this.emitEvent('storage:save:graph', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendGraph', {\n        runtime: this.ctx.runtime.definition.id,\n        graph: event.detail,\n        project: this.ctx.project,\n      });\n    });\n    this.$.project.addEventListener('newcomponent', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n    });\n    this.$.project.addEventListener('newspec', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n    });\n    this.$.project.addEventListener('sync', (event) => {\n      this.emitEvent('github:sync:prepare', event.detail);\n    });\n    this.$.project.addEventListener('syncDecision', (event) => {\n      this.emitEvent('github:sync:synchronize', event.detail);\n    });\n    this.$.project.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.project.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.main.addEventListener('deleteProject', (event) => {\n      this.emitEvent('application:sethash', []);\n      event.detail.graphs.forEach((graph) => {\n        this.emitEvent('storage:delete:graph', graph);\n      });\n      event.detail.components.forEach((component) => {\n        this.emitEvent('storage:delete:component', component);\n      });\n      event.detail.specs.forEach((spec) => {\n        this.emitEvent('storage:delete:spec', spec);\n      });\n      this.emitEvent('storage:delete:project', event.detail);\n    });\n    this.$.main.addEventListener('deleteRuntime', (event) => {\n      this.emitEvent('flowhub:runtimes:remove', event.detail);\n    });\n    this.$.main.addEventListener('deleteRepo', (event) => {\n      this.emitEvent('flowhub:projects:remove', event.detail);\n      if (this.ctx.remoteProjects) {\n        // Since remote projects are not updated via normal flow, we can\n        // directly remove it from view\n        this.splice('ctx.remoteProjects', this.ctx.remoteProjects.indexOf(event.detail), 1);\n      }\n    });\n    this.$.componenteditor.addEventListener('changed', (event) => {\n      this.emitEvent('storage:save:component', event.detail);\n      if (!this.ctx.runtime || !this.ctx.runtime.definition || !this.ctx.runtime.definition.id) {\n        return;\n      }\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: event.detail,\n      });\n      this.triggerTests();\n    });\n    this.$.componenteditor.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.emitEvent('runtime:sendComponent', {\n        runtime: this.ctx.runtime.definition.id,\n        component: this.ctx.component,\n      });\n      this.triggerTests();\n    });\n    this.$.search.addEventListener('search:library', (event) => {\n      this.emitEvent('context:search_library', event.detail);\n    });\n    this.$.search.addEventListener('search:graph', (event) => {\n      this.emitEvent('context:search_graph', event.detail);\n    });\n    this.$.search.addEventListener('hash', (event) => {\n      this.emitEvent('application:sethash', event.detail);\n    });\n    this.$.library.addEventListener('result', (event) => {\n      this.emitEvent('context:search_library_result', { searchLibraryResult: event.detail });\n    });\n    this.$.search.addEventListener('deleteGraph', (event) => {\n      const { project } = this.ctx;\n      this.emitEvent('storage:delete:graph', event.detail);\n      if (project && project.graphs.indexOf(event.detail) !== -1) {\n        this.splice('ctx.project.graphs', project.graphs.indexOf(event.detail), 1);\n      }\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('deleteComponent', (event) => {\n      const { project } = this.ctx;\n      if (!project || !project.components) {\n        return;\n      }\n      const component = event.detail;\n      const index = project.components.indexOf(component);\n      if (index !== -1) {\n        this.splice('ctx.project.components', index, 1);\n      }\n      this.emitEvent('storage:delete:component', component);\n      if (!project.graphs.length && !project.components.length) {\n        // Empty project, remove\n        this.emitEvent('storage:delete:project', project);\n        // Go home\n        this.emitEvent('application:sethash', []);\n      } else {\n        this.openProject(project);\n      }\n    });\n    this.$.search.addEventListener('specschanged', (event) => {\n      this.emitEvent('storage:save:spec', event.detail);\n      this.triggerTests();\n    });\n    this.set('$.library.editor', this.$.grapheditor);\n    this.set('$.journal.editor', this.$.grapheditor);\n    this.set('$.context.editor', this.$.grapheditor);\n    this.set('$.packets.editor', this.$.grapheditor);\n    this.set('$.search.editor', this.$.grapheditor);\n    this.set('$.runtime.panel', this.$.context.$.fixed);\n    this.set('$.packets.panel', this.$.context.$.contextsection);\n    this.set('$.search.panel', this.$.context.$.contextsection);\n  },\n\n  updated(context) {\n    if (context.state) {\n      switch (context.state) {\n        case 'error': {\n          this.showError(context);\n          break;\n        }\n        case 'ok': {\n          this.hideAlertSoon();\n          break;\n        }\n        case 'loading': {\n          this.showProgress(context);\n          break;\n        }\n        default: {\n          break;\n        }\n      }\n    }\n\n    // Update local state with incoming data\n    Object.keys(context).forEach((key) => {\n      if (this.clearContextFirst.indexOf(key) !== -1) {\n        // Clear arrays first so Polymer knows there are changes\n        this.set(`ctx.${key}`, context[key].slice(0));\n        if (key === 'projects') {\n          // Projects are complex objects that need a full notify\n          for (let i = 0; i < this.ctx.projects.length; i += 1) {\n            const project = this.ctx.projects[i];\n            this.set(`ctx.projects.${i}`, {});\n            this.set(`ctx.projects.${i}`, project);\n            if (this.ctx.project && this.ctx.project.id === project.id) {\n              this.set('ctx.project', {});\n              this.set('ctx.project', project);\n            }\n          }\n        }\n        return;\n      }\n      this.set(`ctx.${key}`, context[key]);\n    });\n    if (context.user && context.user['flowhub-theme']) {\n      this.theme = context.user['flowhub-theme'];\n    }\n    if (context.searchLibraryResult) {\n      this.$.search.libraryResults(this.ctx.searchLibraryResult);\n    }\n    if (context.searchGraphResult) {\n      this.$.search.graphResults(this.ctx.searchGraphResult);\n    }\n    if (context.syncOperation !== undefined) {\n      this.$.project.confirm(context.syncOperation);\n      return;\n    }\n    if (context.componentLibrary) {\n      Object.keys(this.$.grapheditor.$.graph.library).forEach((libKey) => {\n        delete this.$.grapheditor.$.graph.library[libKey];\n      });\n      context.componentLibrary.forEach((def) => {\n        this.$.grapheditor.registerComponent(def);\n      });\n      this.set('ctx.componentLibrary', null);\n    }\n    if (this.ctx.suites) {\n      this.$.runtime.showTests(this.ctx.suites);\n    }\n    if (this.ctx.state === 'loading') {\n      return;\n    }\n    if (this.ctx.state === 'error') {\n      this.showError(this.ctx);\n      return;\n    }\n    if (context.graphs) {\n      if (context.graphs.length) {\n        const oldGraph = this.ctx.graph;\n        this.set('ctx.graph', context.graphs[context.graphs.length - 1]);\n        if (oldGraph !== this.ctx.graph) {\n          setTimeout(() => {\n            this.emitEvent('context:graph', { graph: this.ctx.graph });\n          }, 1);\n        }\n      } else {\n        this.set('ctx.graph', null);\n      }\n    }\n    if (this.ctx.graph || this.ctx.component) {\n      this.set('$.main.open', false);\n      const isReadOnly = projects.isReadOnly(this.ctx);\n      this.set('$.search.readonly', isReadOnly);\n      this.set('$.grapheditor.readonly', isReadOnly);\n      this.set('$.context.readonly', isReadOnly);\n      this.set('$.packets.readonly', isReadOnly);\n    } else {\n      this.set('$.main.open', true);\n    }\n  },\n\n  showError(context) {\n    if (context.error && context.error.message) {\n      this.set('$.alert.message', context.error.message);\n      this.set('$.alert.isError', true);\n      this.set('$.alert.offerHTTPS', false);\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  showProgress(context) {\n    if (context.state || context.offerHTTPS) {\n      this.set('$.alert.message', context.state || '');\n      this.set('$.alert.isError', false);\n      this.set('$.alert.offerHTTPS', context.offerHTTPS || false);\n      this.dontAutoHideAlert = context.dontAutoHideAlert || false;\n      PolymerDom(this.$.alert).classList.add('show');\n    }\n  },\n\n  triggerTests() {\n    if (!this.ctx.runtime) {\n      return;\n    }\n    this.emitEvent('runtime:runTests', {\n      project: this.ctx.project,\n      runtime: this.ctx.runtime.definition,\n    });\n  },\n\n  hideAlert() {\n    PolymerDom(this.$.alert).classList.remove('show');\n  },\n\n  hideAlertSoon() {\n    if (this.dontAutoHideAlert) {\n      return;\n    }\n    if (!PolymerDom(this.$.alert).classList.contains('show')) {\n      return;\n    }\n    window.setTimeout(() => {\n      this.hideAlert();\n    }, 1300);\n  },\n\n  openProject(project) {\n    projects.getProjectHash(project, (err, hash) => {\n      if (err) {\n        return;\n      }\n      this.emitEvent('application:sethash', hash);\n    });\n  },\n\n  themeChanged(newTheme, oldTheme) {\n    if (oldTheme) {\n      PolymerDom(document.body).classList.remove(oldTheme);\n    }\n    PolymerDom(document.body).classList.add(this.theme);\n  },\n});\n","const { basename } = require('path');\n\nexports.sortByName = (a, b) => {\n  const aName = exports.unnamespace(exports.getName(a));\n  const bName = exports.unnamespace(exports.getName(b));\n  return aName.localeCompare(bName);\n};\n\nexports.getName = (obj, allowUnknown = true) => {\n  if (!obj) {\n    if (allowUnknown) {\n      return 'Unknown';\n    }\n    return null;\n  }\n  const name = (obj.properties != null ? obj.properties.name : undefined) || obj.name || obj.id;\n  if (!name && allowUnknown) {\n    return 'Unknown';\n  }\n  return name;\n};\n\nexports.unnamespace = (name) => {\n  if (name.indexOf('/') === -1) {\n    return name;\n  }\n  return basename(name);\n};\n\nexports.namespace = (name, namespace) => {\n  if (name.indexOf('/') !== -1) {\n    return name;\n  }\n  return `${namespace}/${name}`;\n};\n\nexports.sortBySeen = (ain, bin) => {\n  const a = ain;\n  const b = bin;\n  if (!a.seen) {\n    return 1;\n  }\n  if (!b.seen) {\n    return -1;\n  }\n  a.seen = typeof a.seen === 'object' ? a.seen : new Date(a.seen);\n  b.seen = typeof b.seen === 'object' ? b.seen : new Date(b.seen);\n  if (a.seen > b.seen) {\n    return -1;\n  }\n  if (b.seen > a.seen) {\n    return 1;\n  }\n  return 0;\n};\n\nexports.addToList = (list, entity, sort = exports.sortByName) => {\n  let found = false;\n  list.forEach((existing) => {\n    if (existing === entity) {\n      // Entity is already in list as-is, skip\n      found = true;\n      return;\n    }\n    const existingId = exports.unnamespace(exports.getName(existing, false));\n    const entityId = exports.unnamespace(exports.getName(entity, false));\n    if (existingId === entityId) {\n      // id match, replace\n      const exists = existing;\n      Object.keys(entity).forEach((key) => {\n        exists[key] = entity[key];\n      });\n      found = true;\n    }\n  });\n  if (found) { return; }\n  list.push(entity);\n  // Sort the list on desired criteria\n  list.sort(sort);\n};\n\nexports.removeFromList = (list, entity) => {\n  const matched = list.find((existing) => {\n    if (existing === entity) {\n      return true;\n    }\n    const existingId = existing.properties ? existing.properties.id : existing.id;\n    const entityId = entity.properties ? entity.properties.id : entity.id;\n    return (existingId === entityId);\n  });\n  if (!matched) {\n    return;\n  }\n  list.splice(list.indexOf(matched), 1);\n};\n","const TheGraph = require('the-graph');\n\nexports.getIcon = (iconName, fallback = '') => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return iconName;\n  }\n  if (!iconMap[iconName]) {\n    if (!fallback) { return fallback; }\n    return iconMap[fallback];\n  }\n  return iconMap[iconName];\n};\n\nexports.getIcons = () => {\n  const iconMap = TheGraph.FONT_AWESOME;\n  if (!iconMap) {\n    return {};\n  }\n  return iconMap;\n};\n"],"sourceRoot":""}